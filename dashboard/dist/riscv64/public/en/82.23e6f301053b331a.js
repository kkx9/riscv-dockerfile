(self.webpackChunkkubernetes_dashboard=self.webpackChunkkubernetes_dashboard||[]).push([[82],{9082:(ke,fe,G)=>{"use strict";G.r(fe),G.d(fe,{ShellModule:()=>x});var W=G(6895),s=G(1028),y=G(6042),l=G(4793),d=G(126),f=G(3456),h=G(5861),S=G(7489),p=G(4707),o=G(6758),a=G(2722),u=G(4111),n=G(9162),t=G(7575),e=G(5467),r=G(4328),i=G(4650),c=G(7009),_=G(7347),v=G(4385),b=G(4006),C=G(3238);const g=["anchor"];function m(O,D){if(1&O&&(i.\u0275\u0275i18nStart(0,2,2),i.\u0275\u0275element(1,"mat-option",8),i.\u0275\u0275i18nEnd()),2&O){const P=D.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("value",P),i.\u0275\u0275i18nExp(P),i.\u0275\u0275i18nApply(0)}}function E(O,D){if(1&O){const P=i.\u0275\u0275getCurrentView();i.\u0275\u0275i18nStart(0,2,1),i.\u0275\u0275elementStart(1,"mat-select",6),i.\u0275\u0275listener("ngModelChange",function(N){return i.\u0275\u0275restoreView(P),i.\u0275\u0275nextContext().onPodContainerChange(N)})("ngModelChange",function(N){return i.\u0275\u0275restoreView(P),i.\u0275\u0275nextContext().selectedContainer=N}),i.\u0275\u0275template(2,m,2,2,"mat-option",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275i18nEnd()}if(2&O){const P=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",P.selectedContainer),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",P.containers)}}let L=(()=>{class O{constructor(P,F,N,z,X,M){this.containers_=P,this.utility_=F,this.activatedRoute_=N,this.matSnackBar_=z,this.cdr_=X,this._router=M,this.connected_=!1,this.connSubject_=new p.t(100),this.incommingMessage$_=new o.x,this.endpoint_=t.wE.resource(t._z.pod,!0),this.unsubscribe_=new o.x,this.keyEvent$_=new p.t(2),this.namespace_=this.activatedRoute_.snapshot.params.resourceNamespace,this.podName=this.activatedRoute_.snapshot.params.resourceName;const j=this.endpoint_.child(this.podName,t._z.container,this.namespace_);this.containers_.get(j).pipe((0,a.R)(this.unsubscribe_)).subscribe(R=>{this.containers=R.containers,this.containers.length>0&&!this.selectedContainer&&this.onPodContainerChange(this.containers[0])})}ngAfterViewInit(){this.activatedRoute_.paramMap.pipe((0,a.R)(this.unsubscribe_)).subscribe(P=>{const F=P.get("containerName");this.conn_&&this.connected_&&this.disconnect(),F&&(this.selectedContainer=F,this.setupConnection(),this.initTerm())})}ngOnDestroy(){this.unsubscribe_.next(),this.unsubscribe_.complete(),this.conn_&&this.conn_.close(),this.connSubject_&&this.connSubject_.complete(),this.term&&this.term.dispose(),this.incommingMessage$_.complete()}onPodContainerChange(P){this._router.navigate([`/shell/${this.namespace_}/${this.podName}/${P}`],{queryParamsHandling:"preserve"})}disconnect(){this.conn_&&this.conn_.close(),this.connSubject_&&(this.connSubject_.complete(),this.connSubject_=new p.t(100)),this.term&&this.term.dispose(),this.incommingMessage$_.complete(),this.incommingMessage$_=new o.x}initTerm(){this.connSubject_&&(this.connSubject_.complete(),this.connSubject_=new p.t(100)),this.term&&this.term.dispose(),this.term=new u.Terminal({fontSize:14,fontFamily:'Consolas, "Courier New", monospace',bellStyle:"sound",cursorBlink:!0});const P=new n.FitAddon;this.term.loadAddon(P),this.term.open(this.anchorRef.nativeElement),this.debouncedFit_=(0,S.debounce)(()=>{P.fit(),this.cdr_.markForCheck()},100),this.debouncedFit_(),window.addEventListener("resize",()=>this.debouncedFit_()),this.connSubject_.pipe((0,a.R)(this.unsubscribe_)).subscribe(F=>{this.handleConnectionMessage(F)}),this.term.onData(this.onTerminalSendString.bind(this)),this.term.onResize(this.onTerminalResize.bind(this)),this.term.onKey(F=>{this.keyEvent$_.next(F.domEvent)}),this.cdr_.markForCheck()}setupConnection(){var P=this;return(0,h.Z)(function*(){if(!(P.selectedContainer&&P.podName&&P.namespace_)||P.connecting_)return;P.connecting_=!0,P.connectionClosed_=!1;const F=`${t.wE.utility(t.b$.shell).shell(P.namespace_,P.podName)}/${P.selectedContainer}`,{id:N}=yield P.utility_.shell(F).toPromise();P.conn_=new SockJS(`api/sockjs?${N}`),P.conn_.onopen=P.onConnectionOpen.bind(P,N),P.conn_.onmessage=P.onConnectionMessage.bind(P),P.conn_.onclose=P.onConnectionClose.bind(P),P.cdr_.markForCheck()})()}onConnectionOpen(P){const F={Op:"bind",SessionID:P};this.conn_.send(JSON.stringify(F)),this.connSubject_.next(F),this.connected_=!0,this.connecting_=!1,this.connectionClosed_=!1,this.onTerminalResize(),this.term.focus(),this.cdr_.markForCheck()}handleConnectionMessage(P){"stdout"===P.Op&&this.term.write(P.Data),"toast"===P.Op&&this.matSnackBar_.open(P.Data,null,{duration:3e3}),this.incommingMessage$_.next(P),this.cdr_.markForCheck()}onConnectionMessage(P){const F=JSON.parse(P.data);this.connSubject_.next(F)}onConnectionClose(P){!this.connected_||(this.conn_.close(),this.connected_=!1,this.connecting_=!1,this.connectionClosed_=!0,this.matSnackBar_.open(P.reason,null,{duration:3e3}),this.cdr_.markForCheck())}onTerminalSendString(P){this.connected_&&this.conn_.send(JSON.stringify({Op:"stdin",Data:P,Cols:this.term.cols,Rows:this.term.rows}))}onTerminalResize(){this.connected_&&this.conn_.send(JSON.stringify({Op:"resize",Cols:this.term.cols,Rows:this.term.rows}))}}return O.\u0275fac=function(P){return new(P||O)(i.\u0275\u0275directiveInject(e.p),i.\u0275\u0275directiveInject(r.t),i.\u0275\u0275directiveInject(l.ActivatedRoute),i.\u0275\u0275directiveInject(c.ux),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(l.Router))},O.\u0275cmp=i.\u0275\u0275defineComponent({type:O,selectors:[["kd-shell"]],viewQuery:function(P,F){if(1&P&&i.\u0275\u0275viewQuery(g,7),2&P){let N;i.\u0275\u0275queryRefresh(N=i.\u0275\u0275loadQuery())&&(F.anchorRef=N.first)}},decls:6,vars:3,consts:function(){let D;return D=" Shell in " + "\ufffd*3:1\ufffd\ufffd#1:1\ufffd" + "" + "\ufffd*2:2\ufffd\ufffd#1:2\ufffd" + " " + "\ufffd0:2\ufffd" + " " + "\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd" + "" + "\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd" + " in " + "\ufffd0\ufffd" + " ",[[1,"kd-shell-content-card",3,"expandable"],["title","",1,"kd-shell-content-card-title"],D,["class","kd-shell-toolbar-select",3,"ngModel","ngModelChange",4,"ngIf"],["content","",1,"xterm-anchor"],["anchor",""],[1,"kd-shell-toolbar-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]]},template:function(P,F){1&P&&(i.\u0275\u0275elementStart(0,"kd-card",0)(1,"div",1),i.\u0275\u0275i18nStart(2,2),i.\u0275\u0275template(3,E,3,2,"mat-select",3),i.\u0275\u0275i18nEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(4,"div",4,5),i.\u0275\u0275elementEnd()),2&P&&(i.\u0275\u0275property("expandable",!1),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",(null==F.containers?null:F.containers.length)>0),i.\u0275\u0275i18nExp(F.podName),i.\u0275\u0275i18nApply(2))},directives:[_.A,W.NgIf,v.gD,b.NgControlStatus,b.NgModel,W.NgForOf,C.ey],styles:["[_nghost-%COMP%]{display:block;height:calc(100% - 56px);width:100%}.kd-shell-content-card[_ngcontent-%COMP%]{box-sizing:border-box;display:block;height:100%;width:100%}.kd-shell-content-card[_ngcontent-%COMP%]   .kd-shell-content-card-title[_ngcontent-%COMP%]{display:inline}.kd-shell-content-card[_ngcontent-%COMP%]     mat-card{display:flex;flex-flow:column;height:100%}.kd-shell-content-card[_ngcontent-%COMP%]     mat-card>mat-card-title+div{display:flex;flex:1;flex-flow:column}.kd-shell-content-card[_ngcontent-%COMP%]     mat-card mat-card-content{display:flex;flex:1;flex-flow:column;background:#000;padding:0}.kd-shell-content-card[_ngcontent-%COMP%]     mat-card mat-card-content>div, .kd-shell-content-card[_ngcontent-%COMP%]     mat-card mat-card-content .xterm-anchor{display:flex;flex:1;flex-flow:column}.kd-shell-toolbar-select[_ngcontent-%COMP%]{width:180px}.kd-shell-toolbar-select[_ngcontent-%COMP%]   .md-select-value[_ngcontent-%COMP%]{font-size:20px;min-width:160px}"]}),O})();const B={path:":resourceNamespace/:resourceName/:containerName",component:L,data:{breadcrumb:f.SX.Shell,parent:d.iO}},k={path:":resourceNamespace/:resourceName",component:L,data:{breadcrumb:f.SX.Shell,parent:d.iO}};let w=(()=>{class O{}return O.\u0275fac=function(P){return new(P||O)},O.\u0275mod=i.\u0275\u0275defineNgModule({type:O}),O.\u0275inj=i.\u0275\u0275defineInjector({imports:[[l.RouterModule.forChild([k,B])],l.RouterModule]}),O})(),x=(()=>{class O{}return O.\u0275fac=function(P){return new(P||O)},O.\u0275mod=i.\u0275\u0275defineNgModule({type:O}),O.\u0275inj=i.\u0275\u0275defineInjector({imports:[[W.CommonModule,y.m,s.K,w]]}),O})()},9162:ke=>{self,ke.exports=(()=>{"use strict";var fe={775:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0;var y=function(){function l(){}return l.prototype.activate=function(d){this._terminal=d},l.prototype.dispose=function(){},l.prototype.fit=function(){var d=this.proposeDimensions();d&&this._terminal&&(this._terminal.rows===d.rows&&this._terminal.cols===d.cols||(this._terminal._core._renderService.clear(),this._terminal.resize(d.cols,d.rows)))},l.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var d=this._terminal._core;if(0!==d._renderService.dimensions.actualCellWidth&&0!==d._renderService.dimensions.actualCellHeight){var f=window.getComputedStyle(this._terminal.element.parentElement),h=parseInt(f.getPropertyValue("height")),S=Math.max(0,parseInt(f.getPropertyValue("width"))),p=window.getComputedStyle(this._terminal.element),o=h-(parseInt(p.getPropertyValue("padding-top"))+parseInt(p.getPropertyValue("padding-bottom"))),a=S-(parseInt(p.getPropertyValue("padding-right"))+parseInt(p.getPropertyValue("padding-left")))-d.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(a/d._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(o/d._renderService.dimensions.actualCellHeight))}}}},l}();s.FitAddon=y}},G={};return function W(s){if(G[s])return G[s].exports;var y=G[s]={exports:{}};return fe[s](y,y.exports,W),y.exports}(775)})()},4111:ke=>{self,ke.exports=(()=>{"use strict";var fe={4567:function(W,s,y){var l,d=this&&this.__extends||(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(r[c]=i[c])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;var f=y(9042),h=y(6114),S=y(9924),p=y(3656),o=y(844),a=y(5596),u=y(9631),n=function(t){function e(r,i){var c=t.call(this)||this;c._terminal=r,c._renderService=i,c._liveRegionLineCount=0,c._charsToConsume=[],c._charsToAnnounce="",c._accessibilityTreeRoot=document.createElement("div"),c._accessibilityTreeRoot.classList.add("xterm-accessibility"),c._accessibilityTreeRoot.tabIndex=0,c._rowContainer=document.createElement("div"),c._rowContainer.setAttribute("role","list"),c._rowContainer.classList.add("xterm-accessibility-tree"),c._rowElements=[];for(var _=0;_<c._terminal.rows;_++)c._rowElements[_]=c._createAccessibilityTreeNode(),c._rowContainer.appendChild(c._rowElements[_]);if(c._topBoundaryFocusListener=function(v){return c._onBoundaryFocus(v,0)},c._bottomBoundaryFocusListener=function(v){return c._onBoundaryFocus(v,1)},c._rowElements[0].addEventListener("focus",c._topBoundaryFocusListener),c._rowElements[c._rowElements.length-1].addEventListener("focus",c._bottomBoundaryFocusListener),c._refreshRowsDimensions(),c._accessibilityTreeRoot.appendChild(c._rowContainer),c._renderRowsDebouncer=new S.TimeBasedDebouncer(c._renderRows.bind(c)),c._refreshRows(),c._liveRegion=document.createElement("div"),c._liveRegion.classList.add("live-region"),c._liveRegion.setAttribute("aria-live","assertive"),c._accessibilityTreeRoot.appendChild(c._liveRegion),!c._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return c._terminal.element.insertAdjacentElement("afterbegin",c._accessibilityTreeRoot),c.register(c._renderRowsDebouncer),c.register(c._terminal.onResize(function(v){return c._onResize(v.rows)})),c.register(c._terminal.onRender(function(v){return c._refreshRows(v.start,v.end)})),c.register(c._terminal.onScroll(function(){return c._refreshRows()})),c.register(c._terminal.onA11yChar(function(v){return c._onChar(v)})),c.register(c._terminal.onLineFeed(function(){return c._onChar("\n")})),c.register(c._terminal.onA11yTab(function(v){return c._onTab(v)})),c.register(c._terminal.onKey(function(v){return c._onKey(v.key)})),c.register(c._terminal.onBlur(function(){return c._clearLiveRegion()})),c.register(c._renderService.onDimensionsChange(function(){return c._refreshRowsDimensions()})),c._screenDprMonitor=new a.ScreenDprMonitor,c.register(c._screenDprMonitor),c._screenDprMonitor.setListener(function(){return c._refreshRowsDimensions()}),c.register((0,p.addDisposableDomListener)(window,"resize",function(){return c._refreshRowsDimensions()})),c}return d(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),(0,u.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},e.prototype._onBoundaryFocus=function(r,i){var c=r.target,_=this._rowElements[0===i?1:this._rowElements.length-2];if(c.getAttribute("aria-posinset")!==(0===i?"1":""+this._terminal.buffer.lines.length)&&r.relatedTarget===_){var v,b;if(0===i?(v=c,b=this._rowElements.pop(),this._rowContainer.removeChild(b)):(v=this._rowElements.shift(),b=c,this._rowContainer.removeChild(v)),v.removeEventListener("focus",this._topBoundaryFocusListener),b.removeEventListener("focus",this._bottomBoundaryFocusListener),0===i){var C=this._createAccessibilityTreeNode();this._rowElements.unshift(C),this._rowContainer.insertAdjacentElement("afterbegin",C)}else C=this._createAccessibilityTreeNode(),this._rowElements.push(C),this._rowContainer.appendChild(C);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===i?-1:1),this._rowElements[0===i?1:this._rowElements.length-2].focus(),r.preventDefault(),r.stopImmediatePropagation()}},e.prototype._onResize=function(r){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var i=this._rowContainer.children.length;i<this._terminal.rows;i++)this._rowElements[i]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[i]);for(;this._rowElements.length>r;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},e.prototype._createAccessibilityTreeNode=function(){var r=document.createElement("div");return r.setAttribute("role","listitem"),r.tabIndex=-1,this._refreshRowDimensions(r),r},e.prototype._onTab=function(r){for(var i=0;i<r;i++)this._onChar(" ")},e.prototype._onChar=function(r){var i=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==r&&(this._charsToAnnounce+=r):this._charsToAnnounce+=r,"\n"===r&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=f.tooMuchOutput)),h.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){i._accessibilityTreeRoot.appendChild(i._liveRegion)},0))},e.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,h.isMac&&(0,u.removeElementFromParent)(this._liveRegion)},e.prototype._onKey=function(r){this._clearLiveRegion(),this._charsToConsume.push(r)},e.prototype._refreshRows=function(r,i){this._renderRowsDebouncer.refresh(r,i,this._terminal.rows)},e.prototype._renderRows=function(r,i){for(var c=this._terminal.buffer,_=c.lines.length.toString(),v=r;v<=i;v++){var b=c.translateBufferLineToString(c.ydisp+v,!0),C=(c.ydisp+v+1).toString(),g=this._rowElements[v];g&&(0===b.length?g.innerText="\xa0":g.textContent=b,g.setAttribute("aria-posinset",C),g.setAttribute("aria-setsize",_))}this._announceCharacters()},e.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var r=0;r<this._terminal.rows;r++)this._refreshRowDimensions(this._rowElements[r])}},e.prototype._refreshRowDimensions=function(r){r.style.height=this._renderService.dimensions.actualCellHeight+"px"},e.prototype._announceCharacters=function(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},e}(o.Disposable);s.AccessibilityManager=n},3614:(W,s)=>{function y(h){return h.replace(/\r?\n/g,"\r")}function l(h,S){return S?"\x1b[200~"+h+"\x1b[201~":h}function d(h,S,p){h=l(h=y(h),p.decPrivateModes.bracketedPasteMode),p.triggerDataEvent(h,!0),S.value=""}function f(h,S,p){var o=p.getBoundingClientRect(),a=h.clientX-o.left-10,u=h.clientY-o.top-10;S.style.width="20px",S.style.height="20px",S.style.left=a+"px",S.style.top=u+"px",S.style.zIndex="1000",S.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=y,s.bracketTextForPaste=l,s.copyHandler=function(h,S){h.clipboardData&&h.clipboardData.setData("text/plain",S.selectionText),h.preventDefault()},s.handlePasteEvent=function(h,S,p){h.stopPropagation(),h.clipboardData&&d(h.clipboardData.getData("text/plain"),S,p)},s.paste=d,s.moveTextAreaUnderMouseCursor=f,s.rightClickHandler=function(h,S,p,o,a){f(h,S,p),a&&o.rightClickSelect(h),S.value=o.selectionText,S.select()}},4774:(W,s)=>{var y,l,d,f,p;function h(p){var o=p.toString(16);return o.length<2?"0"+o:o}function S(p,o){return p<o?(o+.05)/(p+.05):(p+.05)/(o+.05)}Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=void 0,(p=y=s.channels||(s.channels={})).toCss=function(o,a,u,n){return void 0!==n?"#"+h(o)+h(a)+h(u)+h(n):"#"+h(o)+h(a)+h(u)},p.toRgba=function(o,a,u,n){return void 0===n&&(n=255),(o<<24|a<<16|u<<8|n)>>>0},(l=s.color||(s.color={})).blend=function(p,o){var a=(255&o.rgba)/255;if(1===a)return{css:o.css,rgba:o.rgba};var n=o.rgba>>16&255,t=o.rgba>>8&255,e=p.rgba>>24&255,r=p.rgba>>16&255,i=p.rgba>>8&255,c=e+Math.round(((o.rgba>>24&255)-e)*a),_=r+Math.round((n-r)*a),v=i+Math.round((t-i)*a);return{css:y.toCss(c,_,v),rgba:y.toRgba(c,_,v)}},l.isOpaque=function(p){return 255==(255&p.rgba)},l.ensureContrastRatio=function(p,o,a){var u=f.ensureContrastRatio(p.rgba,o.rgba,a);if(u)return f.toColor(u>>24&255,u>>16&255,u>>8&255)},l.opaque=function(p){var o=(255|p.rgba)>>>0,a=f.toChannels(o);return{css:y.toCss(a[0],a[1],a[2]),rgba:o}},l.opacity=function(p,o){var a=Math.round(255*o),u=f.toChannels(p.rgba),n=u[0],t=u[1],e=u[2];return{css:y.toCss(n,t,e,a),rgba:y.toRgba(n,t,e,a)}},l.toColorRGB=function(p){return[p.rgba>>24&255,p.rgba>>16&255,p.rgba>>8&255]},(s.css||(s.css={})).toColor=function(p){switch(p.length){case 7:return{css:p,rgba:(parseInt(p.slice(1),16)<<8|255)>>>0};case 9:return{css:p,rgba:parseInt(p.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(p){function o(a,u,n){var t=a/255,e=u/255,r=n/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))}p.relativeLuminance=function(a){return o(a>>16&255,a>>8&255,255&a)},p.relativeLuminance2=o}(d=s.rgb||(s.rgb={})),function(p){function o(u,n,t){for(var e=u>>24&255,r=u>>16&255,i=u>>8&255,c=n>>24&255,_=n>>16&255,v=n>>8&255,b=S(d.relativeLuminance2(c,v,_),d.relativeLuminance2(e,r,i));b<t&&(c>0||_>0||v>0);)c-=Math.max(0,Math.ceil(.1*c)),_-=Math.max(0,Math.ceil(.1*_)),v-=Math.max(0,Math.ceil(.1*v)),b=S(d.relativeLuminance2(c,v,_),d.relativeLuminance2(e,r,i));return(c<<24|_<<16|v<<8|255)>>>0}function a(u,n,t){for(var e=u>>24&255,r=u>>16&255,i=u>>8&255,c=n>>24&255,_=n>>16&255,v=n>>8&255,b=S(d.relativeLuminance2(c,v,_),d.relativeLuminance2(e,r,i));b<t&&(c<255||_<255||v<255);)c=Math.min(255,c+Math.ceil(.1*(255-c))),_=Math.min(255,_+Math.ceil(.1*(255-_))),v=Math.min(255,v+Math.ceil(.1*(255-v))),b=S(d.relativeLuminance2(c,v,_),d.relativeLuminance2(e,r,i));return(c<<24|_<<16|v<<8|255)>>>0}p.ensureContrastRatio=function(u,n,t){var e=d.relativeLuminance(u>>8),r=d.relativeLuminance(n>>8);if(S(e,r)<t)return r<e?o(u,n,t):a(u,n,t)},p.reduceLuminance=o,p.increaseLuminance=a,p.toChannels=function(u){return[u>>24&255,u>>16&255,u>>8&255,255&u]},p.toColor=function(u,n,t){return{css:y.toCss(u,n,t),rgba:y.toRgba(u,n,t)}}}(f=s.rgba||(s.rgba={})),s.toPaddedHex=h,s.contrastRatio=S},7239:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;var y=function(){function l(){this._color={},this._rgba={}}return l.prototype.clear=function(){this._color={},this._rgba={}},l.prototype.setCss=function(d,f,h){this._rgba[d]||(this._rgba[d]={}),this._rgba[d][f]=h},l.prototype.getCss=function(d,f){return this._rgba[d]?this._rgba[d][f]:void 0},l.prototype.setColor=function(d,f,h){this._color[d]||(this._color[d]={}),this._color[d][f]=h},l.prototype.getColor=function(d,f){return this._color[d]?this._color[d][f]:void 0},l}();s.ColorContrastCache=y},5680:function(W,s,y){var l=this&&this.__spreadArray||function(n,t,e){if(e||2===arguments.length)for(var r,i=0,c=t.length;i<c;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return n.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(s,"__esModule",{value:!0}),s.ColorManager=s.DEFAULT_ANSI_COLORS=void 0;var d=y(4774),f=y(7239),h=d.css.toColor("#ffffff"),S=d.css.toColor("#000000"),p=d.css.toColor("#ffffff"),o=d.css.toColor("#000000"),a={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var n=[d.css.toColor("#2e3436"),d.css.toColor("#cc0000"),d.css.toColor("#4e9a06"),d.css.toColor("#c4a000"),d.css.toColor("#3465a4"),d.css.toColor("#75507b"),d.css.toColor("#06989a"),d.css.toColor("#d3d7cf"),d.css.toColor("#555753"),d.css.toColor("#ef2929"),d.css.toColor("#8ae234"),d.css.toColor("#fce94f"),d.css.toColor("#729fcf"),d.css.toColor("#ad7fa8"),d.css.toColor("#34e2e2"),d.css.toColor("#eeeeec")],t=[0,95,135,175,215,255],e=0;e<216;e++){var r=t[e/36%6|0],i=t[e/6%6|0],c=t[e%6];n.push({css:d.channels.toCss(r,i,c),rgba:d.channels.toRgba(r,i,c)})}for(e=0;e<24;e++){var _=8+10*e;n.push({css:d.channels.toCss(_,_,_),rgba:d.channels.toRgba(_,_,_)})}return n}());var u=function(){function n(t,e){this.allowTransparency=e;var r=t.createElement("canvas");r.width=1,r.height=1;var i=r.getContext("2d");if(!i)throw new Error("Could not get rendering context");this._ctx=i,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new f.ColorContrastCache,this.colors={foreground:h,background:S,cursor:p,cursorAccent:o,selectionTransparent:a,selectionOpaque:d.color.blend(S,a),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return n.prototype.onOptionsChange=function(t){"minimumContrastRatio"===t&&this._contrastCache.clear()},n.prototype.setTheme=function(t){void 0===t&&(t={}),this.colors.foreground=this._parseColor(t.foreground,h),this.colors.background=this._parseColor(t.background,S),this.colors.cursor=this._parseColor(t.cursor,p,!0),this.colors.cursorAccent=this._parseColor(t.cursorAccent,o,!0),this.colors.selectionTransparent=this._parseColor(t.selection,a,!0),this.colors.selectionOpaque=d.color.blend(this.colors.background,this.colors.selectionTransparent),d.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=d.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(t.black,s.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(t.red,s.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(t.green,s.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(t.yellow,s.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(t.blue,s.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(t.magenta,s.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(t.cyan,s.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(t.white,s.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(t.brightBlack,s.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(t.brightRed,s.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(t.brightGreen,s.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(t.brightYellow,s.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(t.brightBlue,s.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(t.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(t.brightCyan,s.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(t.brightWhite,s.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},n.prototype.restoreColor=function(t){if(void 0!==t)switch(t){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[t]=this._restoreColors.ansi[t]}else for(var e=0;e<this._restoreColors.ansi.length;++e)this.colors.ansi[e]=this._restoreColors.ansi[e]},n.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:l([],this.colors.ansi,!0)}},n.prototype._parseColor=function(t,e,r){if(void 0===r&&(r=this.allowTransparency),void 0===t)return e;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=t,"string"!=typeof this._ctx.fillStyle)return console.warn("Color: "+t+" is invalid using fallback "+e.css),e;this._ctx.fillRect(0,0,1,1);var i=this._ctx.getImageData(0,0,1,1).data;if(255!==i[3]){if(!r)return console.warn("Color: "+t+" is using transparency, but allowTransparency is false. Using fallback "+e.css+"."),e;var c=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(m){return Number(m)}),_=c[0],v=c[1],b=c[2],g=Math.round(255*c[3]);return{rgba:d.channels.toRgba(_,v,b,g),css:t}}return{css:this._ctx.fillStyle,rgba:d.channels.toRgba(i[0],i[1],i[2],i[3])}},n}();s.ColorManager=u},9631:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.removeElementFromParent=void 0,s.removeElementFromParent=function(){for(var y,l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];for(var f=0,h=l;f<h.length;f++){var S=h[f];null===(y=null==S?void 0:S.parentElement)||void 0===y||y.removeChild(S)}}},3656:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(y,l,d,f){y.addEventListener(l,d,f);var h=!1;return{dispose:function(){h||(h=!0,y.removeEventListener(l,d,f))}}}},3551:function(W,s,y){var l=this&&this.__decorate||function(o,a,u,n){var t,e=arguments.length,r=e<3?a:null===n?n=Object.getOwnPropertyDescriptor(a,u):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(o,a,u,n);else for(var i=o.length-1;i>=0;i--)(t=o[i])&&(r=(e<3?t(r):e>3?t(a,u,r):t(a,u))||r);return e>3&&r&&Object.defineProperty(a,u,r),r},d=this&&this.__param||function(o,a){return function(u,n){a(u,n,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseZone=s.Linkifier=void 0;var f=y(8460),h=y(2585),S=function(){function o(a,u,n){this._bufferService=a,this._logService=u,this._unicodeService=n,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new f.EventEmitter,this._onHideLinkUnderline=new f.EventEmitter,this._onLinkTooltip=new f.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(o.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),o.prototype.attachToDom=function(a,u){this._element=a,this._mouseZoneManager=u},o.prototype.linkifyRows=function(a,u){var n=this;this._mouseZoneManager&&(void 0===this._rowsToLinkify.start||void 0===this._rowsToLinkify.end?(this._rowsToLinkify.start=a,this._rowsToLinkify.end=u):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,a),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,u)),this._mouseZoneManager.clearAll(a,u),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return n._linkifyRows()},o._timeBeforeLatency))},o.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var a=this._bufferService.buffer;if(void 0!==this._rowsToLinkify.start&&void 0!==this._rowsToLinkify.end){var u=a.ydisp+this._rowsToLinkify.start;if(!(u>=a.lines.length)){for(var n=a.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,t=Math.ceil(2e3/this._bufferService.cols),e=this._bufferService.buffer.iterator(!1,u,n,t,t);e.hasNext();)for(var r=e.next(),i=0;i<this._linkMatchers.length;i++)this._doLinkifyRow(r.range.first,r.content,this._linkMatchers[i]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},o.prototype.registerLinkMatcher=function(a,u,n){if(void 0===n&&(n={}),!u)throw new Error("handler must be defined");var t={id:this._nextLinkMatcherId++,regex:a,handler:u,matchIndex:n.matchIndex,validationCallback:n.validationCallback,hoverTooltipCallback:n.tooltipCallback,hoverLeaveCallback:n.leaveCallback,willLinkActivate:n.willLinkActivate,priority:n.priority||0};return this._addLinkMatcherToList(t),t.id},o.prototype._addLinkMatcherToList=function(a){if(0!==this._linkMatchers.length){for(var u=this._linkMatchers.length-1;u>=0;u--)if(a.priority<=this._linkMatchers[u].priority)return void this._linkMatchers.splice(u+1,0,a);this._linkMatchers.splice(0,0,a)}else this._linkMatchers.push(a)},o.prototype.deregisterLinkMatcher=function(a){for(var u=0;u<this._linkMatchers.length;u++)if(this._linkMatchers[u].id===a)return this._linkMatchers.splice(u,1),!0;return!1},o.prototype._doLinkifyRow=function(a,u,n){for(var t,e=this,r=new RegExp(n.regex.source,(n.regex.flags||"")+"g"),i=-1,c=function(){var v=t["number"!=typeof n.matchIndex?0:n.matchIndex];if(!v)return _._logService.debug("match found without corresponding matchIndex",t,n),"break";if(i=u.indexOf(v,i+1),r.lastIndex=i+v.length,i<0)return"break";var b=_._bufferService.buffer.stringIndexToBufferIndex(a,i);if(b[0]<0)return"break";var C=_._bufferService.buffer.lines.get(b[0]);if(!C)return"break";var g=C.getFg(b[1]),m=g?g>>9&511:void 0;n.validationCallback?n.validationCallback(v,function(E){e._rowsTimeoutId||E&&e._addLink(b[1],b[0]-e._bufferService.buffer.ydisp,v,n,m)}):_._addLink(b[1],b[0]-_._bufferService.buffer.ydisp,v,n,m)},_=this;null!==(t=r.exec(u))&&"break"!==c(););},o.prototype._addLink=function(a,u,n,t,e){var r=this;if(this._mouseZoneManager&&this._element){var i=this._unicodeService.getStringCellWidth(n),c=a%this._bufferService.cols,_=u+Math.floor(a/this._bufferService.cols),v=(c+i)%this._bufferService.cols,b=_+Math.floor((c+i)/this._bufferService.cols);0===v&&(v=this._bufferService.cols,b--),this._mouseZoneManager.add(new p(c+1,_+1,v+1,b+1,function(C){if(t.handler)return t.handler(C,n);var g=window.open();g?(g.opener=null,g.location.href=n):console.warn("Opening link blocked as opener could not be cleared")},function(){r._onShowLinkUnderline.fire(r._createLinkHoverEvent(c,_,v,b,e)),r._element.classList.add("xterm-cursor-pointer")},function(C){r._onLinkTooltip.fire(r._createLinkHoverEvent(c,_,v,b,e)),t.hoverTooltipCallback&&t.hoverTooltipCallback(C,n,{start:{x:c,y:_},end:{x:v,y:b}})},function(){r._onHideLinkUnderline.fire(r._createLinkHoverEvent(c,_,v,b,e)),r._element.classList.remove("xterm-cursor-pointer"),t.hoverLeaveCallback&&t.hoverLeaveCallback()},function(C){return!t.willLinkActivate||t.willLinkActivate(C,n)}))}},o.prototype._createLinkHoverEvent=function(a,u,n,t,e){return{x1:a,y1:u,x2:n,y2:t,cols:this._bufferService.cols,fg:e}},o._timeBeforeLatency=200,o=l([d(0,h.IBufferService),d(1,h.ILogService),d(2,h.IUnicodeService)],o)}();s.Linkifier=S;var p=function(o,a,u,n,t,e,r,i,c){this.x1=o,this.y1=a,this.x2=u,this.y2=n,this.clickCallback=t,this.hoverCallback=e,this.tooltipCallback=r,this.leaveCallback=i,this.willLinkActivate=c};s.MouseZone=p},6465:function(W,s,y){var l,d=this&&this.__extends||(l=function(n,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}l(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(n,t,e,r){var i,c=arguments.length,_=c<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_=Reflect.decorate(n,t,e,r);else for(var v=n.length-1;v>=0;v--)(i=n[v])&&(_=(c<3?i(_):c>3?i(t,e,_):i(t,e))||_);return c>3&&_&&Object.defineProperty(t,e,_),_},h=this&&this.__param||function(n,t){return function(e,r){t(e,r,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier2=void 0;var S=y(2585),p=y(8460),o=y(844),a=y(3656),u=function(n){function t(e){var r=n.call(this)||this;return r._bufferService=e,r._linkProviders=[],r._linkCacheDisposables=[],r._isMouseOut=!0,r._activeLine=-1,r._onShowLinkUnderline=r.register(new p.EventEmitter),r._onHideLinkUnderline=r.register(new p.EventEmitter),r.register((0,o.getDisposeArrayDisposable)(r._linkCacheDisposables)),r}return d(t,n),Object.defineProperty(t.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),t.prototype.registerLinkProvider=function(e){var r=this;return this._linkProviders.push(e),{dispose:function(){var i=r._linkProviders.indexOf(e);-1!==i&&r._linkProviders.splice(i,1)}}},t.prototype.attachToDom=function(e,r,i){var c=this;this._element=e,this._mouseService=r,this._renderService=i,this.register((0,a.addDisposableDomListener)(this._element,"mouseleave",function(){c._isMouseOut=!0,c._clearCurrentLink()})),this.register((0,a.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,a.addDisposableDomListener)(this._element,"click",this._onClick.bind(this)))},t.prototype._onMouseMove=function(e){if(this._lastMouseEvent=e,this._element&&this._mouseService){var r=this._positionFromMouseEvent(e,this._element,this._mouseService);if(r){this._isMouseOut=!1;for(var i=e.composedPath(),c=0;c<i.length;c++){var _=i[c];if(_.classList.contains("xterm"))break;if(_.classList.contains("xterm-hover"))return}this._lastBufferCell&&r.x===this._lastBufferCell.x&&r.y===this._lastBufferCell.y||(this._onHover(r),this._lastBufferCell=r)}}},t.prototype._onHover=function(e){if(this._activeLine!==e.y)return this._clearCurrentLink(),void this._askForLink(e,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))},t.prototype._askForLink=function(e,r){var i,c=this;this._activeProviderReplies&&r||(null===(i=this._activeProviderReplies)||void 0===i||i.forEach(function(v){null==v||v.forEach(function(b){b.link.dispose&&b.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);var _=!1;this._linkProviders.forEach(function(v,b){var C;r?(null===(C=c._activeProviderReplies)||void 0===C?void 0:C.get(b))&&(_=c._checkLinkProviderResult(b,e,_)):v.provideLinks(e.y,function(g){var m,E;if(!c._isMouseOut){var L=null==g?void 0:g.map(function(B){return{link:B}});null===(m=c._activeProviderReplies)||void 0===m||m.set(b,L),_=c._checkLinkProviderResult(b,e,_),(null===(E=c._activeProviderReplies)||void 0===E?void 0:E.size)===c._linkProviders.length&&c._removeIntersectingLinks(e.y,c._activeProviderReplies)}})})},t.prototype._removeIntersectingLinks=function(e,r){for(var i=new Set,c=0;c<r.size;c++){var _=r.get(c);if(_)for(var v=0;v<_.length;v++)for(var b=_[v],g=b.link.range.end.y>e?this._bufferService.cols:b.link.range.end.x,m=b.link.range.start.y<e?0:b.link.range.start.x;m<=g;m++){if(i.has(m)){_.splice(v--,1);break}i.add(m)}}},t.prototype._checkLinkProviderResult=function(e,r,i){var c,_=this;if(!this._activeProviderReplies)return i;for(var v=this._activeProviderReplies.get(e),b=!1,C=0;C<e;C++)this._activeProviderReplies.has(C)&&!this._activeProviderReplies.get(C)||(b=!0);if(!b&&v){var g=v.find(function(E){return _._linkAtPosition(E.link,r)});g&&(i=!0,this._handleNewLink(g))}if(this._activeProviderReplies.size===this._linkProviders.length&&!i)for(C=0;C<this._activeProviderReplies.size;C++){var m=null===(c=this._activeProviderReplies.get(C))||void 0===c?void 0:c.find(function(E){return _._linkAtPosition(E.link,r)});if(m){i=!0,this._handleNewLink(m);break}}return i},t.prototype._onClick=function(e){if(this._element&&this._mouseService&&this._currentLink){var r=this._positionFromMouseEvent(e,this._element,this._mouseService);r&&this._linkAtPosition(this._currentLink.link,r)&&this._currentLink.link.activate(e,this._currentLink.link.text)}},t.prototype._clearCurrentLink=function(e,r){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!r||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=r)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,o.disposeArray)(this._linkCacheDisposables))},t.prototype._handleNewLink=function(e){var r=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var i=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);i&&this._linkAtPosition(e.link,i)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:void 0===e.link.decorations||e.link.decorations.underline,pointerCursor:void 0===e.link.decorations||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:function(){var c,_;return null===(_=null===(c=r._currentLink)||void 0===c?void 0:c.state)||void 0===_?void 0:_.decorations.pointerCursor},set:function(c){var _,v;(null===(_=r._currentLink)||void 0===_?void 0:_.state)&&r._currentLink.state.decorations.pointerCursor!==c&&(r._currentLink.state.decorations.pointerCursor=c,r._currentLink.state.isHovered&&(null===(v=r._element)||void 0===v||v.classList.toggle("xterm-cursor-pointer",c)))}},underline:{get:function(){var c,_;return null===(_=null===(c=r._currentLink)||void 0===c?void 0:c.state)||void 0===_?void 0:_.decorations.underline},set:function(c){var _,v,b;(null===(_=r._currentLink)||void 0===_?void 0:_.state)&&(null===(b=null===(v=r._currentLink)||void 0===v?void 0:v.state)||void 0===b?void 0:b.decorations.underline)!==c&&(r._currentLink.state.decorations.underline=c,r._currentLink.state.isHovered&&r._fireUnderlineEvent(e.link,c))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(c){r._clearCurrentLink(0===c.start?0:c.start+1+r._bufferService.buffer.ydisp,c.end+1+r._bufferService.buffer.ydisp)})))}},t.prototype._linkHover=function(e,r,i){var c;(null===(c=this._currentLink)||void 0===c?void 0:c.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),r.hover&&r.hover(i,r.text)},t.prototype._fireUnderlineEvent=function(e,r){var i=e.range,c=this._bufferService.buffer.ydisp,_=this._createLinkUnderlineEvent(i.start.x-1,i.start.y-c-1,i.end.x,i.end.y-c-1,void 0);(r?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(_)},t.prototype._linkLeave=function(e,r,i){var c;(null===(c=this._currentLink)||void 0===c?void 0:c.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),r.leave&&r.leave(i,r.text)},t.prototype._linkAtPosition=function(e,r){var c=e.range.start.y<r.y,_=e.range.end.y>r.y;return(e.range.start.y===e.range.end.y&&e.range.start.x<=r.x&&e.range.end.x>=r.x||c&&e.range.end.x>=r.x||_&&e.range.start.x<=r.x||c&&_)&&e.range.start.y<=r.y&&e.range.end.y>=r.y},t.prototype._positionFromMouseEvent=function(e,r,i){var c=i.getCoords(e,r,this._bufferService.cols,this._bufferService.rows);if(c)return{x:c[0],y:c[1]+this._bufferService.buffer.ydisp}},t.prototype._createLinkUnderlineEvent=function(e,r,i,c,_){return{x1:e,y1:r,x2:i,y2:c,cols:this._bufferService.cols,fg:_}},f([h(0,S.IBufferService)],t)}(o.Disposable);s.Linkifier2=u},9042:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(W,s,y){var l,d=this&&this.__extends||(l=function(n,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}l(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(n,t,e,r){var i,c=arguments.length,_=c<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_=Reflect.decorate(n,t,e,r);else for(var v=n.length-1;v>=0;v--)(i=n[v])&&(_=(c<3?i(_):c>3?i(t,e,_):i(t,e))||_);return c>3&&_&&Object.defineProperty(t,e,_),_},h=this&&this.__param||function(n,t){return function(e,r){t(e,r,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseZoneManager=void 0;var S=y(844),p=y(3656),o=y(4725),a=y(2585),u=function(n){function t(e,r,i,c,_,v){var b=n.call(this)||this;return b._element=e,b._screenElement=r,b._bufferService=i,b._mouseService=c,b._selectionService=_,b._optionsService=v,b._zones=[],b._areZonesActive=!1,b._lastHoverCoords=[void 0,void 0],b._initialSelectionLength=0,b.register((0,p.addDisposableDomListener)(b._element,"mousedown",function(C){return b._onMouseDown(C)})),b._mouseMoveListener=function(C){return b._onMouseMove(C)},b._mouseLeaveListener=function(C){return b._onMouseLeave(C)},b._clickListener=function(C){return b._onClick(C)},b}return d(t,n),t.prototype.dispose=function(){n.prototype.dispose.call(this),this._deactivate()},t.prototype.add=function(e){this._zones.push(e),1===this._zones.length&&this._activate()},t.prototype.clearAll=function(e,r){if(0!==this._zones.length){e&&r||(e=0,r=this._bufferService.rows-1);for(var i=0;i<this._zones.length;i++){var c=this._zones[i];(c.y1>e&&c.y1<=r+1||c.y2>e&&c.y2<=r+1||c.y1<e&&c.y2>r+1)&&(this._currentZone&&this._currentZone===c&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(i--,1))}0===this._zones.length&&this._deactivate()}},t.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},t.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},t.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},t.prototype._onHover=function(e){var r=this,i=this._findZoneEventAt(e);i!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),i&&(this._currentZone=i,i.hoverCallback&&i.hoverCallback(e),this._tooltipTimeout=window.setTimeout(function(){return r._onTooltip(e)},this._optionsService.rawOptions.linkTooltipHoverDuration)))},t.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var r=this._findZoneEventAt(e);null==r||r.tooltipCallback(e)},t.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var r=this._findZoneEventAt(e);(null==r?void 0:r.willLinkActivate(e))&&(e.preventDefault(),e.stopImmediatePropagation())}},t.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},t.prototype._onClick=function(e){var r=this._findZoneEventAt(e),i=this._getSelectionLength();r&&i===this._initialSelectionLength&&(r.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},t.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},t.prototype._findZoneEventAt=function(e){var r=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(r)for(var i=r[0],c=r[1],_=0;_<this._zones.length;_++){var v=this._zones[_];if(v.y1===v.y2){if(c===v.y1&&i>=v.x1&&i<v.x2)return v}else if(c===v.y1&&i>=v.x1||c===v.y2&&i<v.x2||c>v.y1&&c<v.y2)return v}},f([h(2,a.IBufferService),h(3,o.IMouseService),h(4,o.ISelectionService),h(5,a.IOptionsService)],t)}(S.Disposable);s.MouseZoneManager=u},6193:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0;var y=function(){function l(d){this._renderCallback=d}return l.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},l.prototype.refresh=function(d,f,h){var S=this;this._rowCount=h,d=void 0!==d?d:0,f=void 0!==f?f:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,d):d,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return S._innerRefresh()}))},l.prototype._innerRefresh=function(){if(void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var d=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(d,f)}},l}();s.RenderDebouncer=y},5596:function(W,s,y){var l,d=this&&this.__extends||(l=function(h,S){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,o){p.__proto__=o}||function(p,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(p[a]=o[a])})(h,S)},function(h,S){if("function"!=typeof S&&null!==S)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function p(){this.constructor=h}l(h,S),h.prototype=null===S?Object.create(S):(p.prototype=S.prototype,new p)});Object.defineProperty(s,"__esModule",{value:!0}),s.ScreenDprMonitor=void 0;var f=function(h){function S(){var p=null!==h&&h.apply(this,arguments)||this;return p._currentDevicePixelRatio=window.devicePixelRatio,p}return d(S,h),S.prototype.setListener=function(p){var o=this;this._listener&&this.clearListener(),this._listener=p,this._outerListener=function(){o._listener&&(o._listener(window.devicePixelRatio,o._currentDevicePixelRatio),o._updateDpr())},this._updateDpr()},S.prototype.dispose=function(){h.prototype.dispose.call(this),this.clearListener()},S.prototype._updateDpr=function(){var p;this._outerListener&&(null===(p=this._resolutionMediaMatchList)||void 0===p||p.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},S.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},S}(y(844).Disposable);s.ScreenDprMonitor=f},3236:function(W,s,y){var l,d=this&&this.__extends||(l=function(M,j){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,T){R.__proto__=T}||function(R,T){for(var A in T)Object.prototype.hasOwnProperty.call(T,A)&&(R[A]=T[A])})(M,j)},function(M,j){if("function"!=typeof j&&null!==j)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");function R(){this.constructor=M}l(M,j),M.prototype=null===j?Object.create(j):(R.prototype=j.prototype,new R)});Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;var f=y(2950),h=y(1680),S=y(3614),p=y(2584),o=y(5435),a=y(3525),u=y(3551),n=y(9312),t=y(6114),e=y(3656),r=y(9042),i=y(357),c=y(6954),_=y(4567),v=y(1296),b=y(7399),C=y(8460),g=y(8437),m=y(5680),E=y(3230),L=y(4725),B=y(428),k=y(8934),w=y(6465),x=y(5114),O=y(8969),D=y(4774),P=y(4269),F=y(5941),N=y(7641),z=typeof window<"u"?window.document:null,X=function(M){function j(R){void 0===R&&(R={});var T=M.call(this,R)||this;return T.browser=t,T._keyDownHandled=!1,T._keyPressHandled=!1,T._unprocessedDeadKey=!1,T._onCursorMove=new C.EventEmitter,T._onKey=new C.EventEmitter,T._onRender=new C.EventEmitter,T._onSelectionChange=new C.EventEmitter,T._onTitleChange=new C.EventEmitter,T._onBell=new C.EventEmitter,T._onFocus=new C.EventEmitter,T._onBlur=new C.EventEmitter,T._onA11yCharEmitter=new C.EventEmitter,T._onA11yTabEmitter=new C.EventEmitter,T._setup(),T.linkifier=T._instantiationService.createInstance(u.Linkifier),T.linkifier2=T.register(T._instantiationService.createInstance(w.Linkifier2)),T.decorationService=T.register(T._instantiationService.createInstance(N.DecorationService)),T.register(T._inputHandler.onRequestBell(function(){return T.bell()})),T.register(T._inputHandler.onRequestRefreshRows(function(A,q){return T.refresh(A,q)})),T.register(T._inputHandler.onRequestSendFocus(function(){return T._reportFocus()})),T.register(T._inputHandler.onRequestReset(function(){return T.reset()})),T.register(T._inputHandler.onRequestWindowsOptionsReport(function(A){return T._reportWindowsOptions(A)})),T.register(T._inputHandler.onColor(function(A){return T._handleColorEvent(A)})),T.register((0,C.forwardEvent)(T._inputHandler.onCursorMove,T._onCursorMove)),T.register((0,C.forwardEvent)(T._inputHandler.onTitleChange,T._onTitleChange)),T.register((0,C.forwardEvent)(T._inputHandler.onA11yChar,T._onA11yCharEmitter)),T.register((0,C.forwardEvent)(T._inputHandler.onA11yTab,T._onA11yTabEmitter)),T.register(T._bufferService.onResize(function(A){return T._afterResize(A.cols,A.rows)})),T}return d(j,M),Object.defineProperty(j.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),j.prototype._handleColorEvent=function(R){var T,A;if(this._colorManager){for(var q=0,K=R;q<K.length;q++){var V=K[q],Y=void 0,J="";switch(V.index){case 256:Y="foreground",J="10";break;case 257:Y="background",J="11";break;case 258:Y="cursor",J="12";break;default:Y="ansi",J="4;"+V.index}if(Y)switch(V.type){case 0:var ne=D.color.toColorRGB("ansi"===Y?this._colorManager.colors.ansi[V.index]:this._colorManager.colors[Y]);this.coreService.triggerDataEvent(p.C0.ESC+"]"+J+";"+(0,F.toRgbString)(ne)+p.C0.BEL);break;case 1:"ansi"===Y?this._colorManager.colors.ansi[V.index]=D.rgba.toColor.apply(D.rgba,V.color):this._colorManager.colors[Y]=D.rgba.toColor.apply(D.rgba,V.color);break;case 2:this._colorManager.restoreColor(V.index)}}null===(T=this._renderService)||void 0===T||T.setColors(this._colorManager.colors),null===(A=this.viewport)||void 0===A||A.onThemeChange(this._colorManager.colors)}},j.prototype.dispose=function(){var R,T,A;this._isDisposed||(M.prototype.dispose.call(this),null===(R=this._renderService)||void 0===R||R.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},null===(A=null===(T=this.element)||void 0===T?void 0:T.parentNode)||void 0===A||A.removeChild(this.element))},j.prototype._setup=function(){M.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(j.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),j.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},j.prototype._updateOptions=function(R){var T,A,q,K;switch(M.prototype._updateOptions.call(this,R),R){case"fontFamily":case"fontSize":null===(T=this._renderService)||void 0===T||T.clear(),null===(A=this._charSizeService)||void 0===A||A.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":null===(q=this.viewport)||void 0===q||q.syncScrollArea();break;case"screenReaderMode":this.optionsService.rawOptions.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new _.AccessibilityManager(this,this._renderService)):(null===(K=this._accessibilityManager)||void 0===K||K.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.rawOptions.theme)}},j.prototype._onTextAreaFocus=function(R){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(p.C0.ESC+"[I"),this.updateCursorStyle(R),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},j.prototype.blur=function(){var R;return null===(R=this.textarea)||void 0===R?void 0:R.blur()},j.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(p.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},j.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var T=this.buffer.lines.get(this.buffer.ybase+this.buffer.y);if(T){var A=Math.min(this.buffer.x,this.cols-1),q=this._renderService.dimensions.actualCellHeight,K=T.getWidth(A),V=this._renderService.dimensions.actualCellWidth*K,Y=this.buffer.y*this._renderService.dimensions.actualCellHeight;this.textarea.style.left=A*this._renderService.dimensions.actualCellWidth+"px",this.textarea.style.top=Y+"px",this.textarea.style.width=V+"px",this.textarea.style.height=q+"px",this.textarea.style.lineHeight=q+"px",this.textarea.style.zIndex="-5"}}},j.prototype._initGlobal=function(){var R=this;this._bindKeys(),this.register((0,e.addDisposableDomListener)(this.element,"copy",function(A){R.hasSelection()&&(0,S.copyHandler)(A,R._selectionService)}));var T=function(A){return(0,S.handlePasteEvent)(A,R.textarea,R.coreService)};this.register((0,e.addDisposableDomListener)(this.textarea,"paste",T)),this.register((0,e.addDisposableDomListener)(this.element,"paste",T)),this.register(t.isFirefox?(0,e.addDisposableDomListener)(this.element,"mousedown",function(A){2===A.button&&(0,S.rightClickHandler)(A,R.textarea,R.screenElement,R._selectionService,R.options.rightClickSelectsWord)}):(0,e.addDisposableDomListener)(this.element,"contextmenu",function(A){(0,S.rightClickHandler)(A,R.textarea,R.screenElement,R._selectionService,R.options.rightClickSelectsWord)})),t.isLinux&&this.register((0,e.addDisposableDomListener)(this.element,"auxclick",function(A){1===A.button&&(0,S.moveTextAreaUnderMouseCursor)(A,R.textarea,R.screenElement)}))},j.prototype._bindKeys=function(){var R=this;this.register((0,e.addDisposableDomListener)(this.textarea,"keyup",function(T){return R._keyUp(T)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"keydown",function(T){return R._keyDown(T)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"keypress",function(T){return R._keyPress(T)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionstart",function(){return R._compositionHelper.compositionstart()})),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionupdate",function(T){return R._compositionHelper.compositionupdate(T)})),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionend",function(){return R._compositionHelper.compositionend()})),this.register((0,e.addDisposableDomListener)(this.textarea,"input",function(T){return R._inputEvent(T)},!0)),this.register(this.onRender(function(){return R._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(T){return R._queueLinkification(T.start,T.end)}))},j.prototype.open=function(R){var T=this;if(!R)throw new Error("Terminal requires a parent element.");R.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=R.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),R.appendChild(this.element);var A=z.createDocumentFragment();this._viewportElement=z.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),A.appendChild(this._viewportElement),this._viewportScrollArea=z.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=z.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=z.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),A.appendChild(this.screenElement),this.textarea=z.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",r.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,e.addDisposableDomListener)(this.textarea,"focus",function(V){return T._onTextAreaFocus(V)})),this.register((0,e.addDisposableDomListener)(this.textarea,"blur",function(){return T._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var q=this._instantiationService.createInstance(x.CoreBrowserService,this.textarea);this._instantiationService.setService(L.ICoreBrowserService,q),this._charSizeService=this._instantiationService.createInstance(B.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(L.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new m.ColorManager(z,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(V){return T._colorManager.onOptionsChange(V)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(P.CharacterJoinerService),this._instantiationService.setService(L.ICharacterJoinerService,this._characterJoinerService);var K=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(E.RenderService,K,this.rows,this.screenElement)),this._instantiationService.setService(L.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(V){return T._onRender.fire(V)})),this.onResize(function(V){return T._renderService.resize(V.cols,V.rows)}),this._compositionView=z.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(f.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(A),this._soundService=this._instantiationService.createInstance(i.SoundService),this._instantiationService.setService(L.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(k.MouseService),this._instantiationService.setService(L.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(h.Viewport,function(V){return T.scrollLines(V,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return T.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){T._renderService.onCursorMove(),T._syncTextArea()})),this.register(this.onResize(function(){return T._renderService.onResize(T.cols,T.rows)})),this.register(this.onBlur(function(){return T._renderService.onBlur()})),this.register(this.onFocus(function(){return T._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return T.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(n.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(L.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(V){return T.scrollLines(V.amount,V.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return T._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(V){return T._renderService.onSelectionChanged(V.start,V.end,V.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(V){T.textarea.value=V,T.textarea.focus(),T.textarea.select()})),this.register(this._onScroll.event(function(V){T.viewport.syncScrollArea(),T._selectionService.refresh()})),this.register((0,e.addDisposableDomListener)(this._viewportElement,"scroll",function(){return T._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(c.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return T._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.decorationService.attachToDom(this.screenElement,this._renderService,this._bufferService),this.register((0,e.addDisposableDomListener)(this.element,"mousedown",function(V){return T._selectionService.onMouseDown(V)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new _.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},j.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(a.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(v.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},j.prototype._setTheme=function(R){var T,A,q;this._theme=R,null===(T=this._colorManager)||void 0===T||T.setTheme(R),null===(A=this._renderService)||void 0===A||A.setColors(this._colorManager.colors),null===(q=this.viewport)||void 0===q||q.onThemeChange(this._colorManager.colors)},j.prototype.bindMouse=function(){var R=this,T=this,A=this.element;function q(U){var Q,re,se=T._mouseService.getRawByteCoords(U,T.screenElement,T.cols,T.rows);if(!se)return!1;switch(U.overrideType||U.type){case"mousemove":re=32,void 0===U.buttons?(Q=3,void 0!==U.button&&(Q=U.button<3?U.button:3)):Q=1&U.buttons?0:4&U.buttons?1:2&U.buttons?2:3;break;case"mouseup":re=0,Q=U.button<3?U.button:3;break;case"mousedown":re=1,Q=U.button<3?U.button:3;break;case"wheel":0!==U.deltaY&&(re=U.deltaY<0?0:1),Q=4;break;default:return!1}return!(void 0===re||void 0===Q||Q>4)&&T.coreMouseService.triggerMouseEvent({col:se.x-33,row:se.y-33,button:Q,action:re,ctrl:U.ctrlKey,alt:U.altKey,shift:U.shiftKey})}var K={mouseup:null,wheel:null,mousedrag:null,mousemove:null},V=function(U){return q(U),U.buttons||(R._document.removeEventListener("mouseup",K.mouseup),K.mousedrag&&R._document.removeEventListener("mousemove",K.mousedrag)),R.cancel(U)},Y=function(U){return q(U),R.cancel(U,!0)},J=function(U){U.buttons&&q(U)},ne=function(U){U.buttons||q(U)};this.register(this.coreMouseService.onProtocolChange(function(U){U?("debug"===R.optionsService.rawOptions.logLevel&&R._logService.debug("Binding to mouse events:",R.coreMouseService.explainEvents(U)),R.element.classList.add("enable-mouse-events"),R._selectionService.disable()):(R._logService.debug("Unbinding from mouse events."),R.element.classList.remove("enable-mouse-events"),R._selectionService.enable()),8&U?K.mousemove||(A.addEventListener("mousemove",ne),K.mousemove=ne):(A.removeEventListener("mousemove",K.mousemove),K.mousemove=null),16&U?K.wheel||(A.addEventListener("wheel",Y,{passive:!1}),K.wheel=Y):(A.removeEventListener("wheel",K.wheel),K.wheel=null),2&U?K.mouseup||(K.mouseup=V):(R._document.removeEventListener("mouseup",K.mouseup),K.mouseup=null),4&U?K.mousedrag||(K.mousedrag=J):(R._document.removeEventListener("mousemove",K.mousedrag),K.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,e.addDisposableDomListener)(A,"mousedown",function(U){if(U.preventDefault(),R.focus(),R.coreMouseService.areMouseEventsActive&&!R._selectionService.shouldForceSelection(U))return q(U),K.mouseup&&R._document.addEventListener("mouseup",K.mouseup),K.mousedrag&&R._document.addEventListener("mousemove",K.mousedrag),R.cancel(U)})),this.register((0,e.addDisposableDomListener)(A,"wheel",function(U){if(!K.wheel){if(!R.buffer.hasScrollback){var Q=R.viewport.getLinesScrolled(U);if(0===Q)return;for(var re=p.C0.ESC+(R.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(U.deltaY<0?"A":"B"),se="",me=0;me<Math.abs(Q);me++)se+=re;return R.coreService.triggerDataEvent(se,!0),R.cancel(U,!0)}return R.viewport.onWheel(U)?R.cancel(U):void 0}},{passive:!1})),this.register((0,e.addDisposableDomListener)(A,"touchstart",function(U){if(!R.coreMouseService.areMouseEventsActive)return R.viewport.onTouchStart(U),R.cancel(U)},{passive:!0})),this.register((0,e.addDisposableDomListener)(A,"touchmove",function(U){if(!R.coreMouseService.areMouseEventsActive)return R.viewport.onTouchMove(U)?void 0:R.cancel(U)},{passive:!1}))},j.prototype.refresh=function(R,T){var A;null===(A=this._renderService)||void 0===A||A.refreshRows(R,T)},j.prototype._queueLinkification=function(R,T){var A;null===(A=this.linkifier)||void 0===A||A.linkifyRows(R,T)},j.prototype.updateCursorStyle=function(R){var T;(null===(T=this._selectionService)||void 0===T?void 0:T.shouldColumnSelect(R))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},j.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},j.prototype.scrollLines=function(R,T,A){void 0===A&&(A=0),M.prototype.scrollLines.call(this,R,T,A),this.refresh(0,this.rows-1)},j.prototype.paste=function(R){(0,S.paste)(R,this.textarea,this.coreService)},j.prototype.attachCustomKeyEventHandler=function(R){this._customKeyEventHandler=R},j.prototype.registerLinkMatcher=function(R,T,A){var q=this.linkifier.registerLinkMatcher(R,T,A);return this.refresh(0,this.rows-1),q},j.prototype.deregisterLinkMatcher=function(R){this.linkifier.deregisterLinkMatcher(R)&&this.refresh(0,this.rows-1)},j.prototype.registerLinkProvider=function(R){return this.linkifier2.registerLinkProvider(R)},j.prototype.registerCharacterJoiner=function(R){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var T=this._characterJoinerService.register(R);return this.refresh(0,this.rows-1),T},j.prototype.deregisterCharacterJoiner=function(R){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(R)&&this.refresh(0,this.rows-1)},Object.defineProperty(j.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),j.prototype.addMarker=function(R){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+R)},j.prototype.registerDecoration=function(R){return this.decorationService.registerDecoration(R)},j.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},j.prototype.select=function(R,T,A){this._selectionService.setSelection(R,T,A)},j.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},j.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},j.prototype.clearSelection=function(){var R;null===(R=this._selectionService)||void 0===R||R.clearSelection()},j.prototype.selectAll=function(){var R;null===(R=this._selectionService)||void 0===R||R.selectAll()},j.prototype.selectLines=function(R,T){var A;null===(A=this._selectionService)||void 0===A||A.selectLines(R,T)},j.prototype._keyDown=function(R){if(this._keyDownHandled=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(R))return!1;if(!this._compositionHelper.keydown(R))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;"Dead"!==R.key&&"AltGraph"!==R.key||(this._unprocessedDeadKey=!0);var T=(0,b.evaluateKeyboardEvent)(R,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(R),3===T.type||2===T.type){var A=this.rows-1;return this.scrollLines(2===T.type?-A:A),this.cancel(R,!0)}return 1===T.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,R)||(T.cancel&&this.cancel(R,!0),!T.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(T.key!==p.C0.ETX&&T.key!==p.C0.CR||(this.textarea.value=""),this._onKey.fire({key:T.key,domEvent:R}),this._showCursor(),this.coreService.triggerDataEvent(T.key,!0),this.optionsService.rawOptions.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(R,!0))))},j.prototype._isThirdLevelShift=function(R,T){var A=R.isMac&&!this.options.macOptionIsMeta&&T.altKey&&!T.ctrlKey&&!T.metaKey||R.isWindows&&T.altKey&&T.ctrlKey&&!T.metaKey||R.isWindows&&T.getModifierState("AltGraph");return"keypress"===T.type?A:A&&(!T.keyCode||T.keyCode>47)},j.prototype._keyUp=function(R){var T;this._customKeyEventHandler&&!1===this._customKeyEventHandler(R)||(16===(T=R).keyCode||17===T.keyCode||18===T.keyCode||this.focus(),this.updateCursorStyle(R),this._keyPressHandled=!1)},j.prototype._keyPress=function(R){var T;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&!1===this._customKeyEventHandler(R))return!1;if(this.cancel(R),R.charCode)T=R.charCode;else if(null==R.which)T=R.keyCode;else{if(0===R.which||0===R.charCode)return!1;T=R.which}return!(!T||(R.altKey||R.ctrlKey||R.metaKey)&&!this._isThirdLevelShift(this.browser,R)||(T=String.fromCharCode(T),this._onKey.fire({key:T,domEvent:R}),this._showCursor(),this.coreService.triggerDataEvent(T,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},j.prototype._inputEvent=function(R){return!(!R.data||"insertText"!==R.inputType||R.composed||this.optionsService.rawOptions.screenReaderMode||this._keyPressHandled||(this._unprocessedDeadKey=!1,this.coreService.triggerDataEvent(R.data,!0),this.cancel(R),0))},j.prototype.bell=function(){var R;this._soundBell()&&(null===(R=this._soundService)||void 0===R||R.playBellSound()),this._onBell.fire()},j.prototype.resize=function(R,T){R!==this.cols||T!==this.rows?M.prototype.resize.call(this,R,T):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},j.prototype._afterResize=function(R,T){var A,q;null===(A=this._charSizeService)||void 0===A||A.measure(),null===(q=this.viewport)||void 0===q||q.syncScrollArea(!0)},j.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.clearMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var R=1;R<this.rows;R++)this.buffer.lines.push(this.buffer.getBlankLine(g.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},j.prototype.reset=function(){var R,T;this.options.rows=this.rows,this.options.cols=this.cols;var A=this._customKeyEventHandler;this._setup(),M.prototype.reset.call(this),null===(R=this._selectionService)||void 0===R||R.reset(),this._customKeyEventHandler=A,this.refresh(0,this.rows-1),null===(T=this.viewport)||void 0===T||T.syncScrollArea()},j.prototype.clearTextureAtlas=function(){var R;null===(R=this._renderService)||void 0===R||R.clearTextureAtlas()},j.prototype._reportFocus=function(){var R;(null===(R=this.element)||void 0===R?void 0:R.classList.contains("focus"))?this.coreService.triggerDataEvent(p.C0.ESC+"[I"):this.coreService.triggerDataEvent(p.C0.ESC+"[O")},j.prototype._reportWindowsOptions=function(R){if(this._renderService)switch(R){case o.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var T=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),A=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(p.C0.ESC+"[4;"+A+";"+T+"t");break;case o.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var q=this._renderService.dimensions.scaledCellWidth.toFixed(0),K=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(p.C0.ESC+"[6;"+K+";"+q+"t")}},j.prototype.cancel=function(R,T){if(this.options.cancelEvents||T)return R.preventDefault(),R.stopPropagation(),!1},j.prototype._visualBell=function(){return!1},j.prototype._soundBell=function(){return"sound"===this.options.bellStyle},j}(O.CoreTerminal);s.Terminal=X},9924:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0;var y=function(){function l(d,f){void 0===f&&(f=1e3),this._renderCallback=d,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return l.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},l.prototype.refresh=function(d,f,h){var S=this;this._rowCount=h,d=void 0!==d?d:0,f=void 0!==f?f:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,d):d,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,f):f;var p=Date.now();if(p-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=p,this._innerRefresh();else if(!this._additionalRefreshRequested){var a=this._debounceThresholdMS-(p-this._lastRefreshMs);this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){S._lastRefreshMs=Date.now(),S._innerRefresh(),S._additionalRefreshRequested=!1,S._refreshTimeoutID=void 0},a)}},l.prototype._innerRefresh=function(){if(void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var d=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(d,f)}},l}();s.TimeBasedDebouncer=y},1680:function(W,s,y){var l,d=this&&this.__extends||(l=function(n,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}l(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(n,t,e,r){var i,c=arguments.length,_=c<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_=Reflect.decorate(n,t,e,r);else for(var v=n.length-1;v>=0;v--)(i=n[v])&&(_=(c<3?i(_):c>3?i(t,e,_):i(t,e))||_);return c>3&&_&&Object.defineProperty(t,e,_),_},h=this&&this.__param||function(n,t){return function(e,r){t(e,r,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;var S=y(844),p=y(3656),o=y(4725),a=y(2585),u=function(n){function t(e,r,i,c,_,v,b,C){var g=n.call(this)||this;return g._scrollLines=e,g._viewportElement=r,g._scrollArea=i,g._element=c,g._bufferService=_,g._optionsService=v,g._charSizeService=b,g._renderService=C,g.scrollBarWidth=0,g._currentRowHeight=0,g._currentScaledCellHeight=0,g._lastRecordedBufferLength=0,g._lastRecordedViewportHeight=0,g._lastRecordedBufferHeight=0,g._lastTouchY=0,g._lastScrollTop=0,g._lastHadScrollBar=!1,g._wheelPartialScroll=0,g._refreshAnimationFrame=null,g._ignoreNextScrollEvent=!1,g.scrollBarWidth=g._viewportElement.offsetWidth-g._scrollArea.offsetWidth||15,g._lastHadScrollBar=!0,g.register((0,p.addDisposableDomListener)(g._viewportElement,"scroll",g._onScroll.bind(g))),g._activeBuffer=g._bufferService.buffer,g.register(g._bufferService.buffers.onBufferActivate(function(m){return g._activeBuffer=m.activeBuffer})),g._renderDimensions=g._renderService.dimensions,g.register(g._renderService.onDimensionsChange(function(m){return g._renderDimensions=m})),setTimeout(function(){return g.syncScrollArea()},0),g}return d(t,n),t.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},t.prototype._refresh=function(e){var r=this;if(e)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return r._innerRefresh()}))},t.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var r=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==r&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=r),this.scrollBarWidth=0===this._optionsService.rawOptions.scrollback?0:this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0;var i=window.getComputedStyle(this._element),c=parseInt(i.paddingLeft)+parseInt(i.paddingRight);this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth+(this._lastHadScrollBar?c:0)).toString()+"px",this._refreshAnimationFrame=null},t.prototype.syncScrollArea=function(e){if(void 0===e&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.rawOptions.scrollback>0&&this._refresh(e):this._refresh(e)},t.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var r=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(r)}},t.prototype._bubbleScroll=function(e,r){return!(r<0&&0!==this._viewportElement.scrollTop||r>0&&this._viewportElement.scrollTop+this._lastRecordedViewportHeight<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},t.prototype.onWheel=function(e){var r=this._getPixelsScrolled(e);return 0!==r&&(this._viewportElement.scrollTop+=r,this._bubbleScroll(e,r))},t.prototype._getPixelsScrolled=function(e){if(0===e.deltaY||e.shiftKey)return 0;var r=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?r*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._currentRowHeight*this._bufferService.rows),r},t.prototype.getLinesScrolled=function(e){if(0===e.deltaY||e.shiftKey)return 0;var r=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(this._wheelPartialScroll+=r/=this._currentRowHeight+0,r=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._bufferService.rows),r},t.prototype._applyScrollModifier=function(e,r){var i=this._optionsService.rawOptions.fastScrollModifier;return"alt"===i&&r.altKey||"ctrl"===i&&r.ctrlKey||"shift"===i&&r.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity},t.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},t.prototype.onTouchMove=function(e){var r=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,0!==r&&(this._viewportElement.scrollTop+=r,this._bubbleScroll(e,r))},f([h(4,a.IBufferService),h(5,a.IOptionsService),h(6,o.ICharSizeService),h(7,o.IRenderService)],t)}(S.Disposable);s.Viewport=u},2950:function(W,s,y){var l=this&&this.__decorate||function(p,o,a,u){var n,t=arguments.length,e=t<3?o:null===u?u=Object.getOwnPropertyDescriptor(o,a):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(p,o,a,u);else for(var r=p.length-1;r>=0;r--)(n=p[r])&&(e=(t<3?n(e):t>3?n(o,a,e):n(o,a))||e);return t>3&&e&&Object.defineProperty(o,a,e),e},d=this&&this.__param||function(p,o){return function(a,u){o(a,u,p)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;var f=y(4725),h=y(2585),S=function(){function p(o,a,u,n,t,e){this._textarea=o,this._compositionView=a,this._bufferService=u,this._optionsService=n,this._coreService=t,this._renderService=e,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(p.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),p.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},p.prototype.compositionupdate=function(o){var a=this;this._compositionView.textContent=o.data,this.updateCompositionElements(),setTimeout(function(){a._compositionPosition.end=a._textarea.value.length},0)},p.prototype.compositionend=function(){this._finalizeComposition(!0)},p.prototype.keydown=function(o){if(this._isComposing||this._isSendingComposition){if(229===o.keyCode||16===o.keyCode||17===o.keyCode||18===o.keyCode)return!1;this._finalizeComposition(!1)}return 229!==o.keyCode||(this._handleAnyTextareaChanges(),!1)},p.prototype._finalizeComposition=function(o){var a=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,o){var u={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){var t;a._isSendingComposition&&(a._isSendingComposition=!1,u.start+=a._dataAlreadySent.length,(t=a._isComposing?a._textarea.value.substring(u.start,u.end):a._textarea.value.substring(u.start)).length>0&&a._coreService.triggerDataEvent(t,!0))},0)}else{this._isSendingComposition=!1;var n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}},p.prototype._handleAnyTextareaChanges=function(){var o=this,a=this._textarea.value;setTimeout(function(){if(!o._isComposing){var u=o._textarea.value.replace(a,"");u.length>0&&(o._dataAlreadySent=u,o._coreService.triggerDataEvent(u,!0))}},0)},p.prototype.updateCompositionElements=function(o){var a=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var u=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),n=this._renderService.dimensions.actualCellHeight,t=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,e=u*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=e+"px",this._compositionView.style.top=t+"px",this._compositionView.style.height=n+"px",this._compositionView.style.lineHeight=n+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var r=this._compositionView.getBoundingClientRect();this._textarea.style.left=e+"px",this._textarea.style.top=t+"px",this._textarea.style.width=Math.max(r.width,1)+"px",this._textarea.style.height=Math.max(r.height,1)+"px",this._textarea.style.lineHeight=r.height+"px"}o||setTimeout(function(){return a.updateCompositionElements(!0)},0)}},l([d(2,h.IBufferService),d(3,h.IOptionsService),d(4,h.ICoreService),d(5,f.IRenderService)],p)}();s.CompositionHelper=S},9806:(W,s)=>{function y(l,d){var f=d.getBoundingClientRect();return[l.clientX-f.left,l.clientY-f.top]}Object.defineProperty(s,"__esModule",{value:!0}),s.getRawByteCoords=s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=y,s.getCoords=function(l,d,f,h,S,p,o,a){if(S){var u=y(l,d);if(u)return u[0]=Math.ceil((u[0]+(a?p/2:0))/p),u[1]=Math.ceil(u[1]/o),u[0]=Math.min(Math.max(u[0],1),f+(a?1:0)),u[1]=Math.min(Math.max(u[1],1),h),u}},s.getRawByteCoords=function(l){if(l)return{x:l[0]+32,y:l[1]+32}}},9504:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;var l=y(2584);function d(a,u,n,t){var e=a-f(n,a),r=u-f(n,u);return o(Math.abs(e-r)-function(c,_,v){for(var b=0,C=c-f(v,c),g=_-f(v,_),m=0;m<Math.abs(C-g);m++){var E="A"===h(c,_)?-1:1,L=v.buffer.lines.get(C+E*m);(null==L?void 0:L.isWrapped)&&b++}return b}(a,u,n),p(h(a,u),t))}function f(a,u){for(var n=0,t=a.buffer.lines.get(u),e=null==t?void 0:t.isWrapped;e&&u>=0&&u<a.rows;)n++,e=null==(t=a.buffer.lines.get(--u))?void 0:t.isWrapped;return n}function h(a,u){return a>u?"A":"B"}function S(a,u,n,t,e,r){for(var i=a,c=u,_="";i!==n||c!==t;)i+=e?1:-1,e&&i>r.cols-1?(_+=r.buffer.translateBufferLineToString(c,!1,a,i),i=0,a=0,c++):!e&&i<0&&(_+=r.buffer.translateBufferLineToString(c,!1,0,a+1),a=i=r.cols-1,c--);return _+r.buffer.translateBufferLineToString(c,!1,a,i)}function p(a,u){return l.C0.ESC+(u?"O":"[")+a}function o(a,u){a=Math.floor(a);for(var n="",t=0;t<a;t++)n+=u;return n}s.moveToCellSequence=function(a,u,n,t){var e,_,v,g,m,r=n.buffer.x,i=n.buffer.y;if(!n.buffer.hasScrollback)return _=r,(0===d(v=i,u,g=n,m=t).length?"":o(S(_,v,_,v-f(g,v),!1,g).length,p("D",m)))+d(i,u,n,t)+function(_,v,b,C,g,m){var E;E=d(v,C,g,m).length>0?C-f(g,C):v;var k,w,x,O,D,F,L=C,B=(k=_,w=v,F=d(x=b,O=C,D=g,m).length>0?O-f(D,O):w,k<x&&F<=O||k>=x&&F<O?"C":"D");return o(S(_,E,b,L,"C"===B,g).length,p(B,m))}(r,i,a,u,n,t);if(i===u)return e=r>a?"D":"C",o(Math.abs(r-a),p(e,t));e=i>u?"D":"C";var c=Math.abs(i-u);return o(function(_,v){return v.cols-_}(i>u?a:r,n)+(c-1)*n.cols+1+((i>u?r:a)-1),p(e,t))}},4389:function(W,s,y){var l=this&&this.__assign||function(){return l=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n},l.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;var d=y(3236),f=y(9042),h=y(7975),S=y(7090),p=y(5741),o=y(8285),a=["cols","rows"],u=function(){function n(t){var e=this;this._core=new d.Terminal(t),this._addonManager=new p.AddonManager,this._publicOptions=l({},this._core.options);var r=function(v){return e._core.options[v]},i=function(v,b){e._checkReadonlyOptions(v),e._core.options[v]=b};for(var c in this._core.options){var _={get:r.bind(this,c),set:i.bind(this,c)};Object.defineProperty(this._publicOptions,c,_)}}return n.prototype._checkReadonlyOptions=function(t){if(a.includes(t))throw new Error('Option "'+t+'" can only be set in the constructor')},n.prototype._checkProposedApi=function(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(n.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new h.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"unicode",{get:function(){return this._checkProposedApi(),new S.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new o.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"modes",{get:function(){var t=this._core.coreService.decPrivateModes,e="none";switch(this._core.coreMouseService.activeProtocol){case"X10":e="x10";break;case"VT200":e="vt200";break;case"DRAG":e="drag";break;case"ANY":e="any"}return{applicationCursorKeysMode:t.applicationCursorKeys,applicationKeypadMode:t.applicationKeypad,bracketedPasteMode:t.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:e,originMode:t.origin,reverseWraparoundMode:t.reverseWraparound,sendFocusMode:t.sendFocus,wraparoundMode:t.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"options",{get:function(){return this._publicOptions},set:function(t){for(var e in t)this._publicOptions[e]=t[e]},enumerable:!1,configurable:!0}),n.prototype.blur=function(){this._core.blur()},n.prototype.focus=function(){this._core.focus()},n.prototype.resize=function(t,e){this._verifyIntegers(t,e),this._core.resize(t,e)},n.prototype.open=function(t){this._core.open(t)},n.prototype.attachCustomKeyEventHandler=function(t){this._core.attachCustomKeyEventHandler(t)},n.prototype.registerLinkMatcher=function(t,e,r){return this._checkProposedApi(),this._core.registerLinkMatcher(t,e,r)},n.prototype.deregisterLinkMatcher=function(t){this._checkProposedApi(),this._core.deregisterLinkMatcher(t)},n.prototype.registerLinkProvider=function(t){return this._checkProposedApi(),this._core.registerLinkProvider(t)},n.prototype.registerCharacterJoiner=function(t){return this._checkProposedApi(),this._core.registerCharacterJoiner(t)},n.prototype.deregisterCharacterJoiner=function(t){this._checkProposedApi(),this._core.deregisterCharacterJoiner(t)},n.prototype.registerMarker=function(t){return void 0===t&&(t=0),this._checkProposedApi(),this._verifyIntegers(t),this._core.addMarker(t)},n.prototype.registerDecoration=function(t){var e,r,i;return this._checkProposedApi(),this._verifyPositiveIntegers(null!==(e=t.x)&&void 0!==e?e:0,null!==(r=t.width)&&void 0!==r?r:0,null!==(i=t.height)&&void 0!==i?i:0),this._core.registerDecoration(t)},n.prototype.addMarker=function(t){return this.registerMarker(t)},n.prototype.hasSelection=function(){return this._core.hasSelection()},n.prototype.select=function(t,e,r){this._verifyIntegers(t,e,r),this._core.select(t,e,r)},n.prototype.getSelection=function(){return this._core.getSelection()},n.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},n.prototype.clearSelection=function(){this._core.clearSelection()},n.prototype.selectAll=function(){this._core.selectAll()},n.prototype.selectLines=function(t,e){this._verifyIntegers(t,e),this._core.selectLines(t,e)},n.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},n.prototype.scrollLines=function(t){this._verifyIntegers(t),this._core.scrollLines(t)},n.prototype.scrollPages=function(t){this._verifyIntegers(t),this._core.scrollPages(t)},n.prototype.scrollToTop=function(){this._core.scrollToTop()},n.prototype.scrollToBottom=function(){this._core.scrollToBottom()},n.prototype.scrollToLine=function(t){this._verifyIntegers(t),this._core.scrollToLine(t)},n.prototype.clear=function(){this._core.clear()},n.prototype.write=function(t,e){this._core.write(t,e)},n.prototype.writeUtf8=function(t,e){this._core.write(t,e)},n.prototype.writeln=function(t,e){this._core.write(t),this._core.write("\r\n",e)},n.prototype.paste=function(t){this._core.paste(t)},n.prototype.getOption=function(t){return this._core.optionsService.getOption(t)},n.prototype.setOption=function(t,e){this._checkReadonlyOptions(t),this._core.optionsService.setOption(t,e)},n.prototype.refresh=function(t,e){this._verifyIntegers(t,e),this._core.refresh(t,e)},n.prototype.reset=function(){this._core.reset()},n.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},n.prototype.loadAddon=function(t){return this._addonManager.loadAddon(this,t)},Object.defineProperty(n,"strings",{get:function(){return f},enumerable:!1,configurable:!0}),n.prototype._verifyIntegers=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0,i=t;r<i.length;r++){var c=i[r];if(c===1/0||isNaN(c)||c%1!=0)throw new Error("This API only accepts integers")}},n.prototype._verifyPositiveIntegers=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0,i=t;r<i.length;r++){var c=i[r];if(c&&(c===1/0||isNaN(c)||c%1!=0||c<0))throw new Error("This API only accepts positive integers")}},n}();s.Terminal=u},1546:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseRenderLayer=void 0;var l=y(643),d=y(8803),f=y(1420),h=y(3734),S=y(1752),p=y(4774),o=y(9631),a=y(8978),u=function(){function n(t,e,r,i,c,_,v,b){this._container=t,this._alpha=i,this._colors=c,this._rendererId=_,this._bufferService=v,this._optionsService=b,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+e+"-layer"),this._canvas.style.zIndex=r.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return n.prototype.dispose=function(){var t;(0,o.removeElementFromParent)(this._canvas),null===(t=this._charAtlas)||void 0===t||t.dispose()},n.prototype._initCanvas=function(){this._ctx=(0,S.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},n.prototype.onOptionsChanged=function(){},n.prototype.onBlur=function(){},n.prototype.onFocus=function(){},n.prototype.onCursorMove=function(){},n.prototype.onGridChanged=function(t,e){},n.prototype.onSelectionChanged=function(t,e,r){void 0===r&&(r=!1)},n.prototype.setColors=function(t){this._refreshCharAtlas(t)},n.prototype._setTransparency=function(t){if(t!==this._alpha){var e=this._canvas;this._alpha=t,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,e),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},n.prototype._refreshCharAtlas=function(t){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,f.acquireCharAtlas)(this._optionsService.rawOptions,this._rendererId,t,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},n.prototype.resize=function(t){this._scaledCellWidth=t.scaledCellWidth,this._scaledCellHeight=t.scaledCellHeight,this._scaledCharWidth=t.scaledCharWidth,this._scaledCharHeight=t.scaledCharHeight,this._scaledCharLeft=t.scaledCharLeft,this._scaledCharTop=t.scaledCharTop,this._canvas.width=t.scaledCanvasWidth,this._canvas.height=t.scaledCanvasHeight,this._canvas.style.width=t.canvasWidth+"px",this._canvas.style.height=t.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},n.prototype.clearTextureAtlas=function(){var t;null===(t=this._charAtlas)||void 0===t||t.clear()},n.prototype._fillCells=function(t,e,r,i){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,r*this._scaledCellWidth,i*this._scaledCellHeight)},n.prototype._fillMiddleLineAtCells=function(t,e,r){void 0===r&&(r=1);var i=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(t*this._scaledCellWidth,(e+1)*this._scaledCellHeight-i-window.devicePixelRatio,r*this._scaledCellWidth,window.devicePixelRatio)},n.prototype._fillBottomLineAtCells=function(t,e,r){void 0===r&&(r=1),this._ctx.fillRect(t*this._scaledCellWidth,(e+1)*this._scaledCellHeight-window.devicePixelRatio-1,r*this._scaledCellWidth,window.devicePixelRatio)},n.prototype._fillLeftLineAtCell=function(t,e,r){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,window.devicePixelRatio*r,this._scaledCellHeight)},n.prototype._strokeRectAtCell=function(t,e,r,i){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(t*this._scaledCellWidth+window.devicePixelRatio/2,e*this._scaledCellHeight+window.devicePixelRatio/2,r*this._scaledCellWidth-window.devicePixelRatio,i*this._scaledCellHeight-window.devicePixelRatio)},n.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},n.prototype._clearCells=function(t,e,r,i){this._alpha?this._ctx.clearRect(t*this._scaledCellWidth,e*this._scaledCellHeight,r*this._scaledCellWidth,i*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,r*this._scaledCellWidth,i*this._scaledCellHeight))},n.prototype._fillCharTrueColor=function(t,e,r){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=d.TEXT_BASELINE,this._clipRow(r);var i=!1;!1!==this._optionsService.rawOptions.customGlyphs&&(i=(0,a.tryDrawCustomChar)(this._ctx,t.getChars(),e*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),i||this._ctx.fillText(t.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},n.prototype._drawChars=function(t,e,r){var i,c,_,v=this._getContrastColor(t);v||t.isFgRGB()||t.isBgRGB()?this._drawUncachedChars(t,e,r,v):(t.isInverse()?(c=t.isBgDefault()?d.INVERTED_DEFAULT_COLOR:t.getBgColor(),_=t.isFgDefault()?d.INVERTED_DEFAULT_COLOR:t.getFgColor()):(_=t.isBgDefault()?l.DEFAULT_COLOR:t.getBgColor(),c=t.isFgDefault()?l.DEFAULT_COLOR:t.getFgColor()),c+=this._optionsService.rawOptions.drawBoldTextInBrightColors&&t.isBold()&&c<8?8:0,this._currentGlyphIdentifier.chars=t.getChars()||l.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=t.getCode()||l.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=_,this._currentGlyphIdentifier.fg=c,this._currentGlyphIdentifier.bold=!!t.isBold(),this._currentGlyphIdentifier.dim=!!t.isDim(),this._currentGlyphIdentifier.italic=!!t.isItalic(),(null===(i=this._charAtlas)||void 0===i?void 0:i.draw(this._ctx,this._currentGlyphIdentifier,e*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(t,e,r))},n.prototype._drawUncachedChars=function(t,e,r,i){if(this._ctx.save(),this._ctx.font=this._getFont(!!t.isBold(),!!t.isItalic()),this._ctx.textBaseline=d.TEXT_BASELINE,t.isInverse())if(i)this._ctx.fillStyle=i.css;else if(t.isBgDefault())this._ctx.fillStyle=p.color.opaque(this._colors.background).css;else if(t.isBgRGB())this._ctx.fillStyle="rgb("+h.AttributeData.toColorRGB(t.getBgColor()).join(",")+")";else{var c=t.getBgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&t.isBold()&&c<8&&(c+=8),this._ctx.fillStyle=this._colors.ansi[c].css}else if(i)this._ctx.fillStyle=i.css;else if(t.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(t.isFgRGB())this._ctx.fillStyle="rgb("+h.AttributeData.toColorRGB(t.getFgColor()).join(",")+")";else{var _=t.getFgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&t.isBold()&&_<8&&(_+=8),this._ctx.fillStyle=this._colors.ansi[_].css}this._clipRow(r),t.isDim()&&(this._ctx.globalAlpha=d.DIM_OPACITY);var v=!1;!1!==this._optionsService.rawOptions.customGlyphs&&(v=(0,a.tryDrawCustomChar)(this._ctx,t.getChars(),e*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),v||this._ctx.fillText(t.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},n.prototype._clipRow=function(t){this._ctx.beginPath(),this._ctx.rect(0,t*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},n.prototype._getFont=function(t,e){return(e?"italic":"")+" "+(t?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight)+" "+this._optionsService.rawOptions.fontSize*window.devicePixelRatio+"px "+this._optionsService.rawOptions.fontFamily},n.prototype._getContrastColor=function(t){if(1!==this._optionsService.rawOptions.minimumContrastRatio){var e=this._colors.contrastCache.getColor(t.bg,t.fg);if(void 0!==e)return e||void 0;var r=t.getFgColor(),i=t.getFgColorMode(),c=t.getBgColor(),_=t.getBgColorMode(),v=!!t.isInverse(),b=!!t.isInverse();if(v){var C=r;r=c,c=C;var g=i;i=_,_=g}var m=this._resolveBackgroundRgba(_,c,v),E=this._resolveForegroundRgba(i,r,v,b),L=p.rgba.ensureContrastRatio(m,E,this._optionsService.rawOptions.minimumContrastRatio);if(L){var B={css:p.channels.toCss(L>>24&255,L>>16&255,L>>8&255),rgba:L};return this._colors.contrastCache.setColor(t.bg,t.fg,B),B}this._colors.contrastCache.setColor(t.bg,t.fg,null)}},n.prototype._resolveBackgroundRgba=function(t,e,r){switch(t){case 16777216:case 33554432:return this._colors.ansi[e].rgba;case 50331648:return e<<8;default:return r?this._colors.foreground.rgba:this._colors.background.rgba}},n.prototype._resolveForegroundRgba=function(t,e,r,i){switch(t){case 16777216:case 33554432:return this._optionsService.rawOptions.drawBoldTextInBrightColors&&i&&e<8&&(e+=8),this._colors.ansi[e].rgba;case 50331648:return e<<8;default:return r?this._colors.background.rgba:this._colors.foreground.rgba}},n}();s.BaseRenderLayer=u},2512:function(W,s,y){var l,d=this&&this.__extends||(l=function(e,r){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var _ in c)Object.prototype.hasOwnProperty.call(c,_)&&(i[_]=c[_])})(e,r)},function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}l(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}),f=this&&this.__decorate||function(e,r,i,c){var _,v=arguments.length,b=v<3?r:null===c?c=Object.getOwnPropertyDescriptor(r,i):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(e,r,i,c);else for(var C=e.length-1;C>=0;C--)(_=e[C])&&(b=(v<3?_(b):v>3?_(r,i,b):_(r,i))||b);return v>3&&b&&Object.defineProperty(r,i,b),b},h=this&&this.__param||function(e,r){return function(i,c){r(i,c,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CursorRenderLayer=void 0;var S=y(1546),p=y(511),o=y(2585),a=y(4725),u=600,n=function(e){function r(i,c,_,v,b,C,g,m,E){var L=e.call(this,i,"cursor",c,!0,_,v,C,g)||this;return L._onRequestRedraw=b,L._coreService=m,L._coreBrowserService=E,L._cell=new p.CellData,L._state={x:0,y:0,isFocused:!1,style:"",width:0},L._cursorRenderers={bar:L._renderBarCursor.bind(L),block:L._renderBlockCursor.bind(L),underline:L._renderUnderlineCursor.bind(L)},L}return d(r,e),r.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),e.prototype.dispose.call(this)},r.prototype.resize=function(i){e.prototype.resize.call(this,i),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},r.prototype.reset=function(){var i;this._clearCursor(),null===(i=this._cursorBlinkStateManager)||void 0===i||i.restartBlinkAnimation(),this.onOptionsChanged()},r.prototype.onBlur=function(){var i;null===(i=this._cursorBlinkStateManager)||void 0===i||i.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onFocus=function(){var i;null===(i=this._cursorBlinkStateManager)||void 0===i||i.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onOptionsChanged=function(){var i,c=this;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new t(this._coreBrowserService.isFocused,function(){c._render(!0)})):(null===(i=this._cursorBlinkStateManager)||void 0===i||i.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onCursorMove=function(){var i;null===(i=this._cursorBlinkStateManager)||void 0===i||i.restartBlinkAnimation()},r.prototype.onGridChanged=function(i,c){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},r.prototype._render=function(i){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var c=this._bufferService.buffer.ybase+this._bufferService.buffer.y,_=c-this._bufferService.buffer.ydisp;if(_<0||_>=this._bufferService.rows)this._clearCursor();else{var v=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(c).loadCell(v,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var b=this._optionsService.rawOptions.cursorStyle;return b&&"block"!==b?this._cursorRenderers[b](v,_,this._cell):this._renderBlurCursor(v,_,this._cell),this._ctx.restore(),this._state.x=v,this._state.y=_,this._state.isFocused=!1,this._state.style=b,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===v&&this._state.y===_&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](v,_,this._cell),this._ctx.restore(),this._state.x=v,this._state.y=_,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},r.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},r.prototype._renderBarCursor=function(i,c,_){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(i,c,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()},r.prototype._renderBlockCursor=function(i,c,_){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(i,c,_.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(_,i,c),this._ctx.restore()},r.prototype._renderUnderlineCursor=function(i,c,_){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(i,c),this._ctx.restore()},r.prototype._renderBlurCursor=function(i,c,_){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(i,c,_.getWidth(),1),this._ctx.restore()},f([h(5,o.IBufferService),h(6,o.IOptionsService),h(7,o.ICoreService),h(8,a.ICoreBrowserService)],r)}(S.BaseRenderLayer);s.CursorRenderLayer=n;var t=function(){function e(r,i){this._renderCallback=i,this.isCursorVisible=!0,r&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var r=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){r._renderCallback(),r._animationFrame=void 0})))},e.prototype._restartInterval=function(r){var i=this;void 0===r&&(r=u),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(i._animationTimeRestarted){var c=u-(Date.now()-i._animationTimeRestarted);if(i._animationTimeRestarted=void 0,c>0)return void i._restartInterval(c)}i.isCursorVisible=!1,i._animationFrame=window.requestAnimationFrame(function(){i._renderCallback(),i._animationFrame=void 0}),i._blinkInterval=window.setInterval(function(){if(i._animationTimeRestarted){var _=u-(Date.now()-i._animationTimeRestarted);return i._animationTimeRestarted=void 0,void i._restartInterval(_)}i.isCursorVisible=!i.isCursorVisible,i._animationFrame=window.requestAnimationFrame(function(){i._renderCallback(),i._animationFrame=void 0})},u)},r)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},8978:(W,s,y)=>{var l,d,f,h,S,p,o,a,u,n,t,e,r,i,c,_,v,b,C,g,m,E,L,B,k,w,x,O,D,P,F,N,z,X,M,j,R,T,A,q,K,V,Y,J,ne,U,Q,re,se,me,xt,Mt,kt,At,Rt,Ot,Tt,Dt,Bt,Pt,It,Ht,Ae,Re,Oe,Te,De,Be,Pe,Ie,He,Fe,je,We,Ue,qe,Ne,ze,Ke,Ve,Ge,Xe,Ye,Je,Ze,$e,Qe,et,tt,rt,it,nt,ot,st,at,ct,lt,ht,ut,ft,_t,dt,pt,vt,gt,yt,mt,St,Ct,bt,wt,Lt,Ft,jt,Wt,Ut,qt,Nt,zt,Kt,Vt,Gt,Xt,Yt,Jt,Zt,$t,Qt;Object.defineProperty(s,"__esModule",{value:!0}),s.tryDrawCustomChar=s.boxDrawingDefinitions=s.blockElementDefinitions=void 0;var rr=y(1752);s.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258a":[{x:0,y:0,w:6,h:8}],"\u258b":[{x:0,y:0,w:5,h:8}],"\u258c":[{x:0,y:0,w:4,h:8}],"\u258d":[{x:0,y:0,w:3,h:8}],"\u258e":[{x:0,y:0,w:2,h:8}],"\u258f":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259a":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259b":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259c":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259d":[{x:4,y:0,w:4,h:4}],"\u259e":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259f":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1fb70}":[{x:1,y:0,w:1,h:8}],"\u{1fb71}":[{x:2,y:0,w:1,h:8}],"\u{1fb72}":[{x:3,y:0,w:1,h:8}],"\u{1fb73}":[{x:4,y:0,w:1,h:8}],"\u{1fb74}":[{x:5,y:0,w:1,h:8}],"\u{1fb75}":[{x:6,y:0,w:1,h:8}],"\u{1fb76}":[{x:0,y:1,w:8,h:1}],"\u{1fb77}":[{x:0,y:2,w:8,h:1}],"\u{1fb78}":[{x:0,y:3,w:8,h:1}],"\u{1fb79}":[{x:0,y:4,w:8,h:1}],"\u{1fb7a}":[{x:0,y:5,w:8,h:1}],"\u{1fb7b}":[{x:0,y:6,w:8,h:1}],"\u{1fb7c}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1fb7d}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1fb7e}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1fb7f}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1fb80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1fb81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1fb82}":[{x:0,y:0,w:8,h:2}],"\u{1fb83}":[{x:0,y:0,w:8,h:3}],"\u{1fb84}":[{x:0,y:0,w:8,h:5}],"\u{1fb85}":[{x:0,y:0,w:8,h:6}],"\u{1fb86}":[{x:0,y:0,w:8,h:7}],"\u{1fb87}":[{x:6,y:0,w:2,h:8}],"\u{1fb88}":[{x:5,y:0,w:3,h:8}],"\u{1fb89}":[{x:3,y:0,w:5,h:8}],"\u{1fb8a}":[{x:2,y:0,w:6,h:8}],"\u{1fb8b}":[{x:1,y:0,w:7,h:8}],"\u{1fb95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1fb96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1fb97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var or={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};s.boxDrawingDefinitions={"\u2500":(l={},l[1]="M0,.5 L1,.5",l),"\u2501":(d={},d[3]="M0,.5 L1,.5",d),"\u2502":(f={},f[1]="M.5,0 L.5,1",f),"\u2503":(h={},h[3]="M.5,0 L.5,1",h),"\u250c":(S={},S[1]="M0.5,1 L.5,.5 L1,.5",S),"\u250f":(p={},p[3]="M0.5,1 L.5,.5 L1,.5",p),"\u2510":(o={},o[1]="M0,.5 L.5,.5 L.5,1",o),"\u2513":(a={},a[3]="M0,.5 L.5,.5 L.5,1",a),"\u2514":(u={},u[1]="M.5,0 L.5,.5 L1,.5",u),"\u2517":(n={},n[3]="M.5,0 L.5,.5 L1,.5",n),"\u2518":(t={},t[1]="M.5,0 L.5,.5 L0,.5",t),"\u251b":(e={},e[3]="M.5,0 L.5,.5 L0,.5",e),"\u251c":(r={},r[1]="M.5,0 L.5,1 M.5,.5 L1,.5",r),"\u2523":(i={},i[3]="M.5,0 L.5,1 M.5,.5 L1,.5",i),"\u2524":(c={},c[1]="M.5,0 L.5,1 M.5,.5 L0,.5",c),"\u252b":(_={},_[3]="M.5,0 L.5,1 M.5,.5 L0,.5",_),"\u252c":(v={},v[1]="M0,.5 L1,.5 M.5,.5 L.5,1",v),"\u2533":(b={},b[3]="M0,.5 L1,.5 M.5,.5 L.5,1",b),"\u2534":(C={},C[1]="M0,.5 L1,.5 M.5,.5 L.5,0",C),"\u253b":(g={},g[3]="M0,.5 L1,.5 M.5,.5 L.5,0",g),"\u253c":(m={},m[1]="M0,.5 L1,.5 M.5,0 L.5,1",m),"\u254b":(E={},E[3]="M0,.5 L1,.5 M.5,0 L.5,1",E),"\u2574":(L={},L[1]="M.5,.5 L0,.5",L),"\u2578":(B={},B[3]="M.5,.5 L0,.5",B),"\u2575":(k={},k[1]="M.5,.5 L.5,0",k),"\u2579":(w={},w[3]="M.5,.5 L.5,0",w),"\u2576":(x={},x[1]="M.5,.5 L1,.5",x),"\u257a":(O={},O[3]="M.5,.5 L1,.5",O),"\u2577":(D={},D[1]="M.5,.5 L.5,1",D),"\u257b":(P={},P[3]="M.5,.5 L.5,1",P),"\u2550":(F={},F[1]=function(H,I){return"M0,"+(.5-I)+" L1,"+(.5-I)+" M0,"+(.5+I)+" L1,"+(.5+I)},F),"\u2551":(N={},N[1]=function(H,I){return"M"+(.5-H)+",0 L"+(.5-H)+",1 M"+(.5+H)+",0 L"+(.5+H)+",1"},N),"\u2552":(z={},z[1]=function(H,I){return"M.5,1 L.5,"+(.5-I)+" L1,"+(.5-I)+" M.5,"+(.5+I)+" L1,"+(.5+I)},z),"\u2553":(X={},X[1]=function(H,I){return"M"+(.5-H)+",1 L"+(.5-H)+",.5 L1,.5 M"+(.5+H)+",.5 L"+(.5+H)+",1"},X),"\u2554":(M={},M[1]=function(H,I){return"M1,"+(.5-I)+" L"+(.5-H)+","+(.5-I)+" L"+(.5-H)+",1 M1,"+(.5+I)+" L"+(.5+H)+","+(.5+I)+" L"+(.5+H)+",1"},M),"\u2555":(j={},j[1]=function(H,I){return"M0,"+(.5-I)+" L.5,"+(.5-I)+" L.5,1 M0,"+(.5+I)+" L.5,"+(.5+I)},j),"\u2556":(R={},R[1]=function(H,I){return"M"+(.5+H)+",1 L"+(.5+H)+",.5 L0,.5 M"+(.5-H)+",.5 L"+(.5-H)+",1"},R),"\u2557":(T={},T[1]=function(H,I){return"M0,"+(.5+I)+" L"+(.5-H)+","+(.5+I)+" L"+(.5-H)+",1 M0,"+(.5-I)+" L"+(.5+H)+","+(.5-I)+" L"+(.5+H)+",1"},T),"\u2558":(A={},A[1]=function(H,I){return"M.5,0 L.5,"+(.5+I)+" L1,"+(.5+I)+" M.5,"+(.5-I)+" L1,"+(.5-I)},A),"\u2559":(q={},q[1]=function(H,I){return"M1,.5 L"+(.5-H)+",.5 L"+(.5-H)+",0 M"+(.5+H)+",.5 L"+(.5+H)+",0"},q),"\u255a":(K={},K[1]=function(H,I){return"M1,"+(.5-I)+" L"+(.5+H)+","+(.5-I)+" L"+(.5+H)+",0 M1,"+(.5+I)+" L"+(.5-H)+","+(.5+I)+" L"+(.5-H)+",0"},K),"\u255b":(V={},V[1]=function(H,I){return"M0,"+(.5+I)+" L.5,"+(.5+I)+" L.5,0 M0,"+(.5-I)+" L.5,"+(.5-I)},V),"\u255c":(Y={},Y[1]=function(H,I){return"M0,.5 L"+(.5+H)+",.5 L"+(.5+H)+",0 M"+(.5-H)+",.5 L"+(.5-H)+",0"},Y),"\u255d":(J={},J[1]=function(H,I){return"M0,"+(.5-I)+" L"+(.5-H)+","+(.5-I)+" L"+(.5-H)+",0 M0,"+(.5+I)+" L"+(.5+H)+","+(.5+I)+" L"+(.5+H)+",0"},J),"\u255e":(ne={},ne[1]=function(H,I){return"M.5,0 L.5,1 M.5,"+(.5-I)+" L1,"+(.5-I)+" M.5,"+(.5+I)+" L1,"+(.5+I)},ne),"\u255f":(U={},U[1]=function(H,I){return"M"+(.5-H)+",0 L"+(.5-H)+",1 M"+(.5+H)+",0 L"+(.5+H)+",1 M"+(.5+H)+",.5 L1,.5"},U),"\u2560":(Q={},Q[1]=function(H,I){return"M"+(.5-H)+",0 L"+(.5-H)+",1 M1,"+(.5+I)+" L"+(.5+H)+","+(.5+I)+" L"+(.5+H)+",1 M1,"+(.5-I)+" L"+(.5+H)+","+(.5-I)+" L"+(.5+H)+",0"},Q),"\u2561":(re={},re[1]=function(H,I){return"M.5,0 L.5,1 M0,"+(.5-I)+" L.5,"+(.5-I)+" M0,"+(.5+I)+" L.5,"+(.5+I)},re),"\u2562":(se={},se[1]=function(H,I){return"M0,.5 L"+(.5-H)+",.5 M"+(.5-H)+",0 L"+(.5-H)+",1 M"+(.5+H)+",0 L"+(.5+H)+",1"},se),"\u2563":(me={},me[1]=function(H,I){return"M"+(.5+H)+",0 L"+(.5+H)+",1 M0,"+(.5+I)+" L"+(.5-H)+","+(.5+I)+" L"+(.5-H)+",1 M0,"+(.5-I)+" L"+(.5-H)+","+(.5-I)+" L"+(.5-H)+",0"},me),"\u2564":(xt={},xt[1]=function(H,I){return"M0,"+(.5-I)+" L1,"+(.5-I)+" M0,"+(.5+I)+" L1,"+(.5+I)+" M.5,"+(.5+I)+" L.5,1"},xt),"\u2565":(Mt={},Mt[1]=function(H,I){return"M0,.5 L1,.5 M"+(.5-H)+",.5 L"+(.5-H)+",1 M"+(.5+H)+",.5 L"+(.5+H)+",1"},Mt),"\u2566":(kt={},kt[1]=function(H,I){return"M0,"+(.5-I)+" L1,"+(.5-I)+" M0,"+(.5+I)+" L"+(.5-H)+","+(.5+I)+" L"+(.5-H)+",1 M1,"+(.5+I)+" L"+(.5+H)+","+(.5+I)+" L"+(.5+H)+",1"},kt),"\u2567":(At={},At[1]=function(H,I){return"M.5,0 L.5,"+(.5-I)+" M0,"+(.5-I)+" L1,"+(.5-I)+" M0,"+(.5+I)+" L1,"+(.5+I)},At),"\u2568":(Rt={},Rt[1]=function(H,I){return"M0,.5 L1,.5 M"+(.5-H)+",.5 L"+(.5-H)+",0 M"+(.5+H)+",.5 L"+(.5+H)+",0"},Rt),"\u2569":(Ot={},Ot[1]=function(H,I){return"M0,"+(.5+I)+" L1,"+(.5+I)+" M0,"+(.5-I)+" L"+(.5-H)+","+(.5-I)+" L"+(.5-H)+",0 M1,"+(.5-I)+" L"+(.5+H)+","+(.5-I)+" L"+(.5+H)+",0"},Ot),"\u256a":(Tt={},Tt[1]=function(H,I){return"M.5,0 L.5,1 M0,"+(.5-I)+" L1,"+(.5-I)+" M0,"+(.5+I)+" L1,"+(.5+I)},Tt),"\u256b":(Dt={},Dt[1]=function(H,I){return"M0,.5 L1,.5 M"+(.5-H)+",0 L"+(.5-H)+",1 M"+(.5+H)+",0 L"+(.5+H)+",1"},Dt),"\u256c":(Bt={},Bt[1]=function(H,I){return"M0,"+(.5+I)+" L"+(.5-H)+","+(.5+I)+" L"+(.5-H)+",1 M1,"+(.5+I)+" L"+(.5+H)+","+(.5+I)+" L"+(.5+H)+",1 M0,"+(.5-I)+" L"+(.5-H)+","+(.5-I)+" L"+(.5-H)+",0 M1,"+(.5-I)+" L"+(.5+H)+","+(.5-I)+" L"+(.5+H)+",0"},Bt),"\u2571":(Pt={},Pt[1]="M1,0 L0,1",Pt),"\u2572":(It={},It[1]="M0,0 L1,1",It),"\u2573":(Ht={},Ht[1]="M1,0 L0,1 M0,0 L1,1",Ht),"\u257c":(Ae={},Ae[1]="M.5,.5 L0,.5",Ae[3]="M.5,.5 L1,.5",Ae),"\u257d":(Re={},Re[1]="M.5,.5 L.5,0",Re[3]="M.5,.5 L.5,1",Re),"\u257e":(Oe={},Oe[1]="M.5,.5 L1,.5",Oe[3]="M.5,.5 L0,.5",Oe),"\u257f":(Te={},Te[1]="M.5,.5 L.5,1",Te[3]="M.5,.5 L.5,0",Te),"\u250d":(De={},De[1]="M.5,.5 L.5,1",De[3]="M.5,.5 L1,.5",De),"\u250e":(Be={},Be[1]="M.5,.5 L1,.5",Be[3]="M.5,.5 L.5,1",Be),"\u2511":(Pe={},Pe[1]="M.5,.5 L.5,1",Pe[3]="M.5,.5 L0,.5",Pe),"\u2512":(Ie={},Ie[1]="M.5,.5 L0,.5",Ie[3]="M.5,.5 L.5,1",Ie),"\u2515":(He={},He[1]="M.5,.5 L.5,0",He[3]="M.5,.5 L1,.5",He),"\u2516":(Fe={},Fe[1]="M.5,.5 L1,.5",Fe[3]="M.5,.5 L.5,0",Fe),"\u2519":(je={},je[1]="M.5,.5 L.5,0",je[3]="M.5,.5 L0,.5",je),"\u251a":(We={},We[1]="M.5,.5 L0,.5",We[3]="M.5,.5 L.5,0",We),"\u251d":(Ue={},Ue[1]="M.5,0 L.5,1",Ue[3]="M.5,.5 L1,.5",Ue),"\u251e":(qe={},qe[1]="M0.5,1 L.5,.5 L1,.5",qe[3]="M.5,.5 L.5,0",qe),"\u251f":(Ne={},Ne[1]="M.5,0 L.5,.5 L1,.5",Ne[3]="M.5,.5 L.5,1",Ne),"\u2520":(ze={},ze[1]="M.5,.5 L1,.5",ze[3]="M.5,0 L.5,1",ze),"\u2521":(Ke={},Ke[1]="M.5,.5 L.5,1",Ke[3]="M.5,0 L.5,.5 L1,.5",Ke),"\u2522":(Ve={},Ve[1]="M.5,.5 L.5,0",Ve[3]="M0.5,1 L.5,.5 L1,.5",Ve),"\u2525":(Ge={},Ge[1]="M.5,0 L.5,1",Ge[3]="M.5,.5 L0,.5",Ge),"\u2526":(Xe={},Xe[1]="M0,.5 L.5,.5 L.5,1",Xe[3]="M.5,.5 L.5,0",Xe),"\u2527":(Ye={},Ye[1]="M.5,0 L.5,.5 L0,.5",Ye[3]="M.5,.5 L.5,1",Ye),"\u2528":(Je={},Je[1]="M.5,.5 L0,.5",Je[3]="M.5,0 L.5,1",Je),"\u2529":(Ze={},Ze[1]="M.5,.5 L.5,1",Ze[3]="M.5,0 L.5,.5 L0,.5",Ze),"\u252a":($e={},$e[1]="M.5,.5 L.5,0",$e[3]="M0,.5 L.5,.5 L.5,1",$e),"\u252d":(Qe={},Qe[1]="M0.5,1 L.5,.5 L1,.5",Qe[3]="M.5,.5 L0,.5",Qe),"\u252e":(et={},et[1]="M0,.5 L.5,.5 L.5,1",et[3]="M.5,.5 L1,.5",et),"\u252f":(tt={},tt[1]="M.5,.5 L.5,1",tt[3]="M0,.5 L1,.5",tt),"\u2530":(rt={},rt[1]="M0,.5 L1,.5",rt[3]="M.5,.5 L.5,1",rt),"\u2531":(it={},it[1]="M.5,.5 L1,.5",it[3]="M0,.5 L.5,.5 L.5,1",it),"\u2532":(nt={},nt[1]="M.5,.5 L0,.5",nt[3]="M0.5,1 L.5,.5 L1,.5",nt),"\u2535":(ot={},ot[1]="M.5,0 L.5,.5 L1,.5",ot[3]="M.5,.5 L0,.5",ot),"\u2536":(st={},st[1]="M.5,0 L.5,.5 L0,.5",st[3]="M.5,.5 L1,.5",st),"\u2537":(at={},at[1]="M.5,.5 L.5,0",at[3]="M0,.5 L1,.5",at),"\u2538":(ct={},ct[1]="M0,.5 L1,.5",ct[3]="M.5,.5 L.5,0",ct),"\u2539":(lt={},lt[1]="M.5,.5 L1,.5",lt[3]="M.5,0 L.5,.5 L0,.5",lt),"\u253a":(ht={},ht[1]="M.5,.5 L0,.5",ht[3]="M.5,0 L.5,.5 L1,.5",ht),"\u253d":(ut={},ut[1]="M.5,0 L.5,1 M.5,.5 L1,.5",ut[3]="M.5,.5 L0,.5",ut),"\u253e":(ft={},ft[1]="M.5,0 L.5,1 M.5,.5 L0,.5",ft[3]="M.5,.5 L1,.5",ft),"\u253f":(_t={},_t[1]="M.5,0 L.5,1",_t[3]="M0,.5 L1,.5",_t),"\u2540":(dt={},dt[1]="M0,.5 L1,.5 M.5,.5 L.5,1",dt[3]="M.5,.5 L.5,0",dt),"\u2541":(pt={},pt[1]="M.5,.5 L.5,0 M0,.5 L1,.5",pt[3]="M.5,.5 L.5,1",pt),"\u2542":(vt={},vt[1]="M0,.5 L1,.5",vt[3]="M.5,0 L.5,1",vt),"\u2543":(gt={},gt[1]="M0.5,1 L.5,.5 L1,.5",gt[3]="M.5,0 L.5,.5 L0,.5",gt),"\u2544":(yt={},yt[1]="M0,.5 L.5,.5 L.5,1",yt[3]="M.5,0 L.5,.5 L1,.5",yt),"\u2545":(mt={},mt[1]="M.5,0 L.5,.5 L1,.5",mt[3]="M0,.5 L.5,.5 L.5,1",mt),"\u2546":(St={},St[1]="M.5,0 L.5,.5 L0,.5",St[3]="M0.5,1 L.5,.5 L1,.5",St),"\u2547":(Ct={},Ct[1]="M.5,.5 L.5,1",Ct[3]="M.5,.5 L.5,0 M0,.5 L1,.5",Ct),"\u2548":(bt={},bt[1]="M.5,.5 L.5,0",bt[3]="M0,.5 L1,.5 M.5,.5 L.5,1",bt),"\u2549":(wt={},wt[1]="M.5,.5 L1,.5",wt[3]="M.5,0 L.5,1 M.5,.5 L0,.5",wt),"\u254a":(Lt={},Lt[1]="M.5,.5 L0,.5",Lt[3]="M.5,0 L.5,1 M.5,.5 L1,.5",Lt),"\u254c":(Ft={},Ft[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Ft),"\u254d":(jt={},jt[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",jt),"\u2504":(Wt={},Wt[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Wt),"\u2505":(Ut={},Ut[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Ut),"\u2508":(qt={},qt[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",qt),"\u2509":(Nt={},Nt[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Nt),"\u254e":(zt={},zt[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",zt),"\u254f":(Kt={},Kt[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Kt),"\u2506":(Vt={},Vt[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Vt),"\u2507":(Gt={},Gt[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Gt),"\u250a":(Xt={},Xt[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Xt),"\u250b":(Yt={},Yt[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Yt),"\u256d":(Jt={},Jt[1]="C.5,1,.5,.5,1,.5",Jt),"\u256e":(Zt={},Zt[1]="C.5,1,.5,.5,0,.5",Zt),"\u256f":($t={},$t[1]="C.5,0,.5,.5,0,.5",$t),"\u2570":(Qt={},Qt[1]="C.5,0,.5,.5,1,.5",Qt)},s.tryDrawCustomChar=function(H,I,ae,we,Le,$){var ce=s.blockElementDefinitions[I];if(ce)return function(ee,he,xe,Me,Se,Ce){for(var ie=0;ie<he.length;ie++){var te=he[ie],Z=Se/8,ue=Ce/8;ee.fillRect(xe+te.x*Z,Me+te.y*ue,te.w*Z,te.h*ue)}}(H,ce,ae,we,Le,$),!0;var le=or[I];if(le)return function(ee,he,xe,Me,Se,Ce){var ie,te=ir.get(he);te||ir.set(he,te=new Map);var Z=ee.fillStyle;if("string"!=typeof Z)throw new Error('Unexpected fillStyle type "'+Z+'"');var ue=te.get(Z);if(!ue){var oe=he[0].length,de=he.length,pe=document.createElement("canvas");pe.width=oe,pe.height=de;var Et=(0,rr.throwIfFalsy)(pe.getContext("2d")),_e=new ImageData(oe,de),be=void 0,ve=void 0,er=void 0,tr=void 0;if(Z.startsWith("#"))be=parseInt(Z.substr(1,2),16),ve=parseInt(Z.substr(3,2),16),er=parseInt(Z.substr(5,2),16),tr=Z.length>7&&parseInt(Z.substr(7,2),16)||1;else{if(!Z.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+Z+'" when drawing pattern glyph');be=(ie=Z.substring(5,Z.length-1).split(",").map(function(cr){return parseFloat(cr)}))[0],ve=ie[1],er=ie[2],tr=ie[3]}for(var ge=0;ge<de;ge++)for(var ye=0;ye<oe;ye++)_e.data[4*(ge*oe+ye)]=be,_e.data[4*(ge*oe+ye)+1]=ve,_e.data[4*(ge*oe+ye)+2]=er,_e.data[4*(ge*oe+ye)+3]=he[ge][ye]*(255*tr);Et.putImageData(_e,0,0),ue=(0,rr.throwIfFalsy)(ee.createPattern(pe,null)),te.set(Z,ue)}ee.fillStyle=ue,ee.fillRect(xe,Me,Se,Ce)}(H,le,ae,we,Le,$),!0;var Ee=s.boxDrawingDefinitions[I];return!!Ee&&(function(ee,he,xe,Me,Se,Ce){ee.strokeStyle=ee.fillStyle;for(var ie=0,te=Object.entries(he);ie<te.length;ie++){var Z=te[ie],ue=Z[0],oe=Z[1];ee.beginPath(),ee.lineWidth=window.devicePixelRatio*Number.parseInt(ue);for(var de=0,pe=("function"==typeof oe?oe(.15,.15/Ce*Se):oe).split(" ");de<pe.length;de++){var Et=pe[de],_e=Et[0],be=sr[_e];if(be){var ve=Et.substring(1).split(",");ve[0]&&ve[1]&&be(ee,ar(ve,Se,Ce,xe,Me))}else console.error('Could not find drawing instructions for "'+_e+'"')}ee.stroke(),ee.closePath()}}(H,Ee,ae,we,Le,$),!0)};var ir=new Map;function nr(H,I,ae){return void 0===ae&&(ae=0),Math.max(Math.min(H,I),ae)}var sr={C:function(H,I){return H.bezierCurveTo(I[0],I[1],I[2],I[3],I[4],I[5])},L:function(H,I){return H.lineTo(I[0],I[1])},M:function(H,I){return H.moveTo(I[0],I[1])}};function ar(H,I,ae,we,Le){var $=H.map(function(Ee){return parseFloat(Ee)||parseInt(Ee)});if($.length<2)throw new Error("Too few arguments for instruction");for(var ce=0;ce<$.length;ce+=2)$[ce]*=I,0!==$[ce]&&($[ce]=nr(Math.round($[ce]+.5)-.5,I,0)),$[ce]+=we;for(var le=1;le<$.length;le+=2)$[le]*=ae,0!==$[le]&&($[le]=nr(Math.round($[le]+.5)-.5,ae,0)),$[le]+=Le;return $}},3700:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GridCache=void 0;var y=function(){function l(){this.cache=[]}return l.prototype.resize=function(d,f){for(var h=0;h<d;h++){this.cache.length<=h&&this.cache.push([]);for(var S=this.cache[h].length;S<f;S++)this.cache[h].push(void 0);this.cache[h].length=f}this.cache.length=d},l.prototype.clear=function(){for(var d=0;d<this.cache.length;d++)for(var f=0;f<this.cache[d].length;f++)this.cache[d][f]=void 0},l}();s.GridCache=y},5098:function(W,s,y){var l,d=this&&this.__extends||(l=function(n,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}l(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(n,t,e,r){var i,c=arguments.length,_=c<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_=Reflect.decorate(n,t,e,r);else for(var v=n.length-1;v>=0;v--)(i=n[v])&&(_=(c<3?i(_):c>3?i(t,e,_):i(t,e))||_);return c>3&&_&&Object.defineProperty(t,e,_),_},h=this&&this.__param||function(n,t){return function(e,r){t(e,r,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.LinkRenderLayer=void 0;var S=y(1546),p=y(8803),o=y(2040),a=y(2585),u=function(n){function t(e,r,i,c,_,v,b,C){var g=n.call(this,e,"link",r,!0,i,c,b,C)||this;return _.onShowLinkUnderline(function(m){return g._onShowLinkUnderline(m)}),_.onHideLinkUnderline(function(m){return g._onHideLinkUnderline(m)}),v.onShowLinkUnderline(function(m){return g._onShowLinkUnderline(m)}),v.onHideLinkUnderline(function(m){return g._onHideLinkUnderline(m)}),g}return d(t,n),t.prototype.resize=function(e){n.prototype.resize.call(this,e),this._state=void 0},t.prototype.reset=function(){this._clearCurrentLink()},t.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},t.prototype._onShowLinkUnderline=function(e){if(this._ctx.fillStyle=e.fg===p.INVERTED_DEFAULT_COLOR?this._colors.background.css:e.fg&&(0,o.is256Color)(e.fg)?this._colors.ansi[e.fg].css:this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var r=e.y1+1;r<e.y2;r++)this._fillBottomLineAtCells(0,r,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},t.prototype._onHideLinkUnderline=function(e){this._clearCurrentLink()},f([h(6,a.IBufferService),h(7,a.IOptionsService)],t)}(S.BaseRenderLayer);s.LinkRenderLayer=u},3525:function(W,s,y){var l,d=this&&this.__extends||(l=function(_,v){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,C){b.__proto__=C}||function(b,C){for(var g in C)Object.prototype.hasOwnProperty.call(C,g)&&(b[g]=C[g])})(_,v)},function(_,v){if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function b(){this.constructor=_}l(_,v),_.prototype=null===v?Object.create(v):(b.prototype=v.prototype,new b)}),f=this&&this.__decorate||function(_,v,b,C){var g,m=arguments.length,E=m<3?v:null===C?C=Object.getOwnPropertyDescriptor(v,b):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(_,v,b,C);else for(var L=_.length-1;L>=0;L--)(g=_[L])&&(E=(m<3?g(E):m>3?g(v,b,E):g(v,b))||E);return m>3&&E&&Object.defineProperty(v,b,E),E},h=this&&this.__param||function(_,v){return function(b,C){v(b,C,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Renderer=void 0;var S=y(9596),p=y(4149),o=y(2512),a=y(5098),u=y(844),n=y(4725),t=y(2585),e=y(1420),r=y(8460),i=1,c=function(_){function v(b,C,g,m,E,L,B,k){var w=_.call(this)||this;return w._colors=b,w._screenElement=C,w._bufferService=L,w._charSizeService=B,w._optionsService=k,w._id=i++,w._onRequestRedraw=new r.EventEmitter,w._renderLayers=[E.createInstance(S.TextRenderLayer,w._screenElement,0,w._colors,w._optionsService.rawOptions.allowTransparency,w._id),E.createInstance(p.SelectionRenderLayer,w._screenElement,1,w._colors,w._id),E.createInstance(a.LinkRenderLayer,w._screenElement,2,w._colors,w._id,g,m),E.createInstance(o.CursorRenderLayer,w._screenElement,3,w._colors,w._id,w._onRequestRedraw)],w.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},w._devicePixelRatio=window.devicePixelRatio,w._updateDimensions(),w.onOptionsChanged(),w}return d(v,_),Object.defineProperty(v.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),v.prototype.dispose=function(){for(var b=0,C=this._renderLayers;b<C.length;b++)C[b].dispose();_.prototype.dispose.call(this),(0,e.removeTerminalFromCache)(this._id)},v.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},v.prototype.setColors=function(b){this._colors=b;for(var C=0,g=this._renderLayers;C<g.length;C++){var m=g[C];m.setColors(this._colors),m.reset()}},v.prototype.onResize=function(b,C){this._updateDimensions();for(var g=0,m=this._renderLayers;g<m.length;g++)m[g].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},v.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},v.prototype.onBlur=function(){this._runOperation(function(b){return b.onBlur()})},v.prototype.onFocus=function(){this._runOperation(function(b){return b.onFocus()})},v.prototype.onSelectionChanged=function(b,C,g){void 0===g&&(g=!1),this._runOperation(function(m){return m.onSelectionChanged(b,C,g)})},v.prototype.onCursorMove=function(){this._runOperation(function(b){return b.onCursorMove()})},v.prototype.onOptionsChanged=function(){this._runOperation(function(b){return b.onOptionsChanged()})},v.prototype.clear=function(){this._runOperation(function(b){return b.reset()})},v.prototype._runOperation=function(b){for(var C=0,g=this._renderLayers;C<g.length;C++)b(g[C])},v.prototype.renderRows=function(b,C){for(var g=0,m=this._renderLayers;g<m.length;g++)m[g].onGridChanged(b,C)},v.prototype.clearTextureAtlas=function(){for(var b=0,C=this._renderLayers;b<C.length;b++)C[b].clearTextureAtlas()},v.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharTop=1===this._optionsService.rawOptions.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},f([h(4,t.IInstantiationService),h(5,t.IBufferService),h(6,n.ICharSizeService),h(7,t.IOptionsService)],v)}(u.Disposable);s.Renderer=c},1752:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.throwIfFalsy=void 0,s.throwIfFalsy=function(y){if(!y)throw new Error("value must not be falsy");return y}},4149:function(W,s,y){var l,d=this&&this.__extends||(l=function(a,u){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])})(a,u)},function(a,u){if("function"!=typeof u&&null!==u)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function n(){this.constructor=a}l(a,u),a.prototype=null===u?Object.create(u):(n.prototype=u.prototype,new n)}),f=this&&this.__decorate||function(a,u,n,t){var e,r=arguments.length,i=r<3?u:null===t?t=Object.getOwnPropertyDescriptor(u,n):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(a,u,n,t);else for(var c=a.length-1;c>=0;c--)(e=a[c])&&(i=(r<3?e(i):r>3?e(u,n,i):e(u,n))||i);return r>3&&i&&Object.defineProperty(u,n,i),i},h=this&&this.__param||function(a,u){return function(n,t){u(n,t,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionRenderLayer=void 0;var S=y(1546),p=y(2585),o=function(a){function u(n,t,e,r,i,c){var _=a.call(this,n,"selection",t,!0,e,r,i,c)||this;return _._clearState(),_}return d(u,a),u.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},u.prototype.resize=function(n){a.prototype.resize.call(this,n),this._clearState()},u.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},u.prototype.onSelectionChanged=function(n,t,e){if(this._didStateChange(n,t,e,this._bufferService.buffer.ydisp))if(this._clearAll(),n&&t){var r=n[1]-this._bufferService.buffer.ydisp,i=t[1]-this._bufferService.buffer.ydisp,c=Math.max(r,0),_=Math.min(i,this._bufferService.rows-1);if(c>=this._bufferService.rows||_<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,e){var v=n[0];this._fillCells(v,c,t[0]-v,_-c+1)}else{this._fillCells(v=r===c?n[0]:0,c,(c===i?t[0]:this._bufferService.cols)-v,1);var m=Math.max(_-c-1,0);this._fillCells(0,c+1,this._bufferService.cols,m),c!==_&&this._fillCells(0,_,i===_?t[0]:this._bufferService.cols,1)}this._state.start=[n[0],n[1]],this._state.end=[t[0],t[1]],this._state.columnSelectMode=e,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},u.prototype._didStateChange=function(n,t,e,r){return!this._areCoordinatesEqual(n,this._state.start)||!this._areCoordinatesEqual(t,this._state.end)||e!==this._state.columnSelectMode||r!==this._state.ydisp},u.prototype._areCoordinatesEqual=function(n,t){return!(!n||!t)&&n[0]===t[0]&&n[1]===t[1]},f([h(4,p.IBufferService),h(5,p.IOptionsService)],u)}(S.BaseRenderLayer);s.SelectionRenderLayer=o},9596:function(W,s,y){var l,d=this&&this.__extends||(l=function(i,c){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,v){_.__proto__=v}||function(_,v){for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(_[b]=v[b])})(i,c)},function(i,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function _(){this.constructor=i}l(i,c),i.prototype=null===c?Object.create(c):(_.prototype=c.prototype,new _)}),f=this&&this.__decorate||function(i,c,_,v){var b,C=arguments.length,g=C<3?c:null===v?v=Object.getOwnPropertyDescriptor(c,_):v;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(i,c,_,v);else for(var m=i.length-1;m>=0;m--)(b=i[m])&&(g=(C<3?b(g):C>3?b(c,_,g):b(c,_))||g);return C>3&&g&&Object.defineProperty(c,_,g),g},h=this&&this.__param||function(i,c){return function(_,v){c(_,v,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.TextRenderLayer=void 0;var S=y(3700),p=y(1546),o=y(3734),a=y(643),u=y(511),n=y(2585),t=y(4725),e=y(4269),r=function(i){function c(_,v,b,C,g,m,E,L){var B=i.call(this,_,"text",v,C,b,g,m,E)||this;return B._characterJoinerService=L,B._characterWidth=0,B._characterFont="",B._characterOverlapCache={},B._workCell=new u.CellData,B._state=new S.GridCache,B}return d(c,i),c.prototype.resize=function(_){i.prototype.resize.call(this,_);var v=this._getFont(!1,!1);this._characterWidth===_.scaledCharWidth&&this._characterFont===v||(this._characterWidth=_.scaledCharWidth,this._characterFont=v,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},c.prototype.reset=function(){this._state.clear(),this._clearAll()},c.prototype._forEachCell=function(_,v,b){for(var C=_;C<=v;C++)for(var g=C+this._bufferService.buffer.ydisp,m=this._bufferService.buffer.lines.get(g),E=this._characterJoinerService.getJoinedCharacters(g),L=0;L<this._bufferService.cols;L++){m.loadCell(L,this._workCell);var B=this._workCell,k=!1,w=L;if(0!==B.getWidth()){if(E.length>0&&L===E[0][0]){k=!0;var x=E.shift();B=new e.JoinedCellData(this._workCell,m.translateToString(!0,x[0],x[1]),x[1]-x[0]),w=x[1]-1}!k&&this._isOverlapping(B)&&w<m.length-1&&m.getCodePoint(w+1)===a.NULL_CELL_CODE&&(B.content&=-12582913,B.content|=2<<22),b(B,L,C),L=w}}},c.prototype._drawBackground=function(_,v){var b=this,C=this._ctx,g=this._bufferService.cols,m=0,E=0,L=null;C.save(),this._forEachCell(_,v,function(B,k,w){var x=null;B.isInverse()?x=B.isFgDefault()?b._colors.foreground.css:B.isFgRGB()?"rgb("+o.AttributeData.toColorRGB(B.getFgColor()).join(",")+")":b._colors.ansi[B.getFgColor()].css:B.isBgRGB()?x="rgb("+o.AttributeData.toColorRGB(B.getBgColor()).join(",")+")":B.isBgPalette()&&(x=b._colors.ansi[B.getBgColor()].css),null===L&&(m=k,E=w),w!==E?(C.fillStyle=L||"",b._fillCells(m,E,g-m,1),m=k,E=w):L!==x&&(C.fillStyle=L||"",b._fillCells(m,E,k-m,1),m=k,E=w),L=x}),null!==L&&(C.fillStyle=L,this._fillCells(m,E,g-m,1)),C.restore()},c.prototype._drawForeground=function(_,v){var b=this;this._forEachCell(_,v,function(C,g,m){if(!C.isInvisible()&&(b._drawChars(C,g,m),C.isUnderline()||C.isStrikethrough())){if(b._ctx.save(),C.isInverse())if(C.isBgDefault())b._ctx.fillStyle=b._colors.background.css;else if(C.isBgRGB())b._ctx.fillStyle="rgb("+o.AttributeData.toColorRGB(C.getBgColor()).join(",")+")";else{var E=C.getBgColor();b._optionsService.rawOptions.drawBoldTextInBrightColors&&C.isBold()&&E<8&&(E+=8),b._ctx.fillStyle=b._colors.ansi[E].css}else if(C.isFgDefault())b._ctx.fillStyle=b._colors.foreground.css;else if(C.isFgRGB())b._ctx.fillStyle="rgb("+o.AttributeData.toColorRGB(C.getFgColor()).join(",")+")";else{var L=C.getFgColor();b._optionsService.rawOptions.drawBoldTextInBrightColors&&C.isBold()&&L<8&&(L+=8),b._ctx.fillStyle=b._colors.ansi[L].css}C.isStrikethrough()&&b._fillMiddleLineAtCells(g,m,C.getWidth()),C.isUnderline()&&b._fillBottomLineAtCells(g,m,C.getWidth()),b._ctx.restore()}})},c.prototype.onGridChanged=function(_,v){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,_,this._bufferService.cols,v-_+1),this._drawBackground(_,v),this._drawForeground(_,v))},c.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.rawOptions.allowTransparency)},c.prototype._isOverlapping=function(_){if(1!==_.getWidth()||_.getCode()<256)return!1;var v=_.getChars();if(this._characterOverlapCache.hasOwnProperty(v))return this._characterOverlapCache[v];this._ctx.save(),this._ctx.font=this._characterFont;var b=Math.floor(this._ctx.measureText(v).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[v]=b,b},f([h(5,n.IBufferService),h(6,n.IOptionsService),h(7,t.ICharacterJoinerService)],c)}(p.BaseRenderLayer);s.TextRenderLayer=r},9616:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseCharAtlas=void 0;var y=function(){function l(){this._didWarmUp=!1}return l.prototype.dispose=function(){},l.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},l.prototype._doWarmUp=function(){},l.prototype.clear=function(){},l.prototype.beginFrame=function(){},l}();s.BaseCharAtlas=y},1420:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.removeTerminalFromCache=s.acquireCharAtlas=void 0;var l=y(2040),d=y(1906),f=[];s.acquireCharAtlas=function(h,S,p,o,a){for(var u=(0,l.generateConfig)(o,a,h,p),n=0;n<f.length;n++){var t=(e=f[n]).ownedBy.indexOf(S);if(t>=0){if((0,l.configEquals)(e.config,u))return e.atlas;1===e.ownedBy.length?(e.atlas.dispose(),f.splice(n,1)):e.ownedBy.splice(t,1);break}}for(n=0;n<f.length;n++){var e=f[n];if((0,l.configEquals)(e.config,u))return e.ownedBy.push(S),e.atlas}var r={atlas:new d.DynamicCharAtlas(document,u),config:u,ownedBy:[S]};return f.push(r),r.atlas},s.removeTerminalFromCache=function(h){for(var S=0;S<f.length;S++){var p=f[S].ownedBy.indexOf(h);if(-1!==p){1===f[S].ownedBy.length?(f[S].atlas.dispose(),f.splice(S,1)):f[S].ownedBy.splice(p,1);break}}}},2040:function(W,s,y){var l=this&&this.__spreadArray||function(f,h,S){if(S||2===arguments.length)for(var p,o=0,a=h.length;o<a;o++)!p&&o in h||(p||(p=Array.prototype.slice.call(h,0,o)),p[o]=h[o]);return f.concat(p||Array.prototype.slice.call(h))};Object.defineProperty(s,"__esModule",{value:!0}),s.is256Color=s.configEquals=s.generateConfig=void 0;var d=y(643);s.generateConfig=function(f,h,S,p){var o={foreground:p.foreground,background:p.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:l([],p.ansi,!0)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:f,scaledCharHeight:h,fontFamily:S.fontFamily,fontSize:S.fontSize,fontWeight:S.fontWeight,fontWeightBold:S.fontWeightBold,allowTransparency:S.allowTransparency,colors:o}},s.configEquals=function(f,h){for(var S=0;S<f.colors.ansi.length;S++)if(f.colors.ansi[S].rgba!==h.colors.ansi[S].rgba)return!1;return f.devicePixelRatio===h.devicePixelRatio&&f.fontFamily===h.fontFamily&&f.fontSize===h.fontSize&&f.fontWeight===h.fontWeight&&f.fontWeightBold===h.fontWeightBold&&f.allowTransparency===h.allowTransparency&&f.scaledCharWidth===h.scaledCharWidth&&f.scaledCharHeight===h.scaledCharHeight&&f.colors.foreground===h.colors.foreground&&f.colors.background===h.colors.background},s.is256Color=function(f){return f<d.DEFAULT_COLOR}},8803:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CHAR_ATLAS_CELL_SPACING=s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;var l=y(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic",s.CHAR_ATLAS_CELL_SPACING=1},1906:function(W,s,y){var l,d=this&&this.__extends||(l=function(v,b){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,g){C.__proto__=g}||function(C,g){for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(C[m]=g[m])})(v,b)},function(v,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function C(){this.constructor=v}l(v,b),v.prototype=null===b?Object.create(b):(C.prototype=b.prototype,new C)});Object.defineProperty(s,"__esModule",{value:!0}),s.NoneCharAtlas=s.DynamicCharAtlas=s.getGlyphCacheKey=void 0;var f=y(8803),h=y(9616),S=y(5680),p=y(7001),o=y(6114),a=y(1752),u=y(4774),n=1024,t=1024,e={css:"rgba(0, 0, 0, 0)",rgba:0};function r(v){return v.code<<21|v.bg<<12|v.fg<<3|(v.bold?0:4)+(v.dim?0:2)+(v.italic?0:1)}s.getGlyphCacheKey=r;var i=function(v){function b(C,g){var m=v.call(this)||this;m._config=g,m._drawToCacheCount=0,m._glyphsWaitingOnBitmap=[],m._bitmapCommitTimeout=null,m._bitmap=null,m._cacheCanvas=C.createElement("canvas"),m._cacheCanvas.width=n,m._cacheCanvas.height=t,m._cacheCtx=(0,a.throwIfFalsy)(m._cacheCanvas.getContext("2d",{alpha:!0}));var E=C.createElement("canvas");E.width=m._config.scaledCharWidth,E.height=m._config.scaledCharHeight,m._tmpCtx=(0,a.throwIfFalsy)(E.getContext("2d",{alpha:m._config.allowTransparency})),m._width=Math.floor(n/m._config.scaledCharWidth),m._height=Math.floor(t/m._config.scaledCharHeight);var L=m._width*m._height;return m._cacheMap=new p.LRUMap(L),m._cacheMap.prealloc(L),m}return d(b,v),b.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},b.prototype.beginFrame=function(){this._drawToCacheCount=0},b.prototype.clear=function(){if(this._cacheMap.size>0){var C=this._width*this._height;this._cacheMap=new p.LRUMap(C),this._cacheMap.prealloc(C)}this._cacheCtx.clearRect(0,0,n,t),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},b.prototype.draw=function(C,g,m,E){if(32===g.code)return!0;if(!this._canCache(g))return!1;var L=r(g),B=this._cacheMap.get(L);if(null!=B)return this._drawFromCache(C,B,m,E),!0;if(this._drawToCacheCount<100){var k;k=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var w=this._drawToCache(g,k);return this._cacheMap.set(L,w),this._drawFromCache(C,w,m,E),!0}return!1},b.prototype._canCache=function(C){return C.code<256},b.prototype._toCoordinateX=function(C){return C%this._width*this._config.scaledCharWidth},b.prototype._toCoordinateY=function(C){return Math.floor(C/this._width)*this._config.scaledCharHeight},b.prototype._drawFromCache=function(C,g,m,E){if(!g.isEmpty){var L=this._toCoordinateX(g.index),B=this._toCoordinateY(g.index);C.drawImage(g.inBitmap?this._bitmap:this._cacheCanvas,L,B,this._config.scaledCharWidth,this._config.scaledCharHeight,m,E,this._config.scaledCharWidth,this._config.scaledCharHeight)}},b.prototype._getColorFromAnsiIndex=function(C){return C<this._config.colors.ansi.length?this._config.colors.ansi[C]:S.DEFAULT_ANSI_COLORS[C]},b.prototype._getBackgroundColor=function(C){return this._config.allowTransparency?e:C.bg===f.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:C.bg<256?this._getColorFromAnsiIndex(C.bg):this._config.colors.background},b.prototype._getForegroundColor=function(C){return C.fg===f.INVERTED_DEFAULT_COLOR?u.color.opaque(this._config.colors.background):C.fg<256?this._getColorFromAnsiIndex(C.fg):this._config.colors.foreground},b.prototype._drawToCache=function(C,g){this._drawToCacheCount++,this._tmpCtx.save();var m=this._getBackgroundColor(C);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=m.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over",this._tmpCtx.font=(C.italic?"italic":"")+" "+(C.bold?this._config.fontWeightBold:this._config.fontWeight)+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=f.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(C).css,C.dim&&(this._tmpCtx.globalAlpha=f.DIM_OPACITY),this._tmpCtx.fillText(C.chars,0,this._config.scaledCharHeight);var B=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),k=!1;if(this._config.allowTransparency||(k=_(B,m)),k&&"_"===C.chars&&!this._config.allowTransparency)for(var w=1;w<=5&&(this._tmpCtx.fillText(C.chars,0,this._config.scaledCharHeight-w),k=_(B=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),m));w++);this._tmpCtx.restore();var x=this._toCoordinateX(g),O=this._toCoordinateY(g);this._cacheCtx.putImageData(B,x,O);var D={index:g,isEmpty:k,inBitmap:!1};return this._addGlyphToBitmap(D),D},b.prototype._addGlyphToBitmap=function(C){var g=this;!("createImageBitmap"in window)||o.isFirefox||o.isSafari||(this._glyphsWaitingOnBitmap.push(C),null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout(function(){return g._generateBitmap()},100)))},b.prototype._generateBitmap=function(){var C=this,g=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(m){C._bitmap=m;for(var E=0;E<g.length;E++)g[E].inBitmap=!0}),this._bitmapCommitTimeout=null},b}(h.BaseCharAtlas);s.DynamicCharAtlas=i;var c=function(v){function b(C,g){return v.call(this)||this}return d(b,v),b.prototype.draw=function(C,g,m,E){return!1},b}(h.BaseCharAtlas);function _(v,b){for(var C=!0,g=b.rgba>>>24,m=b.rgba>>>16&255,E=b.rgba>>>8&255,L=0;L<v.data.length;L+=4)v.data[L]===g&&v.data[L+1]===m&&v.data[L+2]===E?v.data[L+3]=0:C=!1;return C}s.NoneCharAtlas=c},7001:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LRUMap=void 0;var y=function(){function l(d){this.capacity=d,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return l.prototype._unlinkNode=function(d){var f=d.prev,h=d.next;d===this._head&&(this._head=h),d===this._tail&&(this._tail=f),null!==f&&(f.next=h),null!==h&&(h.prev=f)},l.prototype._appendNode=function(d){var f=this._tail;null!==f&&(f.next=d),d.prev=f,d.next=null,this._tail=d,null===this._head&&(this._head=d)},l.prototype.prealloc=function(d){for(var f=this._nodePool,h=0;h<d;h++)f.push({prev:null,next:null,key:null,value:null})},l.prototype.get=function(d){var f=this._map[d];return void 0!==f?(this._unlinkNode(f),this._appendNode(f),f.value):null},l.prototype.peekValue=function(d){var f=this._map[d];return void 0!==f?f.value:null},l.prototype.peek=function(){var d=this._head;return null===d?null:d.value},l.prototype.set=function(d,f){var h=this._map[d];if(void 0!==h)this._unlinkNode(h=this._map[d]),h.value=f;else if(this.size>=this.capacity)this._unlinkNode(h=this._head),delete this._map[h.key],h.key=d,h.value=f,this._map[d]=h;else{var S=this._nodePool;S.length>0?((h=S.pop()).key=d,h.value=f):h={prev:null,next:null,key:d,value:f},this._map[d]=h,this.size++}this._appendNode(h)},l}();s.LRUMap=y},1296:function(W,s,y){var l,d=this&&this.__extends||(l=function(C,g){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,E){m.__proto__=E}||function(m,E){for(var L in E)Object.prototype.hasOwnProperty.call(E,L)&&(m[L]=E[L])})(C,g)},function(C,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function m(){this.constructor=C}l(C,g),C.prototype=null===g?Object.create(g):(m.prototype=g.prototype,new m)}),f=this&&this.__decorate||function(C,g,m,E){var L,B=arguments.length,k=B<3?g:null===E?E=Object.getOwnPropertyDescriptor(g,m):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)k=Reflect.decorate(C,g,m,E);else for(var w=C.length-1;w>=0;w--)(L=C[w])&&(k=(B<3?L(k):B>3?L(g,m,k):L(g,m))||k);return B>3&&k&&Object.defineProperty(g,m,k),k},h=this&&this.__param||function(C,g){return function(m,E){g(m,E,C)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;var S=y(3787),p=y(8803),o=y(844),a=y(4725),u=y(2585),n=y(8460),t=y(4774),e=y(9631),r="xterm-dom-renderer-owner-",i="xterm-fg-",c="xterm-bg-",_="xterm-focus",v=1,b=function(C){function g(m,E,L,B,k,w,x,O,D,P){var F=C.call(this)||this;return F._colors=m,F._element=E,F._screenElement=L,F._viewportElement=B,F._linkifier=k,F._linkifier2=w,F._charSizeService=O,F._optionsService=D,F._bufferService=P,F._terminalClass=v++,F._rowElements=[],F._rowContainer=document.createElement("div"),F._rowContainer.classList.add("xterm-rows"),F._rowContainer.style.lineHeight="normal",F._rowContainer.setAttribute("aria-hidden","true"),F._refreshRowElements(F._bufferService.cols,F._bufferService.rows),F._selectionContainer=document.createElement("div"),F._selectionContainer.classList.add("xterm-selection"),F._selectionContainer.setAttribute("aria-hidden","true"),F.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},F._updateDimensions(),F._injectCss(),F._rowFactory=x.createInstance(S.DomRendererRowFactory,document,F._colors),F._element.classList.add(r+F._terminalClass),F._screenElement.appendChild(F._rowContainer),F._screenElement.appendChild(F._selectionContainer),F._linkifier.onShowLinkUnderline(function(N){return F._onLinkHover(N)}),F._linkifier.onHideLinkUnderline(function(N){return F._onLinkLeave(N)}),F._linkifier2.onShowLinkUnderline(function(N){return F._onLinkHover(N)}),F._linkifier2.onHideLinkUnderline(function(N){return F._onLinkLeave(N)}),F}return d(g,C),Object.defineProperty(g.prototype,"onRequestRedraw",{get:function(){return(new n.EventEmitter).event},enumerable:!1,configurable:!0}),g.prototype.dispose=function(){this._element.classList.remove(r+this._terminalClass),(0,e.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),C.prototype.dispose.call(this)},g.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var m=0,E=this._rowElements;m<E.length;m++){var L=E[m];L.style.width=this.dimensions.canvasWidth+"px",L.style.height=this.dimensions.actualCellHeight+"px",L.style.lineHeight=this.dimensions.actualCellHeight+"px",L.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement)),this._dimensionsStyleElement.textContent=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}",this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},g.prototype.setColors=function(m){this._colors=m,this._injectCss()},g.prototype._injectCss=function(){var m=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var E=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.rawOptions.fontFamily+"; font-size: "+this._optionsService.rawOptions.fontSize+"px;}";E+=this._terminalSelector+" span:not(."+S.BOLD_CLASS+") { font-weight: "+this._optionsService.rawOptions.fontWeight+";}"+this._terminalSelector+" span."+S.BOLD_CLASS+" { font-weight: "+this._optionsService.rawOptions.fontWeightBold+";}"+this._terminalSelector+" span."+S.ITALIC_CLASS+" { font-style: italic;}",E+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",E+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",E+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+S.CURSOR_CLASS+"."+S.CURSOR_BLINK_CLASS+":not(."+S.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+S.CURSOR_CLASS+"."+S.CURSOR_BLINK_CLASS+"."+S.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.rawOptions.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",E+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(L,B){E+=m._terminalSelector+" ."+i+B+" { color: "+L.css+"; }"+m._terminalSelector+" ."+c+B+" { background-color: "+L.css+"; }"}),E+=this._terminalSelector+" ."+i+p.INVERTED_DEFAULT_COLOR+" { color: "+t.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+c+p.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=E},g.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},g.prototype._refreshRowElements=function(m,E){for(var L=this._rowElements.length;L<=E;L++){var B=document.createElement("div");this._rowContainer.appendChild(B),this._rowElements.push(B)}for(;this._rowElements.length>E;)this._rowContainer.removeChild(this._rowElements.pop())},g.prototype.onResize=function(m,E){this._refreshRowElements(m,E),this._updateDimensions()},g.prototype.onCharSizeChanged=function(){this._updateDimensions()},g.prototype.onBlur=function(){this._rowContainer.classList.remove(_)},g.prototype.onFocus=function(){this._rowContainer.classList.add(_)},g.prototype.onSelectionChanged=function(m,E,L){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(m&&E){var B=m[1]-this._bufferService.buffer.ydisp,k=E[1]-this._bufferService.buffer.ydisp,w=Math.max(B,0),x=Math.min(k,this._bufferService.rows-1);if(!(w>=this._bufferService.rows||x<0)){var O=document.createDocumentFragment();L?O.appendChild(this._createSelectionElement(w,m[0],E[0],x-w+1)):(O.appendChild(this._createSelectionElement(w,B===w?m[0]:0,w===k?E[0]:this._bufferService.cols)),O.appendChild(this._createSelectionElement(w+1,0,this._bufferService.cols,x-w-1)),w!==x&&O.appendChild(this._createSelectionElement(x,0,k===x?E[0]:this._bufferService.cols))),this._selectionContainer.appendChild(O)}}},g.prototype._createSelectionElement=function(m,E,L,B){void 0===B&&(B=1);var k=document.createElement("div");return k.style.height=B*this.dimensions.actualCellHeight+"px",k.style.top=m*this.dimensions.actualCellHeight+"px",k.style.left=E*this.dimensions.actualCellWidth+"px",k.style.width=this.dimensions.actualCellWidth*(L-E)+"px",k},g.prototype.onCursorMove=function(){},g.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},g.prototype.clear=function(){for(var m=0,E=this._rowElements;m<E.length;m++)E[m].innerText=""},g.prototype.renderRows=function(m,E){for(var L=this._bufferService.buffer.ybase+this._bufferService.buffer.y,B=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),k=this._optionsService.rawOptions.cursorBlink,w=m;w<=E;w++){var x=this._rowElements[w];x.innerText="";var O=w+this._bufferService.buffer.ydisp,D=this._bufferService.buffer.lines.get(O);x.appendChild(this._rowFactory.createRow(D,O,O===L,this._optionsService.rawOptions.cursorStyle,B,k,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(g.prototype,"_terminalSelector",{get:function(){return"."+r+this._terminalClass},enumerable:!1,configurable:!0}),g.prototype._onLinkHover=function(m){this._setCellUnderline(m.x1,m.x2,m.y1,m.y2,m.cols,!0)},g.prototype._onLinkLeave=function(m){this._setCellUnderline(m.x1,m.x2,m.y1,m.y2,m.cols,!1)},g.prototype._setCellUnderline=function(m,E,L,B,k,w){for(;m!==E||L!==B;){var x=this._rowElements[L];if(!x)return;var O=x.children[m];O&&(O.style.textDecoration=w?"underline":"none"),++m>=k&&(m=0,L++)}},f([h(6,u.IInstantiationService),h(7,a.ICharSizeService),h(8,u.IOptionsService),h(9,u.IBufferService)],g)}(o.Disposable);s.DomRenderer=b},3787:function(W,s,y){var l=this&&this.__decorate||function(e,r,i,c){var _,v=arguments.length,b=v<3?r:null===c?c=Object.getOwnPropertyDescriptor(r,i):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(e,r,i,c);else for(var C=e.length-1;C>=0;C--)(_=e[C])&&(b=(v<3?_(b):v>3?_(r,i,b):_(r,i))||b);return v>3&&b&&Object.defineProperty(r,i,b),b},d=this&&this.__param||function(e,r){return function(i,c){r(i,c,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=s.CURSOR_STYLE_UNDERLINE_CLASS=s.CURSOR_STYLE_BAR_CLASS=s.CURSOR_STYLE_BLOCK_CLASS=s.CURSOR_BLINK_CLASS=s.CURSOR_CLASS=s.STRIKETHROUGH_CLASS=s.UNDERLINE_CLASS=s.ITALIC_CLASS=s.DIM_CLASS=s.BOLD_CLASS=void 0;var f=y(8803),h=y(643),S=y(511),p=y(2585),o=y(4774),a=y(4725),u=y(4269);s.BOLD_CLASS="xterm-bold",s.DIM_CLASS="xterm-dim",s.ITALIC_CLASS="xterm-italic",s.UNDERLINE_CLASS="xterm-underline",s.STRIKETHROUGH_CLASS="xterm-strikethrough",s.CURSOR_CLASS="xterm-cursor",s.CURSOR_BLINK_CLASS="xterm-cursor-blink",s.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",s.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",s.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var n=function(){function e(r,i,c,_,v){this._document=r,this._colors=i,this._characterJoinerService=c,this._optionsService=_,this._coreService=v,this._workCell=new S.CellData}return e.prototype.setColors=function(r){this._colors=r},e.prototype.createRow=function(r,i,c,_,v,b,C,g){for(var m=this._document.createDocumentFragment(),E=this._characterJoinerService.getJoinedCharacters(i),L=0,B=Math.min(r.length,g)-1;B>=0;B--)if(r.loadCell(B,this._workCell).getCode()!==h.NULL_CELL_CODE||c&&B===v){L=B+1;break}for(B=0;B<L;B++){r.loadCell(B,this._workCell);var k=this._workCell.getWidth();if(0!==k){var w=!1,x=B,O=this._workCell;if(E.length>0&&B===E[0][0]){w=!0;var D=E.shift();O=new u.JoinedCellData(this._workCell,r.translateToString(!0,D[0],D[1]),D[1]-D[0]),x=D[1]-1,k=O.getWidth()}var P=this._document.createElement("span");if(k>1&&(P.style.width=C*k+"px"),w&&(P.style.display="inline",v>=B&&v<=x&&(v=B)),!this._coreService.isCursorHidden&&c&&B===v)switch(P.classList.add(s.CURSOR_CLASS),b&&P.classList.add(s.CURSOR_BLINK_CLASS),_){case"bar":P.classList.add(s.CURSOR_STYLE_BAR_CLASS);break;case"underline":P.classList.add(s.CURSOR_STYLE_UNDERLINE_CLASS);break;default:P.classList.add(s.CURSOR_STYLE_BLOCK_CLASS)}O.isBold()&&P.classList.add(s.BOLD_CLASS),O.isItalic()&&P.classList.add(s.ITALIC_CLASS),O.isDim()&&P.classList.add(s.DIM_CLASS),O.isUnderline()&&P.classList.add(s.UNDERLINE_CLASS),P.textContent=O.isInvisible()?h.WHITESPACE_CELL_CHAR:O.getChars()||h.WHITESPACE_CELL_CHAR,O.isStrikethrough()&&P.classList.add(s.STRIKETHROUGH_CLASS);var F=O.getFgColor(),N=O.getFgColorMode(),z=O.getBgColor(),X=O.getBgColorMode(),M=!!O.isInverse();if(M){var j=F;F=z,z=j;var R=N;N=X,X=R}switch(N){case 16777216:case 33554432:O.isBold()&&F<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(F+=8),this._applyMinimumContrast(P,this._colors.background,this._colors.ansi[F])||P.classList.add("xterm-fg-"+F);break;case 50331648:var T=o.rgba.toColor(F>>16&255,F>>8&255,255&F);this._applyMinimumContrast(P,this._colors.background,T)||this._addStyle(P,"color:#"+t(F.toString(16),"0",6));break;default:this._applyMinimumContrast(P,this._colors.background,this._colors.foreground)||M&&P.classList.add("xterm-fg-"+f.INVERTED_DEFAULT_COLOR)}switch(X){case 16777216:case 33554432:P.classList.add("xterm-bg-"+z);break;case 50331648:this._addStyle(P,"background-color:#"+t(z.toString(16),"0",6));break;default:M&&P.classList.add("xterm-bg-"+f.INVERTED_DEFAULT_COLOR)}m.appendChild(P),B=x}}return m},e.prototype._applyMinimumContrast=function(r,i,c){if(1===this._optionsService.rawOptions.minimumContrastRatio)return!1;var _=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return void 0===_&&(_=o.color.ensureContrastRatio(i,c,this._optionsService.rawOptions.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,_??null)),!!_&&(this._addStyle(r,"color:"+_.css),!0)},e.prototype._addStyle=function(r,i){r.setAttribute("style",""+(r.getAttribute("style")||"")+i+";")},l([d(2,a.ICharacterJoinerService),d(3,p.IOptionsService),d(4,p.ICoreService)],e)}();function t(e,r,i){for(;e.length<i;)e=r+e;return e}s.DomRendererRowFactory=n},456:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0;var y=function(){function l(d){this._bufferService=d,this.isSelectAllActive=!1,this.selectionStartLength=0}return l.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(l.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var d=this.selectionStart[0]+this.selectionStartLength;return d>this._bufferService.cols?d%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)-1]:[d%this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)]:[d,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),l.prototype.areSelectionValuesReversed=function(){var d=this.selectionStart,f=this.selectionEnd;return!(!d||!f)&&(d[1]>f[1]||d[1]===f[1]&&d[0]>f[0])},l.prototype.onTrim=function(d){return this.selectionStart&&(this.selectionStart[1]-=d),this.selectionEnd&&(this.selectionEnd[1]-=d),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},l}();s.SelectionModel=y},428:function(W,s,y){var l=this&&this.__decorate||function(o,a,u,n){var t,e=arguments.length,r=e<3?a:null===n?n=Object.getOwnPropertyDescriptor(a,u):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(o,a,u,n);else for(var i=o.length-1;i>=0;i--)(t=o[i])&&(r=(e<3?t(r):e>3?t(a,u,r):t(a,u))||r);return e>3&&r&&Object.defineProperty(a,u,r),r},d=this&&this.__param||function(o,a){return function(u,n){a(u,n,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;var f=y(2585),h=y(8460),S=function(){function o(a,u,n){this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=new h.EventEmitter,this._measureStrategy=new p(a,u,this._optionsService)}return Object.defineProperty(o.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),o.prototype.measure=function(){var a=this._measureStrategy.measure();a.width===this.width&&a.height===this.height||(this.width=a.width,this.height=a.height,this._onCharSizeChange.fire())},l([d(2,f.IOptionsService)],o)}();s.CharSizeService=S;var p=function(){function o(a,u,n){this._document=a,this._parentElement=u,this._optionsService=n,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return o.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var a=this._measureElement.getBoundingClientRect();return 0!==a.width&&0!==a.height&&(this._result.width=a.width,this._result.height=Math.ceil(a.height)),this._result},o}()},4269:function(W,s,y){var l,d=this&&this.__extends||(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(r[c]=i[c])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f=this&&this.__decorate||function(t,e,r,i){var c,_=arguments.length,v=_<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)v=Reflect.decorate(t,e,r,i);else for(var b=t.length-1;b>=0;b--)(c=t[b])&&(v=(_<3?c(v):_>3?c(e,r,v):c(e,r))||v);return _>3&&v&&Object.defineProperty(e,r,v),v},h=this&&this.__param||function(t,e){return function(r,i){e(r,i,t)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;var S=y(3734),p=y(643),o=y(511),a=y(2585),u=function(t){function e(r,i,c){var _=t.call(this)||this;return _.content=0,_.combinedData="",_.fg=r.fg,_.bg=r.bg,_.combinedData=i,_._width=c,_}return d(e,t),e.prototype.isCombined=function(){return 2097152},e.prototype.getWidth=function(){return this._width},e.prototype.getChars=function(){return this.combinedData},e.prototype.getCode=function(){return 2097151},e.prototype.setFromCharData=function(r){throw new Error("not implemented")},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(S.AttributeData);s.JoinedCellData=u;var n=function(){function t(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new o.CellData}return t.prototype.register=function(e){var r={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(r),r.id},t.prototype.deregister=function(e){for(var r=0;r<this._characterJoiners.length;r++)if(this._characterJoiners[r].id===e)return this._characterJoiners.splice(r,1),!0;return!1},t.prototype.getJoinedCharacters=function(e){if(0===this._characterJoiners.length)return[];var r=this._bufferService.buffer.lines.get(e);if(!r||0===r.length)return[];for(var i=[],c=r.translateToString(!0),_=0,v=0,b=0,C=r.getFg(0),g=r.getBg(0),m=0;m<r.getTrimmedLength();m++)if(r.loadCell(m,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==C||this._workCell.bg!==g){if(m-_>1)for(var E=this._getJoinedRanges(c,b,v,r,_),L=0;L<E.length;L++)i.push(E[L]);_=m,b=v,C=this._workCell.fg,g=this._workCell.bg}v+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-_>1)for(E=this._getJoinedRanges(c,b,v,r,_),L=0;L<E.length;L++)i.push(E[L]);return i},t.prototype._getJoinedRanges=function(e,r,i,c,_){var v=e.substring(r,i),b=[];try{b=this._characterJoiners[0].handler(v)}catch(E){console.error(E)}for(var C=1;C<this._characterJoiners.length;C++)try{for(var g=this._characterJoiners[C].handler(v),m=0;m<g.length;m++)t._mergeRanges(b,g[m])}catch(E){console.error(E)}return this._stringRangesToCellRanges(b,c,_),b},t.prototype._stringRangesToCellRanges=function(e,r,i){var c=0,_=!1,v=0,b=e[c];if(b){for(var C=i;C<this._bufferService.cols;C++){var g=r.getWidth(C),m=r.getString(C).length||p.WHITESPACE_CELL_CHAR.length;if(0!==g){if(!_&&b[0]<=v&&(b[0]=C,_=!0),b[1]<=v){if(b[1]=C,!(b=e[++c]))break;b[0]<=v?(b[0]=C,_=!0):_=!1}v+=m}}b&&(b[1]=this._bufferService.cols)}},t._mergeRanges=function(e,r){for(var i=!1,c=0;c<e.length;c++){var _=e[c];if(i){if(r[1]<=_[0])return e[c-1][1]=r[1],e;if(r[1]<=_[1])return e[c-1][1]=Math.max(r[1],_[1]),e.splice(c,1),e;e.splice(c,1),c--}else{if(r[1]<=_[0])return e.splice(c,0,r),e;if(r[1]<=_[1])return _[0]=Math.min(r[0],_[0]),e;r[0]<_[1]&&(_[0]=Math.min(r[0],_[0]),i=!0)}}return i?e[e.length-1][1]=r[1]:e.push(r),e},t=f([h(0,a.IBufferService)],t)}();s.CharacterJoinerService=n},5114:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0;var y=function(){function l(d){this._textarea=d}return Object.defineProperty(l.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),l}();s.CoreBrowserService=y},7641:function(W,s,y){var l,d=this&&this.__extends||(l=function(n,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}l(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(n,t,e,r){var i,c=arguments.length,_=c<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_=Reflect.decorate(n,t,e,r);else for(var v=n.length-1;v>=0;v--)(i=n[v])&&(_=(c<3?i(_):c>3?i(t,e,_):i(t,e))||_);return c>3&&_&&Object.defineProperty(t,e,_),_},h=this&&this.__param||function(n,t){return function(e,r){t(e,r,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Decoration=s.DecorationService=void 0;var S=y(8460),p=y(844),o=y(2585),a=function(n){function t(e){var r=n.call(this)||this;return r._instantiationService=e,r._decorations=[],r}return d(t,n),t.prototype.attachToDom=function(e,r){var i=this;this._renderService=r,this._screenElement=e,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),e.appendChild(this._container),this.register(this._renderService.onRenderedBufferChange(function(){return i.refresh()})),this.register(this._renderService.onDimensionsChange(function(){return i.refresh(!0)}))},t.prototype.registerDecoration=function(e){var r=this;if(!e.marker.isDisposed&&this._container){var i=this._instantiationService.createInstance(u,e,this._container);return this._decorations.push(i),i.onDispose(function(){return r._decorations.splice(r._decorations.indexOf(i),1)}),this._queueRefresh(),i}},t.prototype._queueRefresh=function(){var e=this;void 0===this._animationFrame&&(this._animationFrame=window.requestAnimationFrame(function(){e.refresh(),e._animationFrame=void 0}))},t.prototype.refresh=function(e){if(this._renderService)for(var r=0,i=this._decorations;r<i.length;r++)i[r].render(this._renderService,e)},t.prototype.dispose=function(){for(var e=0,r=this._decorations;e<r.length;e++)r[e].dispose();this._screenElement&&this._container&&this._screenElement.contains(this._container)&&this._screenElement.removeChild(this._container)},f([h(0,o.IInstantiationService)],t)}(p.Disposable);s.DecorationService=a;var u=function(n){function t(e,r,i){var c,_=n.call(this)||this;return _._container=r,_._bufferService=i,_.isDisposed=!1,_._onDispose=new S.EventEmitter,_._onRender=new S.EventEmitter,_.x=null!==(c=e.x)&&void 0!==c?c:0,_._marker=e.marker,_._marker.onDispose(function(){return _.dispose()}),_.anchor=e.anchor||"left",_.width=e.width||1,_.height=e.height||1,_}return d(t,n),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"marker",{get:function(){return this._marker},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),t.prototype.render=function(e,r){this._element&&!r||this._createElement(e,r),this._container&&this._element&&!this._container.contains(this._element)&&this._container.append(this._element),this._refreshStyle(e),this._element&&this._onRender.fire(this._element)},t.prototype._createElement=function(e,r){r&&this._element&&this._container.contains(this._element)&&this._container.removeChild(this._element),this._element=document.createElement("div"),this._element.classList.add("xterm-decoration"),this._element.style.width=this.width*e.dimensions.actualCellWidth+"px",this._element.style.height=this.height*e.dimensions.actualCellHeight+"px",this._element.style.top=(this.marker.line-this._bufferService.buffers.active.ydisp)*e.dimensions.actualCellHeight+"px",this._element.style.lineHeight=e.dimensions.actualCellHeight+"px",this.x&&this.x>this._bufferService.cols&&(this._element.style.display="none"),"right"===this.anchor?this._element.style.right=this.x?this.x*e.dimensions.actualCellWidth+"px":"":this._element.style.left=this.x?this.x*e.dimensions.actualCellWidth+"px":""},t.prototype._refreshStyle=function(e){if(this._element){var r=this.marker.line-this._bufferService.buffers.active.ydisp;r<0||r>this._bufferService.rows?this._element.style.display="none":(this._element.style.top=r*e.dimensions.actualCellHeight+"px",this._element.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block")}},t.prototype.dispose=function(){this.isDisposed||(this._element&&this._container.contains(this._element)&&this._container.removeChild(this._element),this.isDisposed=!0,this._onDispose.fire())},f([h(2,o.IBufferService)],t)}(p.Disposable);s.Decoration=u},8934:function(W,s,y){var l=this&&this.__decorate||function(p,o,a,u){var n,t=arguments.length,e=t<3?o:null===u?u=Object.getOwnPropertyDescriptor(o,a):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(p,o,a,u);else for(var r=p.length-1;r>=0;r--)(n=p[r])&&(e=(t<3?n(e):t>3?n(o,a,e):n(o,a))||e);return t>3&&e&&Object.defineProperty(o,a,e),e},d=this&&this.__param||function(p,o){return function(a,u){o(a,u,p)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;var f=y(4725),h=y(9806),S=function(){function p(o,a){this._renderService=o,this._charSizeService=a}return p.prototype.getCoords=function(o,a,u,n,t){return(0,h.getCoords)(o,a,u,n,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,t)},p.prototype.getRawByteCoords=function(o,a,u,n){var t=this.getCoords(o,a,u,n);return(0,h.getRawByteCoords)(t)},l([d(0,f.IRenderService),d(1,f.ICharSizeService)],p)}();s.MouseService=S},3230:function(W,s,y){var l,d=this&&this.__extends||(l=function(r,i){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,_){c.__proto__=_}||function(c,_){for(var v in _)Object.prototype.hasOwnProperty.call(_,v)&&(c[v]=_[v])})(r,i)},function(r,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function c(){this.constructor=r}l(r,i),r.prototype=null===i?Object.create(i):(c.prototype=i.prototype,new c)}),f=this&&this.__decorate||function(r,i,c,_){var v,b=arguments.length,C=b<3?i:null===_?_=Object.getOwnPropertyDescriptor(i,c):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(r,i,c,_);else for(var g=r.length-1;g>=0;g--)(v=r[g])&&(C=(b<3?v(C):b>3?v(i,c,C):v(i,c))||C);return b>3&&C&&Object.defineProperty(i,c,C),C},h=this&&this.__param||function(r,i){return function(c,_){i(c,_,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;var S=y(6193),p=y(8460),o=y(844),a=y(5596),u=y(3656),n=y(2585),t=y(4725),e=function(r){function i(c,_,v,b,C,g){var m=r.call(this)||this;if(m._renderer=c,m._rowCount=_,m._charSizeService=C,m._isPaused=!1,m._needsFullRefresh=!1,m._isNextRenderRedrawOnly=!0,m._needsSelectionRefresh=!1,m._canvasWidth=0,m._canvasHeight=0,m._selectionState={start:void 0,end:void 0,columnSelectMode:!1},m._onDimensionsChange=new p.EventEmitter,m._onRender=new p.EventEmitter,m._onRefreshRequest=new p.EventEmitter,m.register({dispose:function(){return m._renderer.dispose()}}),m._renderDebouncer=new S.RenderDebouncer(function(L,B){return m._renderRows(L,B)}),m.register(m._renderDebouncer),m._screenDprMonitor=new a.ScreenDprMonitor,m._screenDprMonitor.setListener(function(){return m.onDevicePixelRatioChange()}),m.register(m._screenDprMonitor),m.register(g.onResize(function(){return m._fullRefresh()})),m.register(g.buffers.onBufferActivate(function(){var L;return null===(L=m._renderer)||void 0===L?void 0:L.clear()})),m.register(b.onOptionChange(function(){return m._renderer.onOptionsChanged()})),m.register(m._charSizeService.onCharSizeChange(function(){return m.onCharSizeChanged()})),m._renderer.onRequestRedraw(function(L){return m.refreshRows(L.start,L.end,!0)}),m.register((0,u.addDisposableDomListener)(window,"resize",function(){return m.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var E=new IntersectionObserver(function(L){return m._onIntersectionChange(L[L.length-1])},{threshold:0});E.observe(v),m.register({dispose:function(){return E.disconnect()}})}return m}return d(i,r),Object.defineProperty(i.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),i.prototype._onIntersectionChange=function(c){this._isPaused=void 0===c.isIntersecting?0===c.intersectionRatio:!c.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},i.prototype.refreshRows=function(c,_,v){void 0===v&&(v=!1),this._isPaused?this._needsFullRefresh=!0:(v||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(c,_,this._rowCount))},i.prototype._renderRows=function(c,_){this._renderer.renderRows(c,_),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:c,end:_}),this._isNextRenderRedrawOnly=!0},i.prototype.resize=function(c,_){this._rowCount=_,this._fireOnCanvasResize()},i.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},i.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},i.prototype.dispose=function(){r.prototype.dispose.call(this)},i.prototype.setRenderer=function(c){var _=this;this._renderer.dispose(),this._renderer=c,this._renderer.onRequestRedraw(function(v){return _.refreshRows(v.start,v.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},i.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},i.prototype.clearTextureAtlas=function(){var c,_;null===(_=null===(c=this._renderer)||void 0===c?void 0:c.clearTextureAtlas)||void 0===_||_.call(c),this._fullRefresh()},i.prototype.setColors=function(c){this._renderer.setColors(c),this._fullRefresh()},i.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},i.prototype.onResize=function(c,_){this._renderer.onResize(c,_),this._fullRefresh()},i.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},i.prototype.onBlur=function(){this._renderer.onBlur()},i.prototype.onFocus=function(){this._renderer.onFocus()},i.prototype.onSelectionChanged=function(c,_,v){this._selectionState.start=c,this._selectionState.end=_,this._selectionState.columnSelectMode=v,this._renderer.onSelectionChanged(c,_,v)},i.prototype.onCursorMove=function(){this._renderer.onCursorMove()},i.prototype.clear=function(){this._renderer.clear()},f([h(3,n.IOptionsService),h(4,t.ICharSizeService),h(5,n.IBufferService)],i)}(o.Disposable);s.RenderService=e},9312:function(W,s,y){var l,d=this&&this.__extends||(l=function(b,C){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var E in m)Object.prototype.hasOwnProperty.call(m,E)&&(g[E]=m[E])})(b,C)},function(b,C){if("function"!=typeof C&&null!==C)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function g(){this.constructor=b}l(b,C),b.prototype=null===C?Object.create(C):(g.prototype=C.prototype,new g)}),f=this&&this.__decorate||function(b,C,g,m){var E,L=arguments.length,B=L<3?C:null===m?m=Object.getOwnPropertyDescriptor(C,g):m;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)B=Reflect.decorate(b,C,g,m);else for(var k=b.length-1;k>=0;k--)(E=b[k])&&(B=(L<3?E(B):L>3?E(C,g,B):E(C,g))||B);return L>3&&B&&Object.defineProperty(C,g,B),B},h=this&&this.__param||function(b,C){return function(g,m){C(g,m,b)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;var S=y(6114),p=y(456),o=y(511),a=y(8460),u=y(4725),n=y(2585),t=y(9806),e=y(9504),r=y(844),i=y(4841),c=String.fromCharCode(160),_=new RegExp(c,"g"),v=function(b){function C(g,m,E,L,B,k,w,x){var O=b.call(this)||this;return O._element=g,O._screenElement=m,O._linkifier=E,O._bufferService=L,O._coreService=B,O._mouseService=k,O._optionsService=w,O._renderService=x,O._dragScrollAmount=0,O._enabled=!0,O._workCell=new o.CellData,O._mouseDownTimeStamp=0,O._oldHasSelection=!1,O._oldSelectionStart=void 0,O._oldSelectionEnd=void 0,O._onLinuxMouseSelection=O.register(new a.EventEmitter),O._onRedrawRequest=O.register(new a.EventEmitter),O._onSelectionChange=O.register(new a.EventEmitter),O._onRequestScrollLines=O.register(new a.EventEmitter),O._mouseMoveListener=function(D){return O._onMouseMove(D)},O._mouseUpListener=function(D){return O._onMouseUp(D)},O._coreService.onUserInput(function(){O.hasSelection&&O.clearSelection()}),O._trimListener=O._bufferService.buffer.lines.onTrim(function(D){return O._onTrim(D)}),O.register(O._bufferService.buffers.onBufferActivate(function(D){return O._onBufferActivate(D)})),O.enable(),O._model=new p.SelectionModel(O._bufferService),O._activeSelectionMode=0,O}return d(C,b),Object.defineProperty(C.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),C.prototype.dispose=function(){this._removeMouseDownListeners()},C.prototype.reset=function(){this.clearSelection()},C.prototype.disable=function(){this.clearSelection(),this._enabled=!1},C.prototype.enable=function(){this._enabled=!0},Object.defineProperty(C.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"hasSelection",{get:function(){var g=this._model.finalSelectionStart,m=this._model.finalSelectionEnd;return!(!g||!m||g[0]===m[0]&&g[1]===m[1])},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"selectionText",{get:function(){var g=this._model.finalSelectionStart,m=this._model.finalSelectionEnd;if(!g||!m)return"";var E=this._bufferService.buffer,L=[];if(3===this._activeSelectionMode){if(g[0]===m[0])return"";for(var B=g[1];B<=m[1];B++){var k=E.translateBufferLineToString(B,!0,g[0],m[0]);L.push(k)}}else{for(L.push(E.translateBufferLineToString(g[1],!0,g[0],g[1]===m[1]?m[0]:void 0)),B=g[1]+1;B<=m[1]-1;B++){var x=E.lines.get(B);k=E.translateBufferLineToString(B,!0),(null==x?void 0:x.isWrapped)?L[L.length-1]+=k:L.push(k)}g[1]!==m[1]&&(x=E.lines.get(m[1]),k=E.translateBufferLineToString(m[1],!0,0,m[0]),x&&x.isWrapped?L[L.length-1]+=k:L.push(k))}return L.map(function(O){return O.replace(_," ")}).join(S.isWindows?"\r\n":"\n")},enumerable:!1,configurable:!0}),C.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},C.prototype.refresh=function(g){var m=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return m._refresh()})),S.isLinux&&g&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},C.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})},C.prototype._isClickInSelection=function(g){var m=this._getMouseBufferCoords(g),E=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;return!!(E&&L&&m)&&this._areCoordsInSelection(m,E,L)},C.prototype._areCoordsInSelection=function(g,m,E){return g[1]>m[1]&&g[1]<E[1]||m[1]===E[1]&&g[1]===m[1]&&g[0]>=m[0]&&g[0]<E[0]||m[1]<E[1]&&g[1]===E[1]&&g[0]<E[0]||m[1]<E[1]&&g[1]===m[1]&&g[0]>=m[0]},C.prototype._selectWordAtCursor=function(g,m){var E,L,B=null===(L=null===(E=this._linkifier.currentLink)||void 0===E?void 0:E.link)||void 0===L?void 0:L.range;if(B)return this._model.selectionStart=[B.start.x-1,B.start.y-1],this._model.selectionStartLength=(0,i.getRangeLength)(B,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var k=this._getMouseBufferCoords(g);return!!k&&(this._selectWordAt(k,m),this._model.selectionEnd=void 0,!0)},C.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},C.prototype.selectLines=function(g,m){this._model.clearSelection(),g=Math.max(g,0),m=Math.min(m,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,g],this._model.selectionEnd=[this._bufferService.cols,m],this.refresh(),this._onSelectionChange.fire()},C.prototype._onTrim=function(g){this._model.onTrim(g)&&this.refresh()},C.prototype._getMouseBufferCoords=function(g){var m=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(m)return m[0]--,m[1]--,m[1]+=this._bufferService.buffer.ydisp,m},C.prototype._getMouseEventScrollAmount=function(g){var m=(0,t.getCoordsRelativeToElement)(g,this._screenElement)[1],E=this._renderService.dimensions.canvasHeight;return m>=0&&m<=E?0:(m>E&&(m-=E),m=Math.min(Math.max(m,-50),50),(m/=50)/Math.abs(m)+Math.round(14*m))},C.prototype.shouldForceSelection=function(g){return S.isMac?g.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:g.shiftKey},C.prototype.onMouseDown=function(g){if(this._mouseDownTimeStamp=g.timeStamp,(2!==g.button||!this.hasSelection)&&0===g.button){if(!this._enabled){if(!this.shouldForceSelection(g))return;g.stopPropagation()}g.preventDefault(),this._dragScrollAmount=0,this._enabled&&g.shiftKey?this._onIncrementalClick(g):1===g.detail?this._onSingleClick(g):2===g.detail?this._onDoubleClick(g):3===g.detail&&this._onTripleClick(g),this._addMouseDownListeners(),this.refresh(!0)}},C.prototype._addMouseDownListeners=function(){var g=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return g._dragScroll()},50)},C.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},C.prototype._onIncrementalClick=function(g){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(g))},C.prototype._onSingleClick=function(g){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(g)?3:0,this._model.selectionStart=this._getMouseBufferCoords(g),this._model.selectionStart){this._model.selectionEnd=void 0;var m=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);m&&m.length!==this._model.selectionStart[0]&&0===m.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}},C.prototype._onDoubleClick=function(g){this._selectWordAtCursor(g,!0)&&(this._activeSelectionMode=1)},C.prototype._onTripleClick=function(g){var m=this._getMouseBufferCoords(g);m&&(this._activeSelectionMode=2,this._selectLineAt(m[1]))},C.prototype.shouldColumnSelect=function(g){return g.altKey&&!(S.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)},C.prototype._onMouseMove=function(g){if(g.stopImmediatePropagation(),this._model.selectionStart){var m=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(g),this._model.selectionEnd){2===this._activeSelectionMode?this._model.selectionEnd[0]=this._model.selectionEnd[1]<this._model.selectionStart[1]?0:this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(g),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var E=this._bufferService.buffer;if(this._model.selectionEnd[1]<E.lines.length){var L=E.lines.get(this._model.selectionEnd[1]);L&&0===L.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}m&&m[0]===this._model.selectionEnd[0]&&m[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},C.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var g=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(g.ydisp+this._bufferService.rows,g.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=g.ydisp),this.refresh()}},C.prototype._onMouseUp=function(g){var m=g.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&m<500&&g.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var E=this._mouseService.getCoords(g,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(E&&void 0!==E[0]&&void 0!==E[1]){var L=(0,e.moveToCellSequence)(E[0]-1,E[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(L,!0)}}}else this._fireEventIfSelectionChanged()},C.prototype._fireEventIfSelectionChanged=function(){var g=this._model.finalSelectionStart,m=this._model.finalSelectionEnd,E=!(!g||!m||g[0]===m[0]&&g[1]===m[1]);E?g&&m&&(this._oldSelectionStart&&this._oldSelectionEnd&&g[0]===this._oldSelectionStart[0]&&g[1]===this._oldSelectionStart[1]&&m[0]===this._oldSelectionEnd[0]&&m[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(g,m,E)):this._oldHasSelection&&this._fireOnSelectionChange(g,m,E)},C.prototype._fireOnSelectionChange=function(g,m,E){this._oldSelectionStart=g,this._oldSelectionEnd=m,this._oldHasSelection=E,this._onSelectionChange.fire()},C.prototype._onBufferActivate=function(g){var m=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=g.activeBuffer.lines.onTrim(function(E){return m._onTrim(E)})},C.prototype._convertViewportColToCharacterIndex=function(g,m){for(var E=m[0],L=0;m[0]>=L;L++){var B=g.loadCell(L,this._workCell).getChars().length;0===this._workCell.getWidth()?E--:B>1&&m[0]!==L&&(E+=B-1)}return E},C.prototype.setSelection=function(g,m,E){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[g,m],this._model.selectionStartLength=E,this.refresh()},C.prototype.rightClickSelect=function(g){this._isClickInSelection(g)||(this._selectWordAtCursor(g,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},C.prototype._getWordAt=function(g,m,E,L){if(void 0===E&&(E=!0),void 0===L&&(L=!0),!(g[0]>=this._bufferService.cols)){var B=this._bufferService.buffer,k=B.lines.get(g[1]);if(k){var w=B.translateBufferLineToString(g[1],!1),x=this._convertViewportColToCharacterIndex(k,g),O=x,D=g[0]-x,P=0,F=0,N=0,z=0;if(" "===w.charAt(x)){for(;x>0&&" "===w.charAt(x-1);)x--;for(;O<w.length&&" "===w.charAt(O+1);)O++}else{var X=g[0],M=g[0];0===k.getWidth(X)&&(P++,X--),2===k.getWidth(M)&&(F++,M++);var j=k.getString(M).length;for(j>1&&(z+=j-1,O+=j-1);X>0&&x>0&&!this._isCharWordSeparator(k.loadCell(X-1,this._workCell));){k.loadCell(X-1,this._workCell);var R=this._workCell.getChars().length;0===this._workCell.getWidth()?(P++,X--):R>1&&(N+=R-1,x-=R-1),x--,X--}for(;M<k.length&&O+1<w.length&&!this._isCharWordSeparator(k.loadCell(M+1,this._workCell));){k.loadCell(M+1,this._workCell);var T=this._workCell.getChars().length;2===this._workCell.getWidth()?(F++,M++):T>1&&(z+=T-1,O+=T-1),O++,M++}}O++;var A=x+D-P+N,q=Math.min(this._bufferService.cols,O-x+P+F-N-z);if(m||""!==w.slice(x,O).trim()){if(E&&0===A&&32!==k.getCodePoint(0)){var K=B.lines.get(g[1]-1);if(K&&k.isWrapped&&32!==K.getCodePoint(this._bufferService.cols-1)){var V=this._getWordAt([this._bufferService.cols-1,g[1]-1],!1,!0,!1);if(V){var Y=this._bufferService.cols-V.start;A-=Y,q+=Y}}}if(L&&A+q===this._bufferService.cols&&32!==k.getCodePoint(this._bufferService.cols-1)){var J=B.lines.get(g[1]+1);if((null==J?void 0:J.isWrapped)&&32!==J.getCodePoint(0)){var ne=this._getWordAt([0,g[1]+1],!1,!1,!0);ne&&(q+=ne.length)}}return{start:A,length:q}}}}},C.prototype._selectWordAt=function(g,m){var E=this._getWordAt(g,m);if(E){for(;E.start<0;)E.start+=this._bufferService.cols,g[1]--;this._model.selectionStart=[E.start,g[1]],this._model.selectionStartLength=E.length}},C.prototype._selectToWordAt=function(g){var m=this._getWordAt(g,!0);if(m){for(var E=g[1];m.start<0;)m.start+=this._bufferService.cols,E--;if(!this._model.areSelectionValuesReversed())for(;m.start+m.length>this._bufferService.cols;)m.length-=this._bufferService.cols,E++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?m.start:m.start+m.length,E]}},C.prototype._isCharWordSeparator=function(g){return 0!==g.getWidth()&&this._optionsService.rawOptions.wordSeparator.indexOf(g.getChars())>=0},C.prototype._selectLineAt=function(g){var m=this._bufferService.buffer.getWrappedRangeForLine(g);this._model.selectionStart=[0,m.first],this._model.selectionEnd=[this._bufferService.cols,m.last],this._model.selectionStartLength=0},f([h(3,n.IBufferService),h(4,n.ICoreService),h(5,u.IMouseService),h(6,n.IOptionsService),h(7,u.IRenderService)],C)}(r.Disposable);s.SelectionService=v},4725:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.ICharacterJoinerService=s.ISoundService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;var l=y(8343);s.ICharSizeService=(0,l.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,l.createDecorator)("CoreBrowserService"),s.IMouseService=(0,l.createDecorator)("MouseService"),s.IRenderService=(0,l.createDecorator)("RenderService"),s.ISelectionService=(0,l.createDecorator)("SelectionService"),s.ISoundService=(0,l.createDecorator)("SoundService"),s.ICharacterJoinerService=(0,l.createDecorator)("CharacterJoinerService"),s.IDecorationService=(0,l.createDecorator)("DecorationService")},357:function(W,s,y){var l=this&&this.__decorate||function(S,p,o,a){var u,n=arguments.length,t=n<3?p:null===a?a=Object.getOwnPropertyDescriptor(p,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)t=Reflect.decorate(S,p,o,a);else for(var e=S.length-1;e>=0;e--)(u=S[e])&&(t=(n<3?u(t):n>3?u(p,o,t):u(p,o))||t);return n>3&&t&&Object.defineProperty(p,o,t),t},d=this&&this.__param||function(S,p){return function(o,a){p(o,a,S)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SoundService=void 0;var f=y(2585),h=function(){function S(p){this._optionsService=p}return Object.defineProperty(S,"audioContext",{get:function(){if(!S._audioContext){var p=window.AudioContext||window.webkitAudioContext;if(!p)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;S._audioContext=new p}return S._audioContext},enumerable:!1,configurable:!0}),S.prototype.playBellSound=function(){var p=S.audioContext;if(p){var o=p.createBufferSource();p.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.rawOptions.bellSound)),function(a){o.buffer=a,o.connect(p.destination),o.start(0)})}},S.prototype._base64ToArrayBuffer=function(p){for(var o=window.atob(p),a=o.length,u=new Uint8Array(a),n=0;n<a;n++)u[n]=o.charCodeAt(n);return u.buffer},S.prototype._removeMimeType=function(p){return p.split(",")[1]},S=l([d(0,f.IOptionsService)],S)}();s.SoundService=h},6349:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;var l=y(8460),d=function(){function f(h){this._maxLength=h,this.onDeleteEmitter=new l.EventEmitter,this.onInsertEmitter=new l.EventEmitter,this.onTrimEmitter=new l.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(f.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"maxLength",{get:function(){return this._maxLength},set:function(h){if(this._maxLength!==h){for(var S=new Array(h),p=0;p<Math.min(h,this.length);p++)S[p]=this._array[this._getCyclicIndex(p)];this._array=S,this._maxLength=h,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._length},set:function(h){if(h>this._length)for(var S=this._length;S<h;S++)this._array[S]=void 0;this._length=h},enumerable:!1,configurable:!0}),f.prototype.get=function(h){return this._array[this._getCyclicIndex(h)]},f.prototype.set=function(h,S){this._array[this._getCyclicIndex(h)]=S},f.prototype.push=function(h){this._array[this._getCyclicIndex(this._length)]=h,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},f.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(f.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),f.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},f.prototype.splice=function(h,S){for(var p=[],o=2;o<arguments.length;o++)p[o-2]=arguments[o];if(S){for(var a=h;a<this._length-S;a++)this._array[this._getCyclicIndex(a)]=this._array[this._getCyclicIndex(a+S)];this._length-=S,this.onDeleteEmitter.fire({index:h,amount:S})}for(a=this._length-1;a>=h;a--)this._array[this._getCyclicIndex(a+p.length)]=this._array[this._getCyclicIndex(a)];for(a=0;a<p.length;a++)this._array[this._getCyclicIndex(h+a)]=p[a];if(p.length&&this.onInsertEmitter.fire({index:h,amount:p.length}),this._length+p.length>this._maxLength){var u=this._length+p.length-this._maxLength;this._startIndex+=u,this._length=this._maxLength,this.onTrimEmitter.fire(u)}else this._length+=p.length},f.prototype.trimStart=function(h){h>this._length&&(h=this._length),this._startIndex+=h,this._length-=h,this.onTrimEmitter.fire(h)},f.prototype.shiftElements=function(h,S,p){if(!(S<=0)){if(h<0||h>=this._length)throw new Error("start argument out of range");if(h+p<0)throw new Error("Cannot shift elements in list beyond index 0");if(p>0){for(var o=S-1;o>=0;o--)this.set(h+o+p,this.get(h+o));var a=h+S+p-this._length;if(a>0)for(this._length+=a;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(o=0;o<S;o++)this.set(h+o+p,this.get(h+o))}},f.prototype._getCyclicIndex=function(h){return(this._startIndex+h)%this._maxLength},f}();s.CircularList=d},1439:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function y(l,d){if(void 0===d&&(d=5),"object"!=typeof l)return l;var f=Array.isArray(l)?[]:{};for(var h in l)f[h]=d<=1?l[h]:l[h]&&y(l[h],d-1);return f}},8969:function(W,s,y){var l,d=this&&this.__extends||(l=function(g,m){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,L){E.__proto__=L}||function(E,L){for(var B in L)Object.prototype.hasOwnProperty.call(L,B)&&(E[B]=L[B])})(g,m)},function(g,m){if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function E(){this.constructor=g}l(g,m),g.prototype=null===m?Object.create(m):(E.prototype=m.prototype,new E)});Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;var f=y(844),h=y(2585),S=y(4348),p=y(7866),o=y(744),a=y(7302),u=y(6975),n=y(8460),t=y(1753),e=y(3730),r=y(1480),i=y(7994),c=y(9282),_=y(5435),v=y(5981),b=!1,C=function(g){function m(E){var L=g.call(this)||this;return L._onBinary=new n.EventEmitter,L._onData=new n.EventEmitter,L._onLineFeed=new n.EventEmitter,L._onResize=new n.EventEmitter,L._onScroll=new n.EventEmitter,L._instantiationService=new S.InstantiationService,L.optionsService=new a.OptionsService(E),L._instantiationService.setService(h.IOptionsService,L.optionsService),L._bufferService=L.register(L._instantiationService.createInstance(o.BufferService)),L._instantiationService.setService(h.IBufferService,L._bufferService),L._logService=L._instantiationService.createInstance(p.LogService),L._instantiationService.setService(h.ILogService,L._logService),L.coreService=L.register(L._instantiationService.createInstance(u.CoreService,function(){return L.scrollToBottom()})),L._instantiationService.setService(h.ICoreService,L.coreService),L.coreMouseService=L._instantiationService.createInstance(t.CoreMouseService),L._instantiationService.setService(h.ICoreMouseService,L.coreMouseService),L._dirtyRowService=L._instantiationService.createInstance(e.DirtyRowService),L._instantiationService.setService(h.IDirtyRowService,L._dirtyRowService),L.unicodeService=L._instantiationService.createInstance(r.UnicodeService),L._instantiationService.setService(h.IUnicodeService,L.unicodeService),L._charsetService=L._instantiationService.createInstance(i.CharsetService),L._instantiationService.setService(h.ICharsetService,L._charsetService),L._inputHandler=new _.InputHandler(L._bufferService,L._charsetService,L.coreService,L._dirtyRowService,L._logService,L.optionsService,L.coreMouseService,L.unicodeService),L.register((0,n.forwardEvent)(L._inputHandler.onLineFeed,L._onLineFeed)),L.register(L._inputHandler),L.register((0,n.forwardEvent)(L._bufferService.onResize,L._onResize)),L.register((0,n.forwardEvent)(L.coreService.onData,L._onData)),L.register((0,n.forwardEvent)(L.coreService.onBinary,L._onBinary)),L.register(L.optionsService.onOptionChange(function(B){return L._updateOptions(B)})),L.register(L._bufferService.onScroll(function(B){L._onScroll.fire({position:L._bufferService.buffer.ydisp,source:0}),L._dirtyRowService.markRangeDirty(L._bufferService.buffer.scrollTop,L._bufferService.buffer.scrollBottom)})),L.register(L._inputHandler.onScroll(function(B){L._onScroll.fire({position:L._bufferService.buffer.ydisp,source:0}),L._dirtyRowService.markRangeDirty(L._bufferService.buffer.scrollTop,L._bufferService.buffer.scrollBottom)})),L._writeBuffer=new v.WriteBuffer(function(B,k){return L._inputHandler.parse(B,k)}),L}return d(m,g),Object.defineProperty(m.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onScroll",{get:function(){var E=this;return this._onScrollApi||(this._onScrollApi=new n.EventEmitter,this.register(this._onScroll.event(function(L){var B;null===(B=E._onScrollApi)||void 0===B||B.fire(L.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"options",{get:function(){return this.optionsService.options},set:function(E){for(var L in E)this.optionsService.options[L]=E[L]},enumerable:!1,configurable:!0}),m.prototype.dispose=function(){var E;this._isDisposed||(g.prototype.dispose.call(this),null===(E=this._windowsMode)||void 0===E||E.dispose(),this._windowsMode=void 0)},m.prototype.write=function(E,L){this._writeBuffer.write(E,L)},m.prototype.writeSync=function(E,L){this._logService.logLevel<=h.LogLevelEnum.WARN&&!b&&(this._logService.warn("writeSync is unreliable and will be removed soon."),b=!0),this._writeBuffer.writeSync(E,L)},m.prototype.resize=function(E,L){isNaN(E)||isNaN(L)||(E=Math.max(E,o.MINIMUM_COLS),L=Math.max(L,o.MINIMUM_ROWS),this._bufferService.resize(E,L))},m.prototype.scroll=function(E,L){void 0===L&&(L=!1),this._bufferService.scroll(E,L)},m.prototype.scrollLines=function(E,L,B){this._bufferService.scrollLines(E,L,B)},m.prototype.scrollPages=function(E){this._bufferService.scrollPages(E)},m.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},m.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},m.prototype.scrollToLine=function(E){this._bufferService.scrollToLine(E)},m.prototype.registerEscHandler=function(E,L){return this._inputHandler.registerEscHandler(E,L)},m.prototype.registerDcsHandler=function(E,L){return this._inputHandler.registerDcsHandler(E,L)},m.prototype.registerCsiHandler=function(E,L){return this._inputHandler.registerCsiHandler(E,L)},m.prototype.registerOscHandler=function(E,L){return this._inputHandler.registerOscHandler(E,L)},m.prototype._setup=function(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()},m.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},m.prototype._updateOptions=function(E){var L;switch(E){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.rawOptions.windowsMode?this._enableWindowsMode():(null===(L=this._windowsMode)||void 0===L||L.dispose(),this._windowsMode=void 0)}},m.prototype._enableWindowsMode=function(){var E=this;if(!this._windowsMode){var L=[];L.push(this.onLineFeed(c.updateWindowsModeWrappedState.bind(null,this._bufferService))),L.push(this.registerCsiHandler({final:"H"},function(){return(0,c.updateWindowsModeWrappedState)(E._bufferService),!1})),this._windowsMode={dispose:function(){for(var B=0,k=L;B<k.length;B++)k[B].dispose()}}}},m}(f.Disposable);s.CoreTerminal=C},8460:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0;var y=function(){function l(){this._listeners=[],this._disposed=!1}return Object.defineProperty(l.prototype,"event",{get:function(){var d=this;return this._event||(this._event=function(f){return d._listeners.push(f),{dispose:function(){if(!d._disposed)for(var h=0;h<d._listeners.length;h++)if(d._listeners[h]===f)return void d._listeners.splice(h,1)}}}),this._event},enumerable:!1,configurable:!0}),l.prototype.fire=function(d,f){for(var h=[],S=0;S<this._listeners.length;S++)h.push(this._listeners[S]);for(S=0;S<h.length;S++)h[S].call(void 0,d,f)},l.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},l}();s.EventEmitter=y,s.forwardEvent=function(l,d){return l(function(f){return d.fire(f)})}},5435:function(W,s,y){var l,d=this&&this.__extends||(l=function(B,k){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,x){w.__proto__=x}||function(w,x){for(var O in x)Object.prototype.hasOwnProperty.call(x,O)&&(w[O]=x[O])})(B,k)},function(B,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function w(){this.constructor=B}l(B,k),B.prototype=null===k?Object.create(k):(w.prototype=k.prototype,new w)});Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;var f,B,h=y(2584),S=y(7116),p=y(2015),o=y(844),a=y(8273),u=y(482),n=y(8437),t=y(8460),e=y(643),r=y(511),i=y(3734),c=y(2585),_=y(6242),v=y(6351),b=y(5941),C={"(":0,")":1,"*":2,"+":3,"-":1,".":2},g=131072;function m(B,k){if(B>24)return k.setWinLines||!1;switch(B){case 1:return!!k.restoreWin;case 2:return!!k.minimizeWin;case 3:return!!k.setWinPosition;case 4:return!!k.setWinSizePixels;case 5:return!!k.raiseWin;case 6:return!!k.lowerWin;case 7:return!!k.refreshWin;case 8:return!!k.setWinSizeChars;case 9:return!!k.maximizeWin;case 10:return!!k.fullscreenWin;case 11:return!!k.getWinState;case 13:return!!k.getWinPosition;case 14:return!!k.getWinSizePixels;case 15:return!!k.getScreenSizePixels;case 16:return!!k.getCellSizePixels;case 18:return!!k.getWinSizeChars;case 19:return!!k.getScreenSizeChars;case 20:return!!k.getIconTitle;case 21:return!!k.getWinTitle;case 22:return!!k.pushTitle;case 23:return!!k.popTitle;case 24:return!!k.setWinLines}return!1}(B=f=s.WindowsOptionsReportType||(s.WindowsOptionsReportType={}))[B.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",B[B.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS";var E=function(){function B(k,w,x,O){this._bufferService=k,this._coreService=w,this._logService=x,this._optionsService=O,this._data=new Uint32Array(0)}return B.prototype.hook=function(k){this._data=new Uint32Array(0)},B.prototype.put=function(k,w,x){this._data=(0,a.concat)(this._data,k.subarray(w,x))},B.prototype.unhook=function(k){if(!k)return this._data=new Uint32Array(0),!0;var w=(0,u.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),w){case'"q':this._coreService.triggerDataEvent(h.C0.ESC+'P1$r0"q'+h.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(h.C0.ESC+'P1$r61;1"p'+h.C0.ESC+"\\");break;case"r":this._coreService.triggerDataEvent(h.C0.ESC+"P1$r"+(this._bufferService.buffer.scrollTop+1)+";"+(this._bufferService.buffer.scrollBottom+1)+"r"+h.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(h.C0.ESC+"P1$r0m"+h.C0.ESC+"\\");break;case" q":var O={block:2,underline:4,bar:6}[this._optionsService.rawOptions.cursorStyle];this._coreService.triggerDataEvent(h.C0.ESC+"P1$r"+(O-=this._optionsService.rawOptions.cursorBlink?1:0)+" q"+h.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",w),this._coreService.triggerDataEvent(h.C0.ESC+"P0$r"+h.C0.ESC+"\\")}return!0},B}(),L=function(B){function k(w,x,O,D,P,F,N,z,X){void 0===X&&(X=new p.EscapeSequenceParser);var M=B.call(this)||this;M._bufferService=w,M._charsetService=x,M._coreService=O,M._dirtyRowService=D,M._logService=P,M._optionsService=F,M._coreMouseService=N,M._unicodeService=z,M._parser=X,M._parseBuffer=new Uint32Array(4096),M._stringDecoder=new u.StringToUtf32,M._utf8Decoder=new u.Utf8ToUtf32,M._workCell=new r.CellData,M._windowTitle="",M._iconName="",M._windowTitleStack=[],M._iconNameStack=[],M._curAttrData=n.DEFAULT_ATTR_DATA.clone(),M._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),M._onRequestBell=new t.EventEmitter,M._onRequestRefreshRows=new t.EventEmitter,M._onRequestReset=new t.EventEmitter,M._onRequestSendFocus=new t.EventEmitter,M._onRequestSyncScrollBar=new t.EventEmitter,M._onRequestWindowsOptionsReport=new t.EventEmitter,M._onA11yChar=new t.EventEmitter,M._onA11yTab=new t.EventEmitter,M._onCursorMove=new t.EventEmitter,M._onLineFeed=new t.EventEmitter,M._onScroll=new t.EventEmitter,M._onTitleChange=new t.EventEmitter,M._onColor=new t.EventEmitter,M._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},M._specialColors=[256,257,258],M.register(M._parser),M._activeBuffer=M._bufferService.buffer,M.register(M._bufferService.buffers.onBufferActivate(function(A){return M._activeBuffer=A.activeBuffer})),M._parser.setCsiHandlerFallback(function(A,q){M._logService.debug("Unknown CSI code: ",{identifier:M._parser.identToString(A),params:q.toArray()})}),M._parser.setEscHandlerFallback(function(A){M._logService.debug("Unknown ESC code: ",{identifier:M._parser.identToString(A)})}),M._parser.setExecuteHandlerFallback(function(A){M._logService.debug("Unknown EXECUTE code: ",{code:A})}),M._parser.setOscHandlerFallback(function(A,q,K){M._logService.debug("Unknown OSC code: ",{identifier:A,action:q,data:K})}),M._parser.setDcsHandlerFallback(function(A,q,K){"HOOK"===q&&(K=K.toArray()),M._logService.debug("Unknown DCS code: ",{identifier:M._parser.identToString(A),action:q,payload:K})}),M._parser.setPrintHandler(function(A,q,K){return M.print(A,q,K)}),M._parser.registerCsiHandler({final:"@"},function(A){return M.insertChars(A)}),M._parser.registerCsiHandler({intermediates:" ",final:"@"},function(A){return M.scrollLeft(A)}),M._parser.registerCsiHandler({final:"A"},function(A){return M.cursorUp(A)}),M._parser.registerCsiHandler({intermediates:" ",final:"A"},function(A){return M.scrollRight(A)}),M._parser.registerCsiHandler({final:"B"},function(A){return M.cursorDown(A)}),M._parser.registerCsiHandler({final:"C"},function(A){return M.cursorForward(A)}),M._parser.registerCsiHandler({final:"D"},function(A){return M.cursorBackward(A)}),M._parser.registerCsiHandler({final:"E"},function(A){return M.cursorNextLine(A)}),M._parser.registerCsiHandler({final:"F"},function(A){return M.cursorPrecedingLine(A)}),M._parser.registerCsiHandler({final:"G"},function(A){return M.cursorCharAbsolute(A)}),M._parser.registerCsiHandler({final:"H"},function(A){return M.cursorPosition(A)}),M._parser.registerCsiHandler({final:"I"},function(A){return M.cursorForwardTab(A)}),M._parser.registerCsiHandler({final:"J"},function(A){return M.eraseInDisplay(A)}),M._parser.registerCsiHandler({prefix:"?",final:"J"},function(A){return M.eraseInDisplay(A)}),M._parser.registerCsiHandler({final:"K"},function(A){return M.eraseInLine(A)}),M._parser.registerCsiHandler({prefix:"?",final:"K"},function(A){return M.eraseInLine(A)}),M._parser.registerCsiHandler({final:"L"},function(A){return M.insertLines(A)}),M._parser.registerCsiHandler({final:"M"},function(A){return M.deleteLines(A)}),M._parser.registerCsiHandler({final:"P"},function(A){return M.deleteChars(A)}),M._parser.registerCsiHandler({final:"S"},function(A){return M.scrollUp(A)}),M._parser.registerCsiHandler({final:"T"},function(A){return M.scrollDown(A)}),M._parser.registerCsiHandler({final:"X"},function(A){return M.eraseChars(A)}),M._parser.registerCsiHandler({final:"Z"},function(A){return M.cursorBackwardTab(A)}),M._parser.registerCsiHandler({final:"`"},function(A){return M.charPosAbsolute(A)}),M._parser.registerCsiHandler({final:"a"},function(A){return M.hPositionRelative(A)}),M._parser.registerCsiHandler({final:"b"},function(A){return M.repeatPrecedingCharacter(A)}),M._parser.registerCsiHandler({final:"c"},function(A){return M.sendDeviceAttributesPrimary(A)}),M._parser.registerCsiHandler({prefix:">",final:"c"},function(A){return M.sendDeviceAttributesSecondary(A)}),M._parser.registerCsiHandler({final:"d"},function(A){return M.linePosAbsolute(A)}),M._parser.registerCsiHandler({final:"e"},function(A){return M.vPositionRelative(A)}),M._parser.registerCsiHandler({final:"f"},function(A){return M.hVPosition(A)}),M._parser.registerCsiHandler({final:"g"},function(A){return M.tabClear(A)}),M._parser.registerCsiHandler({final:"h"},function(A){return M.setMode(A)}),M._parser.registerCsiHandler({prefix:"?",final:"h"},function(A){return M.setModePrivate(A)}),M._parser.registerCsiHandler({final:"l"},function(A){return M.resetMode(A)}),M._parser.registerCsiHandler({prefix:"?",final:"l"},function(A){return M.resetModePrivate(A)}),M._parser.registerCsiHandler({final:"m"},function(A){return M.charAttributes(A)}),M._parser.registerCsiHandler({final:"n"},function(A){return M.deviceStatus(A)}),M._parser.registerCsiHandler({prefix:"?",final:"n"},function(A){return M.deviceStatusPrivate(A)}),M._parser.registerCsiHandler({intermediates:"!",final:"p"},function(A){return M.softReset(A)}),M._parser.registerCsiHandler({intermediates:" ",final:"q"},function(A){return M.setCursorStyle(A)}),M._parser.registerCsiHandler({final:"r"},function(A){return M.setScrollRegion(A)}),M._parser.registerCsiHandler({final:"s"},function(A){return M.saveCursor(A)}),M._parser.registerCsiHandler({final:"t"},function(A){return M.windowOptions(A)}),M._parser.registerCsiHandler({final:"u"},function(A){return M.restoreCursor(A)}),M._parser.registerCsiHandler({intermediates:"'",final:"}"},function(A){return M.insertColumns(A)}),M._parser.registerCsiHandler({intermediates:"'",final:"~"},function(A){return M.deleteColumns(A)}),M._parser.setExecuteHandler(h.C0.BEL,function(){return M.bell()}),M._parser.setExecuteHandler(h.C0.LF,function(){return M.lineFeed()}),M._parser.setExecuteHandler(h.C0.VT,function(){return M.lineFeed()}),M._parser.setExecuteHandler(h.C0.FF,function(){return M.lineFeed()}),M._parser.setExecuteHandler(h.C0.CR,function(){return M.carriageReturn()}),M._parser.setExecuteHandler(h.C0.BS,function(){return M.backspace()}),M._parser.setExecuteHandler(h.C0.HT,function(){return M.tab()}),M._parser.setExecuteHandler(h.C0.SO,function(){return M.shiftOut()}),M._parser.setExecuteHandler(h.C0.SI,function(){return M.shiftIn()}),M._parser.setExecuteHandler(h.C1.IND,function(){return M.index()}),M._parser.setExecuteHandler(h.C1.NEL,function(){return M.nextLine()}),M._parser.setExecuteHandler(h.C1.HTS,function(){return M.tabSet()}),M._parser.registerOscHandler(0,new _.OscHandler(function(A){return M.setTitle(A),M.setIconName(A),!0})),M._parser.registerOscHandler(1,new _.OscHandler(function(A){return M.setIconName(A)})),M._parser.registerOscHandler(2,new _.OscHandler(function(A){return M.setTitle(A)})),M._parser.registerOscHandler(4,new _.OscHandler(function(A){return M.setOrReportIndexedColor(A)})),M._parser.registerOscHandler(10,new _.OscHandler(function(A){return M.setOrReportFgColor(A)})),M._parser.registerOscHandler(11,new _.OscHandler(function(A){return M.setOrReportBgColor(A)})),M._parser.registerOscHandler(12,new _.OscHandler(function(A){return M.setOrReportCursorColor(A)})),M._parser.registerOscHandler(104,new _.OscHandler(function(A){return M.restoreIndexedColor(A)})),M._parser.registerOscHandler(110,new _.OscHandler(function(A){return M.restoreFgColor(A)})),M._parser.registerOscHandler(111,new _.OscHandler(function(A){return M.restoreBgColor(A)})),M._parser.registerOscHandler(112,new _.OscHandler(function(A){return M.restoreCursorColor(A)})),M._parser.registerEscHandler({final:"7"},function(){return M.saveCursor()}),M._parser.registerEscHandler({final:"8"},function(){return M.restoreCursor()}),M._parser.registerEscHandler({final:"D"},function(){return M.index()}),M._parser.registerEscHandler({final:"E"},function(){return M.nextLine()}),M._parser.registerEscHandler({final:"H"},function(){return M.tabSet()}),M._parser.registerEscHandler({final:"M"},function(){return M.reverseIndex()}),M._parser.registerEscHandler({final:"="},function(){return M.keypadApplicationMode()}),M._parser.registerEscHandler({final:">"},function(){return M.keypadNumericMode()}),M._parser.registerEscHandler({final:"c"},function(){return M.fullReset()}),M._parser.registerEscHandler({final:"n"},function(){return M.setgLevel(2)}),M._parser.registerEscHandler({final:"o"},function(){return M.setgLevel(3)}),M._parser.registerEscHandler({final:"|"},function(){return M.setgLevel(3)}),M._parser.registerEscHandler({final:"}"},function(){return M.setgLevel(2)}),M._parser.registerEscHandler({final:"~"},function(){return M.setgLevel(1)}),M._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return M.selectDefaultCharset()}),M._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return M.selectDefaultCharset()});var j=function(A){R._parser.registerEscHandler({intermediates:"(",final:A},function(){return M.selectCharset("("+A)}),R._parser.registerEscHandler({intermediates:")",final:A},function(){return M.selectCharset(")"+A)}),R._parser.registerEscHandler({intermediates:"*",final:A},function(){return M.selectCharset("*"+A)}),R._parser.registerEscHandler({intermediates:"+",final:A},function(){return M.selectCharset("+"+A)}),R._parser.registerEscHandler({intermediates:"-",final:A},function(){return M.selectCharset("-"+A)}),R._parser.registerEscHandler({intermediates:".",final:A},function(){return M.selectCharset("."+A)}),R._parser.registerEscHandler({intermediates:"/",final:A},function(){return M.selectCharset("/"+A)})},R=this;for(var T in S.CHARSETS)j(T);return M._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return M.screenAlignmentPattern()}),M._parser.setErrorHandler(function(A){return M._logService.error("Parsing error: ",A),A}),M._parser.registerDcsHandler({intermediates:"$",final:"q"},new E(M._bufferService,M._coreService,M._logService,M._optionsService)),M}return d(k,B),Object.defineProperty(k.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),k.prototype.dispose=function(){B.prototype.dispose.call(this)},k.prototype._preserveStack=function(w,x,O,D){this._parseStack.paused=!0,this._parseStack.cursorStartX=w,this._parseStack.cursorStartY=x,this._parseStack.decodedLength=O,this._parseStack.position=D},k.prototype._logSlowResolvingAsync=function(w){this._logService.logLevel<=c.LogLevelEnum.WARN&&Promise.race([w,new Promise(function(x,O){return setTimeout(function(){return O("#SLOW_TIMEOUT")},5e3)})]).catch(function(x){if("#SLOW_TIMEOUT"!==x)throw x;console.warn("async parser handler taking longer than 5000 ms")})},k.prototype.parse=function(w,x){var O,D=this._activeBuffer.x,P=this._activeBuffer.y,F=0,N=this._parseStack.paused;if(N){if(O=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,x))return this._logSlowResolvingAsync(O),O;D=this._parseStack.cursorStartX,P=this._parseStack.cursorStartY,this._parseStack.paused=!1,w.length>g&&(F=this._parseStack.position+g)}if(this._logService.logLevel<=c.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+("string"==typeof w?' "'+w+'"':' "'+Array.prototype.map.call(w,function(j){return String.fromCharCode(j)}).join("")+'"'),"string"==typeof w?w.split("").map(function(j){return j.charCodeAt(0)}):w),this._parseBuffer.length<w.length&&this._parseBuffer.length<g&&(this._parseBuffer=new Uint32Array(Math.min(w.length,g))),N||this._dirtyRowService.clearRange(),w.length>g)for(var z=F;z<w.length;z+=g){var X=z+g<w.length?z+g:w.length,M="string"==typeof w?this._stringDecoder.decode(w.substring(z,X),this._parseBuffer):this._utf8Decoder.decode(w.subarray(z,X),this._parseBuffer);if(O=this._parser.parse(this._parseBuffer,M))return this._preserveStack(D,P,M,z),this._logSlowResolvingAsync(O),O}else if(!N&&(M="string"==typeof w?this._stringDecoder.decode(w,this._parseBuffer):this._utf8Decoder.decode(w,this._parseBuffer),O=this._parser.parse(this._parseBuffer,M)))return this._preserveStack(D,P,M,0),this._logSlowResolvingAsync(O),O;this._activeBuffer.x===D&&this._activeBuffer.y===P||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},k.prototype.print=function(w,x,O){var D,P,F=this._charsetService.charset,N=this._optionsService.rawOptions.screenReaderMode,z=this._bufferService.cols,X=this._coreService.decPrivateModes.wraparound,M=this._coreService.modes.insertMode,j=this._curAttrData,R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&O-x>0&&2===R.getWidth(this._activeBuffer.x-1)&&R.setCellFromCodePoint(this._activeBuffer.x-1,0,1,j.fg,j.bg,j.extended);for(var T=x;T<O;++T){if(P=this._unicodeService.wcwidth(D=w[T]),D<127&&F){var A=F[String.fromCharCode(D)];A&&(D=A.charCodeAt(0))}if(N&&this._onA11yChar.fire((0,u.stringFromCodePoint)(D)),P||!this._activeBuffer.x){if(this._activeBuffer.x+P-1>=z)if(X){for(;this._activeBuffer.x<z;)R.setCellFromCodePoint(this._activeBuffer.x++,0,1,j.fg,j.bg,j.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=z-1,2===P)continue;if(M&&(R.insertCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(j),j),2===R.getWidth(z-1)&&R.setCellFromCodePoint(z-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,j.fg,j.bg,j.extended)),R.setCellFromCodePoint(this._activeBuffer.x++,D,P,j.fg,j.bg,j.extended),P>0)for(;--P;)R.setCellFromCodePoint(this._activeBuffer.x++,0,0,j.fg,j.bg,j.extended)}else R.getWidth(this._activeBuffer.x-1)?R.addCodepointToCell(this._activeBuffer.x-1,D):R.addCodepointToCell(this._activeBuffer.x-2,D)}O-x>0&&(R.loadCell(this._activeBuffer.x-1,this._workCell),this._parser.precedingCodepoint=2===this._workCell.getWidth()||this._workCell.getCode()>65535?0:this._workCell.isCombined()?this._workCell.getChars().charCodeAt(0):this._workCell.content),this._activeBuffer.x<z&&O-x>0&&0===R.getWidth(this._activeBuffer.x)&&!R.hasContent(this._activeBuffer.x)&&R.setCellFromCodePoint(this._activeBuffer.x,0,1,j.fg,j.bg,j.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},k.prototype.registerCsiHandler=function(w,x){var O=this;return this._parser.registerCsiHandler(w,"t"!==w.final||w.prefix||w.intermediates?x:function(D){return!m(D.params[0],O._optionsService.rawOptions.windowOptions)||x(D)})},k.prototype.registerDcsHandler=function(w,x){return this._parser.registerDcsHandler(w,new v.DcsHandler(x))},k.prototype.registerEscHandler=function(w,x){return this._parser.registerEscHandler(w,x)},k.prototype.registerOscHandler=function(w,x){return this._parser.registerOscHandler(w,new _.OscHandler(x))},k.prototype.bell=function(){return this._onRequestBell.fire(),!0},k.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},k.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},k.prototype.backspace=function(){var w;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(0===this._activeBuffer.x&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(null===(w=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))||void 0===w?void 0:w.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);x.hasWidth(this._activeBuffer.x)&&!x.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},k.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var w=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-w),!0},k.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},k.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},k.prototype._restrictCursor=function(w){void 0===w&&(w=this._bufferService.cols-1),this._activeBuffer.x=Math.min(w,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},k.prototype._setCursor=function(w,x){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=w,this._activeBuffer.y=this._activeBuffer.scrollTop+x):(this._activeBuffer.x=w,this._activeBuffer.y=x),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},k.prototype._moveCursor=function(w,x){this._restrictCursor(),this._setCursor(this._activeBuffer.x+w,this._activeBuffer.y+x)},k.prototype.cursorUp=function(w){var x=this._activeBuffer.y-this._activeBuffer.scrollTop;return this._moveCursor(0,x>=0?-Math.min(x,w.params[0]||1):-(w.params[0]||1)),!0},k.prototype.cursorDown=function(w){var x=this._activeBuffer.scrollBottom-this._activeBuffer.y;return this._moveCursor(0,x>=0?Math.min(x,w.params[0]||1):w.params[0]||1),!0},k.prototype.cursorForward=function(w){return this._moveCursor(w.params[0]||1,0),!0},k.prototype.cursorBackward=function(w){return this._moveCursor(-(w.params[0]||1),0),!0},k.prototype.cursorNextLine=function(w){return this.cursorDown(w),this._activeBuffer.x=0,!0},k.prototype.cursorPrecedingLine=function(w){return this.cursorUp(w),this._activeBuffer.x=0,!0},k.prototype.cursorCharAbsolute=function(w){return this._setCursor((w.params[0]||1)-1,this._activeBuffer.y),!0},k.prototype.cursorPosition=function(w){return this._setCursor(w.length>=2?(w.params[1]||1)-1:0,(w.params[0]||1)-1),!0},k.prototype.charPosAbsolute=function(w){return this._setCursor((w.params[0]||1)-1,this._activeBuffer.y),!0},k.prototype.hPositionRelative=function(w){return this._moveCursor(w.params[0]||1,0),!0},k.prototype.linePosAbsolute=function(w){return this._setCursor(this._activeBuffer.x,(w.params[0]||1)-1),!0},k.prototype.vPositionRelative=function(w){return this._moveCursor(0,w.params[0]||1),!0},k.prototype.hVPosition=function(w){return this.cursorPosition(w),!0},k.prototype.tabClear=function(w){var x=w.params[0];return 0===x?delete this._activeBuffer.tabs[this._activeBuffer.x]:3===x&&(this._activeBuffer.tabs={}),!0},k.prototype.cursorForwardTab=function(w){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var x=w.params[0]||1;x--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},k.prototype.cursorBackwardTab=function(w){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var x=w.params[0]||1;x--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},k.prototype._eraseInBufferLine=function(w,x,O,D){void 0===D&&(D=!1);var P=this._activeBuffer.lines.get(this._activeBuffer.ybase+w);P.replaceCells(x,O,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),D&&(P.isWrapped=!1)},k.prototype._resetBufferLine=function(w){var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+w);x.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+w),x.isWrapped=!1},k.prototype.eraseInDisplay=function(w){var x;switch(this._restrictCursor(this._bufferService.cols),w.params[0]){case 0:for(this._dirtyRowService.markDirty(x=this._activeBuffer.y),this._eraseInBufferLine(x++,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x);x<this._bufferService.rows;x++)this._resetBufferLine(x);this._dirtyRowService.markDirty(x);break;case 1:for(this._dirtyRowService.markDirty(x=this._activeBuffer.y),this._eraseInBufferLine(x,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(x+1).isWrapped=!1);x--;)this._resetBufferLine(x);this._dirtyRowService.markDirty(0);break;case 2:for(this._dirtyRowService.markDirty((x=this._bufferService.rows)-1);x--;)this._resetBufferLine(x);this._dirtyRowService.markDirty(0);break;case 3:var O=this._activeBuffer.lines.length-this._bufferService.rows;O>0&&(this._activeBuffer.lines.trimStart(O),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-O,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-O,0),this._onScroll.fire(0))}return!0},k.prototype.eraseInLine=function(w){switch(this._restrictCursor(this._bufferService.cols),w.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},k.prototype.insertLines=function(w){this._restrictCursor();var x=w.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var O=this._activeBuffer.ybase+this._activeBuffer.y,P=this._bufferService.rows-1+this._activeBuffer.ybase-(this._bufferService.rows-1-this._activeBuffer.scrollBottom)+1;x--;)this._activeBuffer.lines.splice(P-1,1),this._activeBuffer.lines.splice(O,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},k.prototype.deleteLines=function(w){this._restrictCursor();var x=w.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var O,D=this._activeBuffer.ybase+this._activeBuffer.y;for(O=this._bufferService.rows-1+this._activeBuffer.ybase-(O=this._bufferService.rows-1-this._activeBuffer.scrollBottom);x--;)this._activeBuffer.lines.splice(D,1),this._activeBuffer.lines.splice(O,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},k.prototype.insertChars=function(w){this._restrictCursor();var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return x&&(x.insertCells(this._activeBuffer.x,w.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},k.prototype.deleteChars=function(w){this._restrictCursor();var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return x&&(x.deleteCells(this._activeBuffer.x,w.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},k.prototype.scrollUp=function(w){for(var x=w.params[0]||1;x--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},k.prototype.scrollDown=function(w){for(var x=w.params[0]||1;x--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},k.prototype.scrollLeft=function(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var x=w.params[0]||1,O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){var D=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);D.deleteCells(0,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),D.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},k.prototype.scrollRight=function(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var x=w.params[0]||1,O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){var D=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);D.insertCells(0,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),D.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},k.prototype.insertColumns=function(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var x=w.params[0]||1,O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){var D=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);D.insertCells(this._activeBuffer.x,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),D.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},k.prototype.deleteColumns=function(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var x=w.params[0]||1,O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){var D=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);D.deleteCells(this._activeBuffer.x,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),D.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},k.prototype.eraseChars=function(w){this._restrictCursor();var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return x&&(x.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(w.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},k.prototype.repeatPrecedingCharacter=function(w){if(!this._parser.precedingCodepoint)return!0;for(var x=w.params[0]||1,O=new Uint32Array(x),D=0;D<x;++D)O[D]=this._parser.precedingCodepoint;return this.print(O,0,O.length),!0},k.prototype.sendDeviceAttributesPrimary=function(w){return w.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0},k.prototype.sendDeviceAttributesSecondary=function(w){return w.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(w.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0},k.prototype._is=function(w){return 0===(this._optionsService.rawOptions.termName+"").indexOf(w)},k.prototype.setMode=function(w){for(var x=0;x<w.length;x++)4===w.params[x]&&(this._coreService.modes.insertMode=!0);return!0},k.prototype.setModePrivate=function(w){for(var x=0;x<w.length;x++)switch(w.params[x]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,S.DEFAULT_CHARSET),this._charsetService.setgCharset(1,S.DEFAULT_CHARSET),this._charsetService.setgCharset(2,S.DEFAULT_CHARSET),this._charsetService.setgCharset(3,S.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},k.prototype.resetMode=function(w){for(var x=0;x<w.length;x++)4===w.params[x]&&(this._coreService.modes.insertMode=!1);return!0},k.prototype.resetModePrivate=function(w){for(var x=0;x<w.length;x++)switch(w.params[x]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===w.params[x]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},k.prototype._updateAttrColor=function(w,x,O,D,P){return 2===x?(w|=50331648,w&=-16777216,w|=i.AttributeData.fromColorRGB([O,D,P])):5===x&&(w&=-50331904,w|=33554432|255&O),w},k.prototype._extractColor=function(w,x,O){var D=[0,0,-1,0,0,0],P=0,F=0;do{if(D[F+P]=w.params[x+F],w.hasSubParams(x+F)){var N=w.getSubParams(x+F),z=0;do{5===D[1]&&(P=1),D[F+z+1+P]=N[z]}while(++z<N.length&&z+F+1+P<D.length);break}if(5===D[1]&&F+P>=2||2===D[1]&&F+P>=5)break;D[1]&&(P=1)}while(++F+x<w.length&&F+P<D.length);for(z=2;z<D.length;++z)-1===D[z]&&(D[z]=0);switch(D[0]){case 38:O.fg=this._updateAttrColor(O.fg,D[1],D[3],D[4],D[5]);break;case 48:O.bg=this._updateAttrColor(O.bg,D[1],D[3],D[4],D[5]);break;case 58:O.extended=O.extended.clone(),O.extended.underlineColor=this._updateAttrColor(O.extended.underlineColor,D[1],D[3],D[4],D[5])}return F},k.prototype._processUnderline=function(w,x){x.extended=x.extended.clone(),(!~w||w>5)&&(w=1),x.extended.underlineStyle=w,x.fg|=268435456,0===w&&(x.fg&=-268435457),x.updateExtended()},k.prototype.charAttributes=function(w){if(1===w.length&&0===w.params[0])return this._curAttrData.fg=n.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=n.DEFAULT_ATTR_DATA.bg,!0;for(var x,O=w.length,D=this._curAttrData,P=0;P<O;P++)(x=w.params[P])>=30&&x<=37?(D.fg&=-50331904,D.fg|=16777216|x-30):x>=40&&x<=47?(D.bg&=-50331904,D.bg|=16777216|x-40):x>=90&&x<=97?(D.fg&=-50331904,D.fg|=16777224|x-90):x>=100&&x<=107?(D.bg&=-50331904,D.bg|=16777224|x-100):0===x?(D.fg=n.DEFAULT_ATTR_DATA.fg,D.bg=n.DEFAULT_ATTR_DATA.bg):1===x?D.fg|=134217728:3===x?D.bg|=67108864:4===x?(D.fg|=268435456,this._processUnderline(w.hasSubParams(P)?w.getSubParams(P)[0]:1,D)):5===x?D.fg|=536870912:7===x?D.fg|=67108864:8===x?D.fg|=1073741824:9===x?D.fg|=2147483648:2===x?D.bg|=134217728:21===x?this._processUnderline(2,D):22===x?(D.fg&=-134217729,D.bg&=-134217729):23===x?D.bg&=-67108865:24===x?D.fg&=-268435457:25===x?D.fg&=-536870913:27===x?D.fg&=-67108865:28===x?D.fg&=-1073741825:29===x?D.fg&=2147483647:39===x?(D.fg&=-67108864,D.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):49===x?(D.bg&=-67108864,D.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):38===x||48===x||58===x?P+=this._extractColor(w,P,D):59===x?(D.extended=D.extended.clone(),D.extended.underlineColor=-1,D.updateExtended()):100===x?(D.fg&=-67108864,D.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,D.bg&=-67108864,D.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",x);return!0},k.prototype.deviceStatus=function(w){switch(w.params[0]){case 5:this._coreService.triggerDataEvent(h.C0.ESC+"[0n");break;case 6:this._coreService.triggerDataEvent(h.C0.ESC+"["+(this._activeBuffer.y+1)+";"+(this._activeBuffer.x+1)+"R")}return!0},k.prototype.deviceStatusPrivate=function(w){return 6===w.params[0]&&this._coreService.triggerDataEvent(h.C0.ESC+"[?"+(this._activeBuffer.y+1)+";"+(this._activeBuffer.x+1)+"R"),!0},k.prototype.softReset=function(w){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},k.prototype.setCursorStyle=function(w){var x=w.params[0]||1;switch(x){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}return this._optionsService.options.cursorBlink=x%2==1,!0},k.prototype.setScrollRegion=function(w){var x,O=w.params[0]||1;return(w.length<2||(x=w.params[1])>this._bufferService.rows||0===x)&&(x=this._bufferService.rows),x>O&&(this._activeBuffer.scrollTop=O-1,this._activeBuffer.scrollBottom=x-1,this._setCursor(0,0)),!0},k.prototype.windowOptions=function(w){if(!m(w.params[0],this._optionsService.rawOptions.windowOptions))return!0;var x=w.length>1?w.params[1]:0;switch(w.params[0]){case 14:2!==x&&this._onRequestWindowsOptionsReport.fire(f.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(f.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(h.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:0!==x&&2!==x||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==x&&1!==x||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==x&&2!==x||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==x&&1!==x||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},k.prototype.saveCursor=function(w){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},k.prototype.restoreCursor=function(w){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},k.prototype.setTitle=function(w){return this._windowTitle=w,this._onTitleChange.fire(w),!0},k.prototype.setIconName=function(w){return this._iconName=w,!0},k.prototype.setOrReportIndexedColor=function(w){for(var x=[],O=w.split(";");O.length>1;){var D=O.shift(),P=O.shift();if(/^\d+$/.exec(D)){var F=parseInt(D);if(0<=F&&F<256)if("?"===P)x.push({type:0,index:F});else{var N=(0,b.parseColor)(P);N&&x.push({type:1,index:F,color:N})}}}return x.length&&this._onColor.fire(x),!0},k.prototype._setOrReportSpecialColor=function(w,x){for(var O=w.split(";"),D=0;D<O.length&&!(x>=this._specialColors.length);++D,++x)if("?"===O[D])this._onColor.fire([{type:0,index:this._specialColors[x]}]);else{var P=(0,b.parseColor)(O[D]);P&&this._onColor.fire([{type:1,index:this._specialColors[x],color:P}])}return!0},k.prototype.setOrReportFgColor=function(w){return this._setOrReportSpecialColor(w,0)},k.prototype.setOrReportBgColor=function(w){return this._setOrReportSpecialColor(w,1)},k.prototype.setOrReportCursorColor=function(w){return this._setOrReportSpecialColor(w,2)},k.prototype.restoreIndexedColor=function(w){if(!w)return this._onColor.fire([{type:2}]),!0;for(var x=[],O=w.split(";"),D=0;D<O.length;++D)if(/^\d+$/.exec(O[D])){var P=parseInt(O[D]);0<=P&&P<256&&x.push({type:2,index:P})}return x.length&&this._onColor.fire(x),!0},k.prototype.restoreFgColor=function(w){return this._onColor.fire([{type:2,index:256}]),!0},k.prototype.restoreBgColor=function(w){return this._onColor.fire([{type:2,index:257}]),!0},k.prototype.restoreCursorColor=function(w){return this._onColor.fire([{type:2,index:258}]),!0},k.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},k.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},k.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},k.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,S.DEFAULT_CHARSET),!0},k.prototype.selectCharset=function(w){return 2!==w.length?(this.selectDefaultCharset(),!0):("/"===w[0]||this._charsetService.setgCharset(C[w[0]],S.CHARSETS[w[1]]||S.DEFAULT_CHARSET),!0)},k.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},k.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},k.prototype.reverseIndex=function(){return this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop?(this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)):(this._activeBuffer.y--,this._restrictCursor()),!0},k.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},k.prototype.reset=function(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()},k.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},k.prototype.setgLevel=function(w){return this._charsetService.setgLevel(w),!0},k.prototype.screenAlignmentPattern=function(){var w=new r.CellData;w.content=1<<22|"E".charCodeAt(0),w.fg=this._curAttrData.fg,w.bg=this._curAttrData.bg,this._setCursor(0,0);for(var x=0;x<this._bufferService.rows;++x){var D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y+x);D&&(D.fill(w),D.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},k}(o.Disposable);s.InputHandler=L},844:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.Disposable=void 0;var y=function(){function d(){this._disposables=[],this._isDisposed=!1}return d.prototype.dispose=function(){this._isDisposed=!0;for(var f=0,h=this._disposables;f<h.length;f++)h[f].dispose();this._disposables.length=0},d.prototype.register=function(f){return this._disposables.push(f),f},d.prototype.unregister=function(f){var h=this._disposables.indexOf(f);-1!==h&&this._disposables.splice(h,1)},d}();function l(d){for(var f=0,h=d;f<h.length;f++)h[f].dispose();d.length=0}s.Disposable=y,s.disposeArray=l,s.getDisposeArrayDisposable=function(d){return{dispose:function(){return l(d)}}}},6114:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.isSafari=s.isLegacyEdge=s.isFirefox=void 0;var y=typeof navigator>"u",l=y?"node":navigator.userAgent,d=y?"node":navigator.platform;s.isFirefox=l.includes("Firefox"),s.isLegacyEdge=l.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(l),s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),s.isIpad="iPad"===d,s.isIphone="iPhone"===d,s.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),s.isLinux=d.indexOf("Linux")>=0},8273:(W,s)=>{function y(l,d,f,h){if(void 0===f&&(f=0),void 0===h&&(h=l.length),f>=l.length)return l;h=h>=l.length?l.length:(l.length+h)%l.length;for(var S=f=(l.length+f)%l.length;S<h;++S)l[S]=d;return l}Object.defineProperty(s,"__esModule",{value:!0}),s.concat=s.fillFallback=s.fill=void 0,s.fill=function(l,d,f,h){return l.fill?l.fill(d,f,h):y(l,d,f,h)},s.fillFallback=y,s.concat=function(l,d){var f=new l.constructor(l.length+d.length);return f.set(l),f.set(d,l.length),f}},9282:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;var l=y(643);s.updateWindowsModeWrappedState=function(d){var f=d.buffer.lines.get(d.buffer.ybase+d.buffer.y-1),h=null==f?void 0:f.get(d.cols-1),S=d.buffer.lines.get(d.buffer.ybase+d.buffer.y);S&&h&&(S.isWrapped=h[l.CHAR_DATA_CODE_INDEX]!==l.NULL_CELL_CODE&&h[l.CHAR_DATA_CODE_INDEX]!==l.WHITESPACE_CELL_CODE)}},3734:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;var y=function(){function d(){this.fg=0,this.bg=0,this.extended=new l}return d.toColorRGB=function(f){return[f>>>16&255,f>>>8&255,255&f]},d.fromColorRGB=function(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]},d.prototype.clone=function(){var f=new d;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f},d.prototype.isInverse=function(){return 67108864&this.fg},d.prototype.isBold=function(){return 134217728&this.fg},d.prototype.isUnderline=function(){return 268435456&this.fg},d.prototype.isBlink=function(){return 536870912&this.fg},d.prototype.isInvisible=function(){return 1073741824&this.fg},d.prototype.isItalic=function(){return 67108864&this.bg},d.prototype.isDim=function(){return 134217728&this.bg},d.prototype.isStrikethrough=function(){return 2147483648&this.fg},d.prototype.getFgColorMode=function(){return 50331648&this.fg},d.prototype.getBgColorMode=function(){return 50331648&this.bg},d.prototype.isFgRGB=function(){return 50331648==(50331648&this.fg)},d.prototype.isBgRGB=function(){return 50331648==(50331648&this.bg)},d.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},d.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},d.prototype.isFgDefault=function(){return 0==(50331648&this.fg)},d.prototype.isBgDefault=function(){return 0==(50331648&this.bg)},d.prototype.isAttributeDefault=function(){return 0===this.fg&&0===this.bg},d.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},d.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},d.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},d.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},d.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},d.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},d.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()},d.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()},d.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()},d.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},d}();s.AttributeData=y;var l=function(){function d(f,h){void 0===f&&(f=0),void 0===h&&(h=-1),this.underlineStyle=f,this.underlineColor=h}return d.prototype.clone=function(){return new d(this.underlineStyle,this.underlineColor)},d.prototype.isEmpty=function(){return 0===this.underlineStyle},d}();s.ExtendedAttrs=l},9092:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferStringIterator=s.Buffer=s.MAX_BUFFER_SIZE=void 0;var l=y(6349),d=y(8437),f=y(511),h=y(643),S=y(4634),p=y(4863),o=y(7116),a=y(3734);s.MAX_BUFFER_SIZE=4294967295;var u=function(){function t(e,r,i){this._hasScrollback=e,this._optionsService=r,this._bufferService=i,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=d.DEFAULT_ATTR_DATA.clone(),this.savedCharset=o.DEFAULT_CHARSET,this.markers=[],this._nullCell=f.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]),this._whitespaceCell=f.CellData.fromCharData([0,h.WHITESPACE_CELL_CHAR,h.WHITESPACE_CELL_WIDTH,h.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return t.prototype.getNullCell=function(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new a.ExtendedAttrs),this._nullCell},t.prototype.getWhitespaceCell=function(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new a.ExtendedAttrs),this._whitespaceCell},t.prototype.getBlankLine=function(e,r){return new d.BufferLine(this._bufferService.cols,this.getNullCell(e),r)},Object.defineProperty(t.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCursorInViewport",{get:function(){var e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows},enumerable:!1,configurable:!0}),t.prototype._getCorrectBufferLength=function(e){if(!this._hasScrollback)return e;var r=e+this._optionsService.rawOptions.scrollback;return r>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:r},t.prototype.fillViewportRows=function(e){if(0===this.lines.length){void 0===e&&(e=d.DEFAULT_ATTR_DATA);for(var r=this._rows;r--;)this.lines.push(this.getBlankLine(e))}},t.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},t.prototype.resize=function(e,r){var i=this.getNullCell(d.DEFAULT_ATTR_DATA),c=this._getCorrectBufferLength(r);if(c>this.lines.maxLength&&(this.lines.maxLength=c),this.lines.length>0){if(this._cols<e)for(var _=0;_<this.lines.length;_++)this.lines.get(_).resize(e,i);var v=0;if(this._rows<r)for(var b=this._rows;b<r;b++)this.lines.length<r+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new d.BufferLine(e,i)):this.ybase>0&&this.lines.length<=this.ybase+this.y+v+1?(this.ybase--,v++,this.ydisp>0&&this.ydisp--):this.lines.push(new d.BufferLine(e,i)));else for(b=this._rows;b>r;b--)this.lines.length>r+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(c<this.lines.maxLength){var C=this.lines.length-c;C>0&&(this.lines.trimStart(C),this.ybase=Math.max(this.ybase-C,0),this.ydisp=Math.max(this.ydisp-C,0),this.savedY=Math.max(this.savedY-C,0)),this.lines.maxLength=c}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,r-1),v&&(this.y+=v),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=r-1,this._isReflowEnabled&&(this._reflow(e,r),this._cols>e))for(_=0;_<this.lines.length;_++)this.lines.get(_).resize(e,i);this._cols=e,this._rows=r},Object.defineProperty(t.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode},enumerable:!1,configurable:!0}),t.prototype._reflow=function(e,r){this._cols!==e&&(e>this._cols?this._reflowLarger(e,r):this._reflowSmaller(e,r))},t.prototype._reflowLarger=function(e,r){var i=(0,S.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(d.DEFAULT_ATTR_DATA));if(i.length>0){var c=(0,S.reflowLargerCreateNewLayout)(this.lines,i);(0,S.reflowLargerApplyNewLayout)(this.lines,c.layout),this._reflowLargerAdjustViewport(e,r,c.countRemoved)}},t.prototype._reflowLargerAdjustViewport=function(e,r,i){for(var c=this.getNullCell(d.DEFAULT_ATTR_DATA),_=i;_-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<r&&this.lines.push(new d.BufferLine(e,c))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-i,0)},t.prototype._reflowSmaller=function(e,r){for(var i=this.getNullCell(d.DEFAULT_ATTR_DATA),c=[],_=0,v=this.lines.length-1;v>=0;v--){var b=this.lines.get(v);if(!(!b||!b.isWrapped&&b.getTrimmedLength()<=e)){for(var C=[b];b.isWrapped&&v>0;)b=this.lines.get(--v),C.unshift(b);var g=this.ybase+this.y;if(!(g>=v&&g<v+C.length)){var m,E=C[C.length-1].getTrimmedLength(),L=(0,S.reflowSmallerGetNewLineLengths)(C,this._cols,e),B=L.length-C.length;m=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+B):Math.max(0,this.lines.length-this.lines.maxLength+B);for(var k=[],w=0;w<B;w++){var x=this.getBlankLine(d.DEFAULT_ATTR_DATA,!0);k.push(x)}k.length>0&&(c.push({start:v+C.length+_,newLines:k}),_+=k.length),C.push.apply(C,k);var O=L.length-1,D=L[O];0===D&&(D=L[--O]);for(var P=C.length-B-1,F=E;P>=0;){var N=Math.min(F,D);if(void 0===C[O])break;if(C[O].copyCellsFrom(C[P],F-N,D-N,N,!0),0==(D-=N)&&(D=L[--O]),0==(F-=N)){P--;var z=Math.max(P,0);F=(0,S.getWrappedLineTrimmedLength)(C,z,this._cols)}}for(w=0;w<C.length;w++)L[w]<e&&C[w].setCell(L[w],i);for(var X=B-m;X-- >0;)0===this.ybase?this.y<r-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+_)-r&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+B,this.ybase+r-1)}}}if(c.length>0){var M=[],j=[];for(w=0;w<this.lines.length;w++)j.push(this.lines.get(w));var R=this.lines.length,T=R-1,A=0,q=c[A];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+_);var K=0;for(w=Math.min(this.lines.maxLength-1,R+_-1);w>=0;w--)if(q&&q.start>T+K){for(var V=q.newLines.length-1;V>=0;V--)this.lines.set(w--,q.newLines[V]);w++,M.push({index:T+1,amount:q.newLines.length}),K+=q.newLines.length,q=c[++A]}else this.lines.set(w,j[T--]);var Y=0;for(w=M.length-1;w>=0;w--)M[w].index+=Y,this.lines.onInsertEmitter.fire(M[w]),Y+=M[w].amount;var J=Math.max(0,R+_-this.lines.maxLength);J>0&&this.lines.onTrimEmitter.fire(J)}},t.prototype.stringIndexToBufferIndex=function(e,r,i){for(void 0===i&&(i=!1);r;){var c=this.lines.get(e);if(!c)return[-1,-1];for(var _=i?c.getTrimmedLength():c.length,v=0;v<_;++v)if(c.get(v)[h.CHAR_DATA_WIDTH_INDEX]&&(r-=c.get(v)[h.CHAR_DATA_CHAR_INDEX].length||1),r<0)return[e,v];e++}return[e,0]},t.prototype.translateBufferLineToString=function(e,r,i,c){void 0===i&&(i=0);var _=this.lines.get(e);return _?_.translateToString(r,i,c):""},t.prototype.getWrappedRangeForLine=function(e){for(var r=e,i=e;r>0&&this.lines.get(r).isWrapped;)r--;for(;i+1<this.lines.length&&this.lines.get(i+1).isWrapped;)i++;return{first:r,last:i}},t.prototype.setupTabStops=function(e){for(null!=e?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0},t.prototype.prevStop=function(e){for(null==e&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e},t.prototype.nextStop=function(e){for(null==e&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e},t.prototype.clearMarkers=function(e){if(this._isClearing=!0,void 0!==e)for(var r=0;r<this.markers.length;r++)this.markers[r].line===e&&(this.markers[r].dispose(),this.markers.splice(r--,1));else{for(var i=0,c=this.markers;i<c.length;i++)c[i].dispose();this.markers=[]}this._isClearing=!1},t.prototype.addMarker=function(e){var r=this,i=new p.Marker(e);return this.markers.push(i),i.register(this.lines.onTrim(function(c){i.line-=c,i.line<0&&i.dispose()})),i.register(this.lines.onInsert(function(c){i.line>=c.index&&(i.line+=c.amount)})),i.register(this.lines.onDelete(function(c){i.line>=c.index&&i.line<c.index+c.amount&&i.dispose(),i.line>c.index&&(i.line-=c.amount)})),i.register(i.onDispose(function(){return r._removeMarker(i)})),i},t.prototype._removeMarker=function(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)},t.prototype.iterator=function(e,r,i,c,_){return new n(this,e,r,i,c,_)},t}();s.Buffer=u;var n=function(){function t(e,r,i,c,_,v){void 0===i&&(i=0),void 0===c&&(c=e.lines.length),void 0===_&&(_=0),void 0===v&&(v=0),this._buffer=e,this._trimRight=r,this._startIndex=i,this._endIndex=c,this._startOverscan=_,this._endOverscan=v,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return t.prototype.hasNext=function(){return this._current<this._endIndex},t.prototype.next=function(){var e=this._buffer.getWrappedRangeForLine(this._current);e.first<this._startIndex-this._startOverscan&&(e.first=this._startIndex-this._startOverscan),e.last>this._endIndex+this._endOverscan&&(e.last=this._endIndex+this._endOverscan),e.first=Math.max(e.first,0),e.last=Math.min(e.last,this._buffer.lines.length);for(var r="",i=e.first;i<=e.last;++i)r+=this._buffer.translateBufferLineToString(i,this._trimRight);return this._current=e.last+1,{range:e,content:r}},t}();s.BufferStringIterator=n},8437:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;var l=y(482),d=y(643),f=y(511),h=y(3734);s.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);var S=function(){function p(o,a,u){void 0===u&&(u=!1),this.isWrapped=u,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*o);for(var n=a||f.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]),t=0;t<o;++t)this.setCell(t,n);this.length=o}return p.prototype.get=function(o){var a=this._data[3*o+0],u=2097151&a;return[this._data[3*o+1],2097152&a?this._combined[o]:u?(0,l.stringFromCodePoint)(u):"",a>>22,2097152&a?this._combined[o].charCodeAt(this._combined[o].length-1):u]},p.prototype.set=function(o,a){this._data[3*o+1]=a[d.CHAR_DATA_ATTR_INDEX],a[d.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[o]=a[1],this._data[3*o+0]=2097152|o|a[d.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*o+0]=a[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|a[d.CHAR_DATA_WIDTH_INDEX]<<22},p.prototype.getWidth=function(o){return this._data[3*o+0]>>22},p.prototype.hasWidth=function(o){return 12582912&this._data[3*o+0]},p.prototype.getFg=function(o){return this._data[3*o+1]},p.prototype.getBg=function(o){return this._data[3*o+2]},p.prototype.hasContent=function(o){return 4194303&this._data[3*o+0]},p.prototype.getCodePoint=function(o){var a=this._data[3*o+0];return 2097152&a?this._combined[o].charCodeAt(this._combined[o].length-1):2097151&a},p.prototype.isCombined=function(o){return 2097152&this._data[3*o+0]},p.prototype.getString=function(o){var a=this._data[3*o+0];return 2097152&a?this._combined[o]:2097151&a?(0,l.stringFromCodePoint)(2097151&a):""},p.prototype.loadCell=function(o,a){var u=3*o;return a.content=this._data[u+0],a.fg=this._data[u+1],a.bg=this._data[u+2],2097152&a.content&&(a.combinedData=this._combined[o]),268435456&a.bg&&(a.extended=this._extendedAttrs[o]),a},p.prototype.setCell=function(o,a){2097152&a.content&&(this._combined[o]=a.combinedData),268435456&a.bg&&(this._extendedAttrs[o]=a.extended),this._data[3*o+0]=a.content,this._data[3*o+1]=a.fg,this._data[3*o+2]=a.bg},p.prototype.setCellFromCodePoint=function(o,a,u,n,t,e){268435456&t&&(this._extendedAttrs[o]=e),this._data[3*o+0]=a|u<<22,this._data[3*o+1]=n,this._data[3*o+2]=t},p.prototype.addCodepointToCell=function(o,a){var u=this._data[3*o+0];2097152&u?this._combined[o]+=(0,l.stringFromCodePoint)(a):(2097151&u?(this._combined[o]=(0,l.stringFromCodePoint)(2097151&u)+(0,l.stringFromCodePoint)(a),u&=-2097152,u|=2097152):u=a|1<<22,this._data[3*o+0]=u)},p.prototype.insertCells=function(o,a,u,n){if((o%=this.length)&&2===this.getWidth(o-1)&&this.setCellFromCodePoint(o-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new h.ExtendedAttrs),a<this.length-o){for(var t=new f.CellData,e=this.length-o-a-1;e>=0;--e)this.setCell(o+a+e,this.loadCell(o+e,t));for(e=0;e<a;++e)this.setCell(o+e,u)}else for(e=o;e<this.length;++e)this.setCell(e,u);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new h.ExtendedAttrs)},p.prototype.deleteCells=function(o,a,u,n){if(a<this.length-(o%=this.length)){for(var t=new f.CellData,e=0;e<this.length-o-a;++e)this.setCell(o+e,this.loadCell(o+a+e,t));for(e=this.length-a;e<this.length;++e)this.setCell(e,u)}else for(e=o;e<this.length;++e)this.setCell(e,u);o&&2===this.getWidth(o-1)&&this.setCellFromCodePoint(o-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new h.ExtendedAttrs),0!==this.getWidth(o)||this.hasContent(o)||this.setCellFromCodePoint(o,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new h.ExtendedAttrs)},p.prototype.replaceCells=function(o,a,u,n){for(o&&2===this.getWidth(o-1)&&this.setCellFromCodePoint(o-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new h.ExtendedAttrs),a<this.length&&2===this.getWidth(a-1)&&this.setCellFromCodePoint(a,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new h.ExtendedAttrs);o<a&&o<this.length;)this.setCell(o++,u)},p.prototype.resize=function(o,a){if(o!==this.length){if(o>this.length){var u=new Uint32Array(3*o);this.length&&u.set(3*o<this._data.length?this._data.subarray(0,3*o):this._data),this._data=u;for(var n=this.length;n<o;++n)this.setCell(n,a)}else if(o){(u=new Uint32Array(3*o)).set(this._data.subarray(0,3*o)),this._data=u;var t=Object.keys(this._combined);for(n=0;n<t.length;n++){var e=parseInt(t[n],10);e>=o&&delete this._combined[e]}}else this._data=new Uint32Array(0),this._combined={};this.length=o}},p.prototype.fill=function(o){this._combined={},this._extendedAttrs={};for(var a=0;a<this.length;++a)this.setCell(a,o)},p.prototype.copyFrom=function(o){for(var a in this.length!==o.length?this._data=new Uint32Array(o._data):this._data.set(o._data),this.length=o.length,this._combined={},o._combined)this._combined[a]=o._combined[a];for(var a in this._extendedAttrs={},o._extendedAttrs)this._extendedAttrs[a]=o._extendedAttrs[a];this.isWrapped=o.isWrapped},p.prototype.clone=function(){var o=new p(0);for(var a in o._data=new Uint32Array(this._data),o.length=this.length,this._combined)o._combined[a]=this._combined[a];for(var a in this._extendedAttrs)o._extendedAttrs[a]=this._extendedAttrs[a];return o.isWrapped=this.isWrapped,o},p.prototype.getTrimmedLength=function(){for(var o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0])return o+(this._data[3*o+0]>>22);return 0},p.prototype.copyCellsFrom=function(o,a,u,n,t){var e=o._data;if(t)for(var r=n-1;r>=0;r--)for(var i=0;i<3;i++)this._data[3*(u+r)+i]=e[3*(a+r)+i];else for(r=0;r<n;r++)for(i=0;i<3;i++)this._data[3*(u+r)+i]=e[3*(a+r)+i];var c=Object.keys(o._combined);for(i=0;i<c.length;i++){var _=parseInt(c[i],10);_>=a&&(this._combined[_-a+u]=o._combined[_])}},p.prototype.translateToString=function(o,a,u){void 0===o&&(o=!1),void 0===a&&(a=0),void 0===u&&(u=this.length),o&&(u=Math.min(u,this.getTrimmedLength()));for(var n="";a<u;){var t=this._data[3*a+0],e=2097151&t;n+=2097152&t?this._combined[a]:e?(0,l.stringFromCodePoint)(e):d.WHITESPACE_CELL_CHAR,a+=t>>22||1}return n},p}();s.BufferLine=S},4841:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(y,l){if(y.start.y>y.end.y)throw new Error("Buffer range end ("+y.end.x+", "+y.end.y+") cannot be before start ("+y.start.x+", "+y.start.y+")");return l*(y.end.y-y.start.y)+(y.end.x-y.start.x+1)}},4634:(W,s)=>{function y(l,d,f){if(d===l.length-1)return l[d].getTrimmedLength();var h=!l[d].hasContent(f-1)&&1===l[d].getWidth(f-1),S=2===l[d+1].getWidth(0);return h&&S?f-1:f}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(l,d,f,h,S){for(var p=[],o=0;o<l.length-1;o++){var a=o,u=l.get(++a);if(u.isWrapped){for(var n=[l.get(o)];a<l.length&&u.isWrapped;)n.push(u),u=l.get(++a);if(h>=o&&h<a)o+=n.length-1;else{for(var t=0,e=y(n,t,d),r=1,i=0;r<n.length;){var c=y(n,r,d),b=Math.min(c-i,f-e);n[t].copyCellsFrom(n[r],i,e,b,!1),(e+=b)===f&&(t++,e=0),(i+=b)===c&&(r++,i=0),0===e&&0!==t&&2===n[t-1].getWidth(f-1)&&(n[t].copyCellsFrom(n[t-1],f-1,e++,1,!1),n[t-1].setCell(f-1,S))}n[t].replaceCells(e,f,S);for(var C=0,g=n.length-1;g>0&&(g>t||0===n[g].getTrimmedLength());g--)C++;C>0&&(p.push(o+n.length-C),p.push(C)),o+=n.length-1}}}return p},s.reflowLargerCreateNewLayout=function(l,d){for(var f=[],h=0,S=d[h],p=0,o=0;o<l.length;o++)if(S===o){var a=d[++h];l.onDeleteEmitter.fire({index:o-p,amount:a}),o+=a-1,p+=a,S=d[++h]}else f.push(o);return{layout:f,countRemoved:p}},s.reflowLargerApplyNewLayout=function(l,d){for(var f=[],h=0;h<d.length;h++)f.push(l.get(d[h]));for(h=0;h<f.length;h++)l.set(h,f[h]);l.length=d.length},s.reflowSmallerGetNewLineLengths=function(l,d,f){for(var h=[],S=l.map(function(e,r){return y(l,r,d)}).reduce(function(e,r){return e+r}),p=0,o=0,a=0;a<S;){if(S-a<f){h.push(S-a);break}p+=f;var u=y(l,o,d);p>u&&(p-=u,o++);var n=2===l[o].getWidth(p-1);n&&p--;var t=n?f-1:f;h.push(t),a+=t}return h},s.getWrappedLineTrimmedLength=y},5295:function(W,s,y){var l,d=this&&this.__extends||(l=function(p,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var n in u)Object.prototype.hasOwnProperty.call(u,n)&&(a[n]=u[n])})(p,o)},function(p,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function a(){this.constructor=p}l(p,o),p.prototype=null===o?Object.create(o):(a.prototype=o.prototype,new a)});Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;var f=y(9092),h=y(8460),S=function(p){function o(a,u){var n=p.call(this)||this;return n._optionsService=a,n._bufferService=u,n._onBufferActivate=n.register(new h.EventEmitter),n.reset(),n}return d(o,p),Object.defineProperty(o.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),o.prototype.reset=function(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(o.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),o.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},o.prototype.activateAltBuffer=function(a){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(a),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},o.prototype.resize=function(a,u){this._normal.resize(a,u),this._alt.resize(a,u)},o.prototype.setupTabStops=function(a){this._normal.setupTabStops(a),this._alt.setupTabStops(a)},o}(y(844).Disposable);s.BufferSet=S},511:function(W,s,y){var l,d=this&&this.__extends||(l=function(o,a){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,n){u.__proto__=n}||function(u,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(u[t]=n[t])})(o,a)},function(o,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function u(){this.constructor=o}l(o,a),o.prototype=null===a?Object.create(a):(u.prototype=a.prototype,new u)});Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;var f=y(482),h=y(643),S=y(3734),p=function(o){function a(){var u=null!==o&&o.apply(this,arguments)||this;return u.content=0,u.fg=0,u.bg=0,u.extended=new S.ExtendedAttrs,u.combinedData="",u}return d(a,o),a.fromCharData=function(u){var n=new a;return n.setFromCharData(u),n},a.prototype.isCombined=function(){return 2097152&this.content},a.prototype.getWidth=function(){return this.content>>22},a.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""},a.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},a.prototype.setFromCharData=function(u){this.fg=u[h.CHAR_DATA_ATTR_INDEX],this.bg=0;var n=!1;if(u[h.CHAR_DATA_CHAR_INDEX].length>2)n=!0;else if(2===u[h.CHAR_DATA_CHAR_INDEX].length){var t=u[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){var e=u[h.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=e&&e<=57343?this.content=1024*(t-55296)+e-56320+65536|u[h.CHAR_DATA_WIDTH_INDEX]<<22:n=!0}else n=!0}else this.content=u[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|u[h.CHAR_DATA_WIDTH_INDEX]<<22;n&&(this.combinedData=u[h.CHAR_DATA_CHAR_INDEX],this.content=2097152|u[h.CHAR_DATA_WIDTH_INDEX]<<22)},a.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},a}(S.AttributeData);s.CellData=p},643:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=256,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:function(W,s,y){var l,d=this&&this.__extends||(l=function(S,p){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(o[u]=a[u])})(S,p)},function(S,p){if("function"!=typeof p&&null!==p)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function o(){this.constructor=S}l(S,p),S.prototype=null===p?Object.create(p):(o.prototype=p.prototype,new o)});Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;var f=y(8460),h=function(S){function p(o){var a=S.call(this)||this;return a.line=o,a._id=p._nextId++,a.isDisposed=!1,a._onDispose=new f.EventEmitter,a}return d(p,S),Object.defineProperty(p.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),p.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),S.prototype.dispose.call(this))},p._nextId=1,p}(y(844).Disposable);s.Marker=h},7116:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"\u25c6",a:"\u2592",b:"\u2409",c:"\u240c",d:"\u240d",e:"\u240a",f:"\xb0",g:"\xb1",h:"\u2424",i:"\u240b",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",v:"\u2534",w:"\u252c",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\xa3","~":"\xb7"},s.CHARSETS.A={"#":"\xa3"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"\xa3","@":"\xbe","[":"ij","\\":"\xbd","]":"|","{":"\xa8","|":"f","}":"\xbc","~":"\xb4"},s.CHARSETS.C=s.CHARSETS[5]={"[":"\xc4","\\":"\xd6","]":"\xc5","^":"\xdc","`":"\xe9","{":"\xe4","|":"\xf6","}":"\xe5","~":"\xfc"},s.CHARSETS.R={"#":"\xa3","@":"\xe0","[":"\xb0","\\":"\xe7","]":"\xa7","{":"\xe9","|":"\xf9","}":"\xe8","~":"\xa8"},s.CHARSETS.Q={"@":"\xe0","[":"\xe2","\\":"\xe7","]":"\xea","^":"\xee","`":"\xf4","{":"\xe9","|":"\xf9","}":"\xe8","~":"\xfb"},s.CHARSETS.K={"@":"\xa7","[":"\xc4","\\":"\xd6","]":"\xdc","{":"\xe4","|":"\xf6","}":"\xfc","~":"\xdf"},s.CHARSETS.Y={"#":"\xa3","@":"\xa7","[":"\xb0","\\":"\xe7","]":"\xe9","`":"\xf9","{":"\xe0","|":"\xf2","}":"\xe8","~":"\xec"},s.CHARSETS.E=s.CHARSETS[6]={"@":"\xc4","[":"\xc6","\\":"\xd8","]":"\xc5","^":"\xdc","`":"\xe4","{":"\xe6","|":"\xf8","}":"\xe5","~":"\xfc"},s.CHARSETS.Z={"#":"\xa3","@":"\xa7","[":"\xa1","\\":"\xd1","]":"\xbf","{":"\xb0","|":"\xf1","}":"\xe7"},s.CHARSETS.H=s.CHARSETS[7]={"@":"\xc9","[":"\xc4","\\":"\xd6","]":"\xc5","^":"\xdc","`":"\xe9","{":"\xe4","|":"\xf6","}":"\xe5","~":"\xfc"},s.CHARSETS["="]={"#":"\xf9","@":"\xe0","[":"\xe9","\\":"\xe7","]":"\xea","^":"\xee",_:"\xe8","`":"\xf4","{":"\xe4","|":"\xf6","}":"\xfc","~":"\xfb"}},2584:(W,s)=>{var y,l;Object.defineProperty(s,"__esModule",{value:!0}),s.C1=s.C0=void 0,(l=s.C0||(s.C0={})).NUL="\0",l.SOH="\x01",l.STX="\x02",l.ETX="\x03",l.EOT="\x04",l.ENQ="\x05",l.ACK="\x06",l.BEL="\x07",l.BS="\b",l.HT="\t",l.LF="\n",l.VT="\v",l.FF="\f",l.CR="\r",l.SO="\x0e",l.SI="\x0f",l.DLE="\x10",l.DC1="\x11",l.DC2="\x12",l.DC3="\x13",l.DC4="\x14",l.NAK="\x15",l.SYN="\x16",l.ETB="\x17",l.CAN="\x18",l.EM="\x19",l.SUB="\x1a",l.ESC="\x1b",l.FS="\x1c",l.GS="\x1d",l.RS="\x1e",l.US="\x1f",l.SP=" ",l.DEL="\x7f",(y=s.C1||(s.C1={})).PAD="\x80",y.HOP="\x81",y.BPH="\x82",y.NBH="\x83",y.IND="\x84",y.NEL="\x85",y.SSA="\x86",y.ESA="\x87",y.HTS="\x88",y.HTJ="\x89",y.VTS="\x8a",y.PLD="\x8b",y.PLU="\x8c",y.RI="\x8d",y.SS2="\x8e",y.SS3="\x8f",y.DCS="\x90",y.PU1="\x91",y.PU2="\x92",y.STS="\x93",y.CCH="\x94",y.MW="\x95",y.SPA="\x96",y.EPA="\x97",y.SOS="\x98",y.SGCI="\x99",y.SCI="\x9a",y.CSI="\x9b",y.ST="\x9c",y.OSC="\x9d",y.PM="\x9e",y.APC="\x9f"},7399:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;var l=y(2584),d={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(f,h,S,p){var o={type:0,cancel:!1,key:void 0},a=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:"UIKeyInputUpArrow"===f.key?o.key=h?l.C0.ESC+"OA":l.C0.ESC+"[A":"UIKeyInputLeftArrow"===f.key?o.key=h?l.C0.ESC+"OD":l.C0.ESC+"[D":"UIKeyInputRightArrow"===f.key?o.key=h?l.C0.ESC+"OC":l.C0.ESC+"[C":"UIKeyInputDownArrow"===f.key&&(o.key=h?l.C0.ESC+"OB":l.C0.ESC+"[B");break;case 8:if(f.shiftKey){o.key=l.C0.BS;break}if(f.altKey){o.key=l.C0.ESC+l.C0.DEL;break}o.key=l.C0.DEL;break;case 9:if(f.shiftKey){o.key=l.C0.ESC+"[Z";break}o.key=l.C0.HT,o.cancel=!0;break;case 13:o.key=f.altKey?l.C0.ESC+l.C0.CR:l.C0.CR,o.cancel=!0;break;case 27:o.key=l.C0.ESC,f.altKey&&(o.key=l.C0.ESC+l.C0.ESC),o.cancel=!0;break;case 37:if(f.metaKey)break;a?(o.key=l.C0.ESC+"[1;"+(a+1)+"D",o.key===l.C0.ESC+"[1;3D"&&(o.key=l.C0.ESC+(S?"b":"[1;5D"))):o.key=h?l.C0.ESC+"OD":l.C0.ESC+"[D";break;case 39:if(f.metaKey)break;a?(o.key=l.C0.ESC+"[1;"+(a+1)+"C",o.key===l.C0.ESC+"[1;3C"&&(o.key=l.C0.ESC+(S?"f":"[1;5C"))):o.key=h?l.C0.ESC+"OC":l.C0.ESC+"[C";break;case 38:if(f.metaKey)break;a?(o.key=l.C0.ESC+"[1;"+(a+1)+"A",S||o.key!==l.C0.ESC+"[1;3A"||(o.key=l.C0.ESC+"[1;5A")):o.key=h?l.C0.ESC+"OA":l.C0.ESC+"[A";break;case 40:if(f.metaKey)break;a?(o.key=l.C0.ESC+"[1;"+(a+1)+"B",S||o.key!==l.C0.ESC+"[1;3B"||(o.key=l.C0.ESC+"[1;5B")):o.key=h?l.C0.ESC+"OB":l.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(o.key=l.C0.ESC+"[2~");break;case 46:o.key=a?l.C0.ESC+"[3;"+(a+1)+"~":l.C0.ESC+"[3~";break;case 36:o.key=a?l.C0.ESC+"[1;"+(a+1)+"H":h?l.C0.ESC+"OH":l.C0.ESC+"[H";break;case 35:o.key=a?l.C0.ESC+"[1;"+(a+1)+"F":h?l.C0.ESC+"OF":l.C0.ESC+"[F";break;case 33:f.shiftKey?o.type=2:o.key=l.C0.ESC+"[5~";break;case 34:f.shiftKey?o.type=3:o.key=l.C0.ESC+"[6~";break;case 112:o.key=a?l.C0.ESC+"[1;"+(a+1)+"P":l.C0.ESC+"OP";break;case 113:o.key=a?l.C0.ESC+"[1;"+(a+1)+"Q":l.C0.ESC+"OQ";break;case 114:o.key=a?l.C0.ESC+"[1;"+(a+1)+"R":l.C0.ESC+"OR";break;case 115:o.key=a?l.C0.ESC+"[1;"+(a+1)+"S":l.C0.ESC+"OS";break;case 116:o.key=a?l.C0.ESC+"[15;"+(a+1)+"~":l.C0.ESC+"[15~";break;case 117:o.key=a?l.C0.ESC+"[17;"+(a+1)+"~":l.C0.ESC+"[17~";break;case 118:o.key=a?l.C0.ESC+"[18;"+(a+1)+"~":l.C0.ESC+"[18~";break;case 119:o.key=a?l.C0.ESC+"[19;"+(a+1)+"~":l.C0.ESC+"[19~";break;case 120:o.key=a?l.C0.ESC+"[20;"+(a+1)+"~":l.C0.ESC+"[20~";break;case 121:o.key=a?l.C0.ESC+"[21;"+(a+1)+"~":l.C0.ESC+"[21~";break;case 122:o.key=a?l.C0.ESC+"[23;"+(a+1)+"~":l.C0.ESC+"[23~";break;case 123:o.key=a?l.C0.ESC+"[24;"+(a+1)+"~":l.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(S&&!p||!f.altKey||f.metaKey)!S||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&1===f.key.length?o.key=f.key:f.key&&f.ctrlKey&&"_"===f.key&&(o.key=l.C0.US):65===f.keyCode&&(o.type=1);else{var u=d[f.keyCode],n=null==u?void 0:u[f.shiftKey?1:0];n?o.key=l.C0.ESC+n:f.keyCode>=65&&f.keyCode<=90&&(o.key=l.C0.ESC+String.fromCharCode(f.ctrlKey?f.keyCode-64:f.keyCode+32))}else f.keyCode>=65&&f.keyCode<=90?o.key=String.fromCharCode(f.keyCode-64):32===f.keyCode?o.key=l.C0.NUL:f.keyCode>=51&&f.keyCode<=55?o.key=String.fromCharCode(f.keyCode-51+27):56===f.keyCode?o.key=l.C0.DEL:219===f.keyCode?o.key=l.C0.ESC:220===f.keyCode?o.key=l.C0.FS:221===f.keyCode&&(o.key=l.C0.GS)}return o}},482:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(d){return d>65535?(d-=65536,String.fromCharCode(55296+(d>>10))+String.fromCharCode(d%1024+56320)):String.fromCharCode(d)},s.utf32ToString=function(d,f,h){void 0===f&&(f=0),void 0===h&&(h=d.length);for(var S="",p=f;p<h;++p){var o=d[p];o>65535?(o-=65536,S+=String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):S+=String.fromCharCode(o)}return S};var y=function(){function d(){this._interim=0}return d.prototype.clear=function(){this._interim=0},d.prototype.decode=function(f,h){var S=f.length;if(!S)return 0;var p=0,o=0;this._interim&&(56320<=(n=f.charCodeAt(o++))&&n<=57343?h[p++]=1024*(this._interim-55296)+n-56320+65536:(h[p++]=this._interim,h[p++]=n),this._interim=0);for(var a=o;a<S;++a){var u=f.charCodeAt(a);if(55296<=u&&u<=56319){if(++a>=S)return this._interim=u,p;var n;56320<=(n=f.charCodeAt(a))&&n<=57343?h[p++]=1024*(u-55296)+n-56320+65536:(h[p++]=u,h[p++]=n)}else 65279!==u&&(h[p++]=u)}return p},d}();s.StringToUtf32=y;var l=function(){function d(){this.interim=new Uint8Array(3)}return d.prototype.clear=function(){this.interim.fill(0)},d.prototype.decode=function(f,h){var S=f.length;if(!S)return 0;var p,o,a,u,n=0,t=0,e=0;if(this.interim[0]){var r=!1,i=this.interim[0];i&=192==(224&i)?31:224==(240&i)?15:7;for(var c=0,_=void 0;(_=63&this.interim[++c])&&c<4;)i<<=6,i|=_;for(var v=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,b=v-c;e<b;){if(e>=S)return 0;if(128!=(192&(_=f[e++]))){e--,r=!0;break}this.interim[c++]=_,i<<=6,i|=63&_}r||(2===v?i<128?e--:h[n++]=i:3===v?i<2048||i>=55296&&i<=57343||65279===i||(h[n++]=i):i<65536||i>1114111||(h[n++]=i)),this.interim.fill(0)}for(var C=S-4,g=e;g<S;){for(;!(!(g<C)||128&(p=f[g])||128&(o=f[g+1])||128&(a=f[g+2])||128&(u=f[g+3]));)h[n++]=p,h[n++]=o,h[n++]=a,h[n++]=u,g+=4;if((p=f[g++])<128)h[n++]=p;else if(192==(224&p)){if(g>=S)return this.interim[0]=p,n;if(128!=(192&(o=f[g++]))){g--;continue}if((t=(31&p)<<6|63&o)<128){g--;continue}h[n++]=t}else if(224==(240&p)){if(g>=S)return this.interim[0]=p,n;if(128!=(192&(o=f[g++]))){g--;continue}if(g>=S)return this.interim[0]=p,this.interim[1]=o,n;if(128!=(192&(a=f[g++]))){g--;continue}if((t=(15&p)<<12|(63&o)<<6|63&a)<2048||t>=55296&&t<=57343||65279===t)continue;h[n++]=t}else if(240==(248&p)){if(g>=S)return this.interim[0]=p,n;if(128!=(192&(o=f[g++]))){g--;continue}if(g>=S)return this.interim[0]=p,this.interim[1]=o,n;if(128!=(192&(a=f[g++]))){g--;continue}if(g>=S)return this.interim[0]=p,this.interim[1]=o,this.interim[2]=a,n;if(128!=(192&(u=f[g++]))){g--;continue}if((t=(7&p)<<18|(63&o)<<12|(63&a)<<6|63&u)<65536||t>1114111)continue;h[n++]=t}}return n},d}();s.Utf8ToUtf32=l},225:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;var l,d=y(8273),f=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],S=function(){function p(){if(this.version="6",!l){l=new Uint8Array(65536),(0,d.fill)(l,1),l[0]=0,(0,d.fill)(l,0,1,32),(0,d.fill)(l,0,127,160),(0,d.fill)(l,2,4352,4448),l[9001]=2,l[9002]=2,(0,d.fill)(l,2,11904,42192),l[12351]=1,(0,d.fill)(l,2,44032,55204),(0,d.fill)(l,2,63744,64256),(0,d.fill)(l,2,65040,65050),(0,d.fill)(l,2,65072,65136),(0,d.fill)(l,2,65280,65377),(0,d.fill)(l,2,65504,65511);for(var o=0;o<f.length;++o)(0,d.fill)(l,0,f[o][0],f[o][1]+1)}}return p.prototype.wcwidth=function(o){return o<32?0:o<127?1:o<65536?l[o]:function(a,u){var n,t=0,e=u.length-1;if(a<u[0][0]||a>u[e][1])return!1;for(;e>=t;)if(a>u[n=t+e>>1][1])t=n+1;else{if(!(a<u[n][0]))return!0;e=n-1}return!1}(o,h)?0:o>=131072&&o<=196605||o>=196608&&o<=262141?2:1},p}();s.UnicodeV6=S},5981:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;var y=typeof queueMicrotask>"u"?function(d){Promise.resolve().then(d)}:queueMicrotask,l=function(){function d(f){this._action=f,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return d.prototype.writeSync=function(f,h){if(void 0!==h&&this._syncCalls>h)this._syncCalls=0;else if(this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var S;for(this._isSyncWriting=!0;S=this._writeBuffer.shift();){this._action(S);var p=this._callbacks.shift();p&&p()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},d.prototype.write=function(f,h){var S=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return S._innerWrite()})),this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(h)},d.prototype._innerWrite=function(f,h){var S=this;void 0===f&&(f=0),void 0===h&&(h=!0);for(var p=f||Date.now();this._writeBuffer.length>this._bufferOffset;){var o=this._writeBuffer[this._bufferOffset],a=this._action(o,h);if(a)return void a.catch(function(n){return y(function(){throw n}),Promise.resolve(!1)}).then(function(n){return Date.now()-p>=12?setTimeout(function(){return S._innerWrite(0,n)}):S._innerWrite(p,n)});var u=this._callbacks[this._bufferOffset];if(u&&u(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-p>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return S._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},d}();s.WriteBuffer=l},5941:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;var y=/^([\da-f]{1})\/([\da-f]{1})\/([\da-f]{1})$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,l=/^[\da-f]+$/;function d(f,h){var S=f.toString(16),p=S.length<2?"0"+S:S;switch(h){case 4:return S[0];case 8:return p;case 12:return(p+p).slice(0,3);default:return p+p}}s.parseColor=function(f){if(f){var h=f.toLowerCase();if(0===h.indexOf("rgb:")){h=h.slice(4);var S=y.exec(h);if(S){var p=S[1]?15:S[4]?255:S[7]?4095:65535;return[Math.round(parseInt(S[1]||S[4]||S[7]||S[10],16)/p*255),Math.round(parseInt(S[2]||S[5]||S[8]||S[11],16)/p*255),Math.round(parseInt(S[3]||S[6]||S[9]||S[12],16)/p*255)]}}else if(0===h.indexOf("#")&&(h=h.slice(1),l.exec(h)&&[3,6,9,12].includes(h.length))){for(var o=h.length/3,a=[0,0,0],u=0;u<3;++u){var n=parseInt(h.slice(o*u,o*u+o),16);a[u]=1===o?n<<4:2===o?n:3===o?n>>4:n>>8}return a}}},s.toRgbString=function(f,h){void 0===h&&(h=16);var p=f[1],o=f[2];return"rgb:"+d(f[0],h)+"/"+d(p,h)+"/"+d(o,h)}},5770:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;var l=y(482),d=y(8742),f=y(5770),h=[],S=function(){function a(){this._handlers=Object.create(null),this._active=h,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return a.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=h},a.prototype.registerHandler=function(u,n){void 0===this._handlers[u]&&(this._handlers[u]=[]);var t=this._handlers[u];return t.push(n),{dispose:function(){var e=t.indexOf(n);-1!==e&&t.splice(e,1)}}},a.prototype.clearHandler=function(u){this._handlers[u]&&delete this._handlers[u]},a.prototype.setHandlerFallback=function(u){this._handlerFb=u},a.prototype.reset=function(){if(this._active.length)for(var u=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;u>=0;--u)this._active[u].unhook(!1);this._stack.paused=!1,this._active=h,this._ident=0},a.prototype.hook=function(u,n){if(this.reset(),this._ident=u,this._active=this._handlers[u]||h,this._active.length)for(var t=this._active.length-1;t>=0;t--)this._active[t].hook(n);else this._handlerFb(this._ident,"HOOK",n)},a.prototype.put=function(u,n,t){if(this._active.length)for(var e=this._active.length-1;e>=0;e--)this._active[e].put(u,n,t);else this._handlerFb(this._ident,"PUT",(0,l.utf32ToString)(u,n,t))},a.prototype.unhook=function(u,n){if(void 0===n&&(n=!0),this._active.length){var t=!1,e=this._active.length-1,r=!1;if(this._stack.paused&&(e=this._stack.loopPosition-1,t=n,r=this._stack.fallThrough,this._stack.paused=!1),!r&&!1===t){for(;e>=0&&!0!==(t=this._active[e].unhook(u));e--)if(t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!1,t;e--}for(;e>=0;e--)if((t=this._active[e].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!0,t}else this._handlerFb(this._ident,"UNHOOK",u);this._active=h,this._ident=0},a}();s.DcsParser=S;var p=new d.Params;p.addParam(0);var o=function(){function a(u){this._handler=u,this._data="",this._params=p,this._hitLimit=!1}return a.prototype.hook=function(u){this._params=u.length>1||u.params[0]?u.clone():p,this._data="",this._hitLimit=!1},a.prototype.put=function(u,n,t){this._hitLimit||(this._data+=(0,l.utf32ToString)(u,n,t),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},a.prototype.unhook=function(u){var n=this,t=!1;if(this._hitLimit)t=!1;else if(u&&(t=this._handler(this._data,this._params))instanceof Promise)return t.then(function(e){return n._params=p,n._data="",n._hitLimit=!1,e});return this._params=p,this._data="",this._hitLimit=!1,t},a}();s.DcsHandler=o},2015:function(W,s,y){var l,d=this&&this.__extends||(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(r[c]=i[c])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;var f=y(844),h=y(8273),S=y(8742),p=y(6242),o=y(6351),a=function(){function t(e){this.table=new Uint8Array(e)}return t.prototype.setDefault=function(e,r){(0,h.fill)(this.table,e<<4|r)},t.prototype.add=function(e,r,i,c){this.table[r<<8|e]=i<<4|c},t.prototype.addMany=function(e,r,i,c){for(var _=0;_<e.length;_++)this.table[r<<8|e[_]]=i<<4|c},t}();s.TransitionTable=a;var u=160;s.VT500_TRANSITION_TABLE=function(){var t=new a(4095),e=Array.apply(null,Array(256)).map(function(b,C){return C}),r=function(b,C){return e.slice(b,C)},i=r(32,127),c=r(0,24);c.push(25),c.push.apply(c,r(28,32));var _,v=r(0,14);for(_ in t.setDefault(1,0),t.addMany(i,0,2,0),v)t.addMany([24,26,153,154],_,3,0),t.addMany(r(128,144),_,3,0),t.addMany(r(144,152),_,3,0),t.add(156,_,0,0),t.add(27,_,11,1),t.add(157,_,4,8),t.addMany([152,158,159],_,0,7),t.add(155,_,11,3),t.add(144,_,11,9);return t.addMany(c,0,3,0),t.addMany(c,1,3,1),t.add(127,1,0,1),t.addMany(c,8,0,8),t.addMany(c,3,3,3),t.add(127,3,0,3),t.addMany(c,4,3,4),t.add(127,4,0,4),t.addMany(c,6,3,6),t.addMany(c,5,3,5),t.add(127,5,0,5),t.addMany(c,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(i,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(r(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(i,7,0,7),t.addMany(c,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(r(64,127),3,7,0),t.addMany(r(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(r(48,60),4,8,4),t.addMany(r(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(r(32,64),6,0,6),t.add(127,6,0,6),t.addMany(r(64,127),6,0,0),t.addMany(r(32,48),3,9,5),t.addMany(r(32,48),5,9,5),t.addMany(r(48,64),5,0,6),t.addMany(r(64,127),5,7,0),t.addMany(r(32,48),4,9,5),t.addMany(r(32,48),1,9,2),t.addMany(r(32,48),2,9,2),t.addMany(r(48,127),2,10,0),t.addMany(r(48,80),1,10,0),t.addMany(r(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(r(96,127),1,10,0),t.add(80,1,11,9),t.addMany(c,9,0,9),t.add(127,9,0,9),t.addMany(r(28,32),9,0,9),t.addMany(r(32,48),9,9,12),t.addMany(r(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(c,11,0,11),t.addMany(r(32,128),11,0,11),t.addMany(r(28,32),11,0,11),t.addMany(c,10,0,10),t.add(127,10,0,10),t.addMany(r(28,32),10,0,10),t.addMany(r(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(r(32,48),10,9,12),t.addMany(c,12,0,12),t.add(127,12,0,12),t.addMany(r(28,32),12,0,12),t.addMany(r(32,48),12,9,12),t.addMany(r(48,64),12,0,11),t.addMany(r(64,127),12,12,13),t.addMany(r(64,127),10,12,13),t.addMany(r(64,127),9,12,13),t.addMany(c,13,13,13),t.addMany(i,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(u,0,2,0),t.add(u,8,5,8),t.add(u,6,0,6),t.add(u,11,0,11),t.add(u,13,13,13),t}();var n=function(t){function e(r){void 0===r&&(r=s.VT500_TRANSITION_TABLE);var i=t.call(this)||this;return i._transitions=r,i._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},i.initialState=0,i.currentState=i.initialState,i._params=new S.Params,i._params.addParam(0),i._collect=0,i.precedingCodepoint=0,i._printHandlerFb=function(c,_,v){},i._executeHandlerFb=function(c){},i._csiHandlerFb=function(c,_){},i._escHandlerFb=function(c){},i._errorHandlerFb=function(c){return c},i._printHandler=i._printHandlerFb,i._executeHandlers=Object.create(null),i._csiHandlers=Object.create(null),i._escHandlers=Object.create(null),i._oscParser=new p.OscParser,i._dcsParser=new o.DcsParser,i._errorHandler=i._errorHandlerFb,i.registerEscHandler({final:"\\"},function(){return!0}),i}return d(e,t),e.prototype._identifier=function(r,i){void 0===i&&(i=[64,126]);var c=0;if(r.prefix){if(r.prefix.length>1)throw new Error("only one byte as prefix supported");if((c=r.prefix.charCodeAt(0))&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(r.intermediates){if(r.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var _=0;_<r.intermediates.length;++_){var v=r.intermediates.charCodeAt(_);if(32>v||v>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=v}}if(1!==r.final.length)throw new Error("final must be a single byte");var b=r.final.charCodeAt(0);if(i[0]>b||b>i[1])throw new Error("final must be in range "+i[0]+" .. "+i[1]);return(c<<=8)|b},e.prototype.identToString=function(r){for(var i=[];r;)i.push(String.fromCharCode(255&r)),r>>=8;return i.reverse().join("")},e.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},e.prototype.setPrintHandler=function(r){this._printHandler=r},e.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},e.prototype.registerEscHandler=function(r,i){var c=this._identifier(r,[48,126]);void 0===this._escHandlers[c]&&(this._escHandlers[c]=[]);var _=this._escHandlers[c];return _.push(i),{dispose:function(){var v=_.indexOf(i);-1!==v&&_.splice(v,1)}}},e.prototype.clearEscHandler=function(r){this._escHandlers[this._identifier(r,[48,126])]&&delete this._escHandlers[this._identifier(r,[48,126])]},e.prototype.setEscHandlerFallback=function(r){this._escHandlerFb=r},e.prototype.setExecuteHandler=function(r,i){this._executeHandlers[r.charCodeAt(0)]=i},e.prototype.clearExecuteHandler=function(r){this._executeHandlers[r.charCodeAt(0)]&&delete this._executeHandlers[r.charCodeAt(0)]},e.prototype.setExecuteHandlerFallback=function(r){this._executeHandlerFb=r},e.prototype.registerCsiHandler=function(r,i){var c=this._identifier(r);void 0===this._csiHandlers[c]&&(this._csiHandlers[c]=[]);var _=this._csiHandlers[c];return _.push(i),{dispose:function(){var v=_.indexOf(i);-1!==v&&_.splice(v,1)}}},e.prototype.clearCsiHandler=function(r){this._csiHandlers[this._identifier(r)]&&delete this._csiHandlers[this._identifier(r)]},e.prototype.setCsiHandlerFallback=function(r){this._csiHandlerFb=r},e.prototype.registerDcsHandler=function(r,i){return this._dcsParser.registerHandler(this._identifier(r),i)},e.prototype.clearDcsHandler=function(r){this._dcsParser.clearHandler(this._identifier(r))},e.prototype.setDcsHandlerFallback=function(r){this._dcsParser.setHandlerFallback(r)},e.prototype.registerOscHandler=function(r,i){return this._oscParser.registerHandler(r,i)},e.prototype.clearOscHandler=function(r){this._oscParser.clearHandler(r)},e.prototype.setOscHandlerFallback=function(r){this._oscParser.setHandlerFallback(r)},e.prototype.setErrorHandler=function(r){this._errorHandler=r},e.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},e.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,0!==this._parseStack.state&&(this._parseStack.state=2,this._parseStack.handlers=[])},e.prototype._preserveStack=function(r,i,c,_,v){this._parseStack.state=r,this._parseStack.handlers=i,this._parseStack.handlerPos=c,this._parseStack.transition=_,this._parseStack.chunkPos=v},e.prototype.parse=function(r,i,c){var _,v=0,b=0,C=0;if(this._parseStack.state)if(2===this._parseStack.state)this._parseStack.state=0,C=this._parseStack.chunkPos+1;else{if(void 0===c||1===this._parseStack.state)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var g=this._parseStack.handlers,m=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(!1===c&&m>-1)for(;m>=0&&!0!==(_=g[m](this._params));m--)if(_ instanceof Promise)return this._parseStack.handlerPos=m,_;this._parseStack.handlers=[];break;case 4:if(!1===c&&m>-1)for(;m>=0&&!0!==(_=g[m]());m--)if(_ instanceof Promise)return this._parseStack.handlerPos=m,_;this._parseStack.handlers=[];break;case 6:if(_=this._dcsParser.unhook(24!==(v=r[this._parseStack.chunkPos])&&26!==v,c))return _;27===v&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(_=this._oscParser.end(24!==(v=r[this._parseStack.chunkPos])&&26!==v,c))return _;27===v&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,C=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var E=C;E<i;++E){switch((b=this._transitions.table[this.currentState<<8|((v=r[E])<160?v:u)])>>4){case 2:for(var L=E+1;;++L){if(L>=i||(v=r[L])<32||v>126&&v<u){this._printHandler(r,E,L),E=L-1;break}if(++L>=i||(v=r[L])<32||v>126&&v<u){this._printHandler(r,E,L),E=L-1;break}if(++L>=i||(v=r[L])<32||v>126&&v<u){this._printHandler(r,E,L),E=L-1;break}if(++L>=i||(v=r[L])<32||v>126&&v<u){this._printHandler(r,E,L),E=L-1;break}}break;case 3:this._executeHandlers[v]?this._executeHandlers[v]():this._executeHandlerFb(v),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:E,code:v,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var B=(g=this._csiHandlers[this._collect<<8|v])?g.length-1:-1;B>=0&&!0!==(_=g[B](this._params));B--)if(_ instanceof Promise)return this._preserveStack(3,g,B,b,E),_;B<0&&this._csiHandlerFb(this._collect<<8|v,this._params),this.precedingCodepoint=0;break;case 8:do{switch(v){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(v-48)}}while(++E<i&&(v=r[E])>47&&v<60);E--;break;case 9:this._collect<<=8,this._collect|=v;break;case 10:for(var k=this._escHandlers[this._collect<<8|v],w=k?k.length-1:-1;w>=0&&!0!==(_=k[w]());w--)if(_ instanceof Promise)return this._preserveStack(4,k,w,b,E),_;w<0&&this._escHandlerFb(this._collect<<8|v),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|v,this._params);break;case 13:for(var x=E+1;;++x)if(x>=i||24===(v=r[x])||26===v||27===v||v>127&&v<u){this._dcsParser.put(r,E,x),E=x-1;break}break;case 14:if(_=this._dcsParser.unhook(24!==v&&26!==v))return this._preserveStack(6,[],0,b,E),_;27===v&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var O=E+1;;O++)if(O>=i||(v=r[O])<32||v>127&&v<u){this._oscParser.put(r,E,O),E=O-1;break}break;case 6:if(_=this._oscParser.end(24!==v&&26!==v))return this._preserveStack(5,[],0,b,E),_;27===v&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&b}},e}(f.Disposable);s.EscapeSequenceParser=n},6242:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;var l=y(5770),d=y(482),f=[],h=function(){function p(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return p.prototype.registerHandler=function(o,a){void 0===this._handlers[o]&&(this._handlers[o]=[]);var u=this._handlers[o];return u.push(a),{dispose:function(){var n=u.indexOf(a);-1!==n&&u.splice(n,1)}}},p.prototype.clearHandler=function(o){this._handlers[o]&&delete this._handlers[o]},p.prototype.setHandlerFallback=function(o){this._handlerFb=o},p.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=f},p.prototype.reset=function(){if(2===this._state)for(var o=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;o>=0;--o)this._active[o].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0},p.prototype._start=function(){if(this._active=this._handlers[this._id]||f,this._active.length)for(var o=this._active.length-1;o>=0;o--)this._active[o].start();else this._handlerFb(this._id,"START")},p.prototype._put=function(o,a,u){if(this._active.length)for(var n=this._active.length-1;n>=0;n--)this._active[n].put(o,a,u);else this._handlerFb(this._id,"PUT",(0,d.utf32ToString)(o,a,u))},p.prototype.start=function(){this.reset(),this._state=1},p.prototype.put=function(o,a,u){if(3!==this._state){if(1===this._state)for(;a<u;){var n=o[a++];if(59===n){this._state=2,this._start();break}if(n<48||57<n)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+n-48}2===this._state&&u-a>0&&this._put(o,a,u)}},p.prototype.end=function(o,a){if(void 0===a&&(a=!0),0!==this._state){if(3!==this._state)if(1===this._state&&this._start(),this._active.length){var u=!1,n=this._active.length-1,t=!1;if(this._stack.paused&&(n=this._stack.loopPosition-1,u=a,t=this._stack.fallThrough,this._stack.paused=!1),!t&&!1===u){for(;n>=0&&!0!==(u=this._active[n].end(o));n--)if(u instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!1,u;n--}for(;n>=0;n--)if((u=this._active[n].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!0,u}else this._handlerFb(this._id,"END",o);this._active=f,this._id=-1,this._state=0}},p}();s.OscParser=h;var S=function(){function p(o){this._handler=o,this._data="",this._hitLimit=!1}return p.prototype.start=function(){this._data="",this._hitLimit=!1},p.prototype.put=function(o,a,u){this._hitLimit||(this._data+=(0,d.utf32ToString)(o,a,u),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},p.prototype.end=function(o){var a=this,u=!1;if(this._hitLimit)u=!1;else if(o&&(u=this._handler(this._data))instanceof Promise)return u.then(function(n){return a._data="",a._hitLimit=!1,n});return this._data="",this._hitLimit=!1,u},p}();s.OscHandler=S},8742:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;var y=2147483647,l=function(){function d(f,h){if(void 0===f&&(f=32),void 0===h&&(h=32),this.maxLength=f,this.maxSubParamsLength=h,h>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(h),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return d.fromArray=function(f){var h=new d;if(!f.length)return h;for(var S=Array.isArray(f[0])?1:0;S<f.length;++S){var p=f[S];if(Array.isArray(p))for(var o=0;o<p.length;++o)h.addSubParam(p[o]);else h.addParam(p)}return h},d.prototype.clone=function(){var f=new d(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f},d.prototype.toArray=function(){for(var f=[],h=0;h<this.length;++h){f.push(this.params[h]);var S=this._subParamsIdx[h]>>8,p=255&this._subParamsIdx[h];p-S>0&&f.push(Array.prototype.slice.call(this._subParams,S,p))}return f},d.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},d.prototype.addParam=function(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>y?y:f}},d.prototype.addSubParam=function(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>y?y:f,this._subParamsIdx[this.length-1]++}},d.prototype.hasSubParams=function(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0},d.prototype.getSubParams=function(f){var h=this._subParamsIdx[f]>>8,S=255&this._subParamsIdx[f];return S-h>0?this._subParams.subarray(h,S):null},d.prototype.getSubParamsAll=function(){for(var f={},h=0;h<this.length;++h){var S=this._subParamsIdx[h]>>8,p=255&this._subParamsIdx[h];p-S>0&&(f[h]=this._subParams.slice(S,p))}return f},d.prototype.addDigit=function(f){var h;if(!(this._rejectDigits||!(h=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var S=this._digitIsSub?this._subParams:this.params,p=S[h-1];S[h-1]=~p?Math.min(10*p+f,y):f}},d}();s.Params=l},5741:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0;var y=function(){function l(){this._addons=[]}return l.prototype.dispose=function(){for(var d=this._addons.length-1;d>=0;d--)this._addons[d].instance.dispose()},l.prototype.loadAddon=function(d,f){var h=this,S={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(S),f.dispose=function(){return h._wrappedAddonDispose(S)},f.activate(d)},l.prototype._wrappedAddonDispose=function(d){if(!d.isDisposed){for(var f=-1,h=0;h<this._addons.length;h++)if(this._addons[h]===d){f=h;break}if(-1===f)throw new Error("Could not dispose an addon that has not been loaded");d.isDisposed=!0,d.dispose.apply(d.instance),this._addons.splice(f,1)}},l}();s.AddonManager=y},8771:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;var l=y(3785),d=y(511),f=function(){function h(S,p){this._buffer=S,this.type=p}return h.prototype.init=function(S){return this._buffer=S,this},Object.defineProperty(h.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),h.prototype.getLine=function(S){var p=this._buffer.lines.get(S);if(p)return new l.BufferLineApiView(p)},h.prototype.getNullCell=function(){return new d.CellData},h}();s.BufferApiView=f},3785:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;var l=y(511),d=function(){function f(h){this._line=h}return Object.defineProperty(f.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),f.prototype.getCell=function(h,S){if(!(h<0||h>=this._line.length))return S?(this._line.loadCell(h,S),S):this._line.loadCell(h,new l.CellData)},f.prototype.translateToString=function(h,S,p){return this._line.translateToString(h,S,p)},f}();s.BufferLineApiView=d},8285:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;var l=y(8771),d=y(8460),f=function(){function h(S){var p=this;this._core=S,this._onBufferChange=new d.EventEmitter,this._normal=new l.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new l.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return p._onBufferChange.fire(p.active)})}return Object.defineProperty(h.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),h}();s.BufferNamespaceApi=f},7975:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0;var y=function(){function l(d){this._core=d}return l.prototype.registerCsiHandler=function(d,f){return this._core.registerCsiHandler(d,function(h){return f(h.toArray())})},l.prototype.addCsiHandler=function(d,f){return this.registerCsiHandler(d,f)},l.prototype.registerDcsHandler=function(d,f){return this._core.registerDcsHandler(d,function(h,S){return f(h,S.toArray())})},l.prototype.addDcsHandler=function(d,f){return this.registerDcsHandler(d,f)},l.prototype.registerEscHandler=function(d,f){return this._core.registerEscHandler(d,f)},l.prototype.addEscHandler=function(d,f){return this.registerEscHandler(d,f)},l.prototype.registerOscHandler=function(d,f){return this._core.registerOscHandler(d,f)},l.prototype.addOscHandler=function(d,f){return this.registerOscHandler(d,f)},l}();s.ParserApi=y},7090:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0;var y=function(){function l(d){this._core=d}return l.prototype.register=function(d){this._core.unicodeService.register(d)},Object.defineProperty(l.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(d){this._core.unicodeService.activeVersion=d},enumerable:!1,configurable:!0}),l}();s.UnicodeApi=y},744:function(W,s,y){var l,d=this&&this.__extends||(l=function(n,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}l(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(n,t,e,r){var i,c=arguments.length,_=c<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_=Reflect.decorate(n,t,e,r);else for(var v=n.length-1;v>=0;v--)(i=n[v])&&(_=(c<3?i(_):c>3?i(t,e,_):i(t,e))||_);return c>3&&_&&Object.defineProperty(t,e,_),_},h=this&&this.__param||function(n,t){return function(e,r){t(e,r,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;var S=y(2585),p=y(5295),o=y(8460),a=y(844);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;var u=function(n){function t(e){var r=n.call(this)||this;return r._optionsService=e,r.isUserScrolling=!1,r._onResize=new o.EventEmitter,r._onScroll=new o.EventEmitter,r.cols=Math.max(e.rawOptions.cols||0,s.MINIMUM_COLS),r.rows=Math.max(e.rawOptions.rows||0,s.MINIMUM_ROWS),r.buffers=new p.BufferSet(e,r),r}return d(t,n),Object.defineProperty(t.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){n.prototype.dispose.call(this),this.buffers.dispose()},t.prototype.resize=function(e,r){this.cols=e,this.rows=r,this.buffers.resize(e,r),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:r})},t.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},t.prototype.scroll=function(e,r){void 0===r&&(r=!1);var i,c=this.buffer;(i=this._cachedBlankLine)&&i.length===this.cols&&i.getFg(0)===e.fg&&i.getBg(0)===e.bg||(i=c.getBlankLine(e,r),this._cachedBlankLine=i),i.isWrapped=r;var _=c.ybase+c.scrollTop,v=c.ybase+c.scrollBottom;if(0===c.scrollTop){var b=c.lines.isFull;v===c.lines.length-1?b?c.lines.recycle().copyFrom(i):c.lines.push(i.clone()):c.lines.splice(v+1,0,i.clone()),b?this.isUserScrolling&&(c.ydisp=Math.max(c.ydisp-1,0)):(c.ybase++,this.isUserScrolling||c.ydisp++)}else c.lines.shiftElements(_+1,v-_+1-1,-1),c.lines.set(v,i.clone());this.isUserScrolling||(c.ydisp=c.ybase),this._onScroll.fire(c.ydisp)},t.prototype.scrollLines=function(e,r,i){var c=this.buffer;if(e<0){if(0===c.ydisp)return;this.isUserScrolling=!0}else e+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);var _=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+e,c.ybase),0),_!==c.ydisp&&(r||this._onScroll.fire(c.ydisp))},t.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},t.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},t.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},t.prototype.scrollToLine=function(e){var r=e-this.buffer.ydisp;0!==r&&this.scrollLines(r)},f([h(0,S.IOptionsService)],t)}(a.Disposable);s.BufferService=u},7994:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0;var y=function(){function l(){this.glevel=0,this._charsets=[]}return l.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},l.prototype.setgLevel=function(d){this.glevel=d,this.charset=this._charsets[d]},l.prototype.setgCharset=function(d,f){this._charsets[d]=f,this.glevel===d&&(this.charset=f)},l}();s.CharsetService=y},1753:function(W,s,y){var l=this&&this.__decorate||function(n,t,e,r){var i,c=arguments.length,_=c<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_=Reflect.decorate(n,t,e,r);else for(var v=n.length-1;v>=0;v--)(i=n[v])&&(_=(c<3?i(_):c>3?i(t,e,_):i(t,e))||_);return c>3&&_&&Object.defineProperty(t,e,_),_},d=this&&this.__param||function(n,t){return function(e,r){t(e,r,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;var f=y(2585),h=y(8460),S={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(n){return 4!==n.button&&1===n.action&&(n.ctrl=!1,n.alt=!1,n.shift=!1,!0)}},VT200:{events:19,restrict:function(n){return 32!==n.action}},DRAG:{events:23,restrict:function(n){return 32!==n.action||3!==n.button}},ANY:{events:31,restrict:function(n){return!0}}};function p(n,t){var e=(n.ctrl?16:0)|(n.shift?4:0)|(n.alt?8:0);return 4===n.button?(e|=64,e|=n.action):(e|=3&n.button,4&n.button&&(e|=64),8&n.button&&(e|=128),32===n.action?e|=32:0!==n.action||t||(e|=3)),e}var o=String.fromCharCode,a={DEFAULT:function(n){var t=[p(n,!1)+32,n.col+32,n.row+32];return t[0]>255||t[1]>255||t[2]>255?"":"\x1b[M"+o(t[0])+o(t[1])+o(t[2])},SGR:function(n){var t=0===n.action&&4!==n.button?"m":"M";return"\x1b[<"+p(n,!0)+";"+n.col+";"+n.row+t}},u=function(){function n(t,e){this._bufferService=t,this._coreService=e,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new h.EventEmitter,this._lastEvent=null;for(var r=0,i=Object.keys(S);r<i.length;r++){var c=i[r];this.addProtocol(c,S[c])}for(var _=0,v=Object.keys(a);_<v.length;_++){var b=v[_];this.addEncoding(b,a[b])}this.reset()}return n.prototype.addProtocol=function(t,e){this._protocols[t]=e},n.prototype.addEncoding=function(t,e){this._encodings[t]=e},Object.defineProperty(n.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(t){if(!this._protocols[t])throw new Error('unknown protocol "'+t+'"');this._activeProtocol=t,this._onProtocolChange.fire(this._protocols[t].events)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"areMouseEventsActive",{get:function(){return 0!==this._protocols[this._activeProtocol].events},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(t){if(!this._encodings[t])throw new Error('unknown encoding "'+t+'"');this._activeEncoding=t},enumerable:!1,configurable:!0}),n.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(n.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),n.prototype.triggerMouseEvent=function(t){if(t.col<0||t.col>=this._bufferService.cols||t.row<0||t.row>=this._bufferService.rows||4===t.button&&32===t.action||3===t.button&&32!==t.action||4!==t.button&&(2===t.action||3===t.action)||(t.col++,t.row++,32===t.action&&this._lastEvent&&this._compareEvents(this._lastEvent,t))||!this._protocols[this._activeProtocol].restrict(t))return!1;var e=this._encodings[this._activeEncoding](t);return e&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=t,!0},n.prototype.explainEvents=function(t){return{down:!!(1&t),up:!!(2&t),drag:!!(4&t),move:!!(8&t),wheel:!!(16&t)}},n.prototype._compareEvents=function(t,e){return t.col===e.col&&t.row===e.row&&t.button===e.button&&t.action===e.action&&t.ctrl===e.ctrl&&t.alt===e.alt&&t.shift===e.shift},l([d(0,f.IBufferService),d(1,f.ICoreService)],n)}();s.CoreMouseService=u},6975:function(W,s,y){var l,d=this&&this.__extends||(l=function(e,r){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var _ in c)Object.prototype.hasOwnProperty.call(c,_)&&(i[_]=c[_])})(e,r)},function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}l(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}),f=this&&this.__decorate||function(e,r,i,c){var _,v=arguments.length,b=v<3?r:null===c?c=Object.getOwnPropertyDescriptor(r,i):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(e,r,i,c);else for(var C=e.length-1;C>=0;C--)(_=e[C])&&(b=(v<3?_(b):v>3?_(r,i,b):_(r,i))||b);return v>3&&b&&Object.defineProperty(r,i,b),b},h=this&&this.__param||function(e,r){return function(i,c){r(i,c,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;var S=y(2585),p=y(8460),o=y(1439),a=y(844),u=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),t=function(e){function r(i,c,_,v){var b=e.call(this)||this;return b._bufferService=c,b._logService=_,b._optionsService=v,b.isCursorInitialized=!1,b.isCursorHidden=!1,b._onData=b.register(new p.EventEmitter),b._onUserInput=b.register(new p.EventEmitter),b._onBinary=b.register(new p.EventEmitter),b._scrollToBottom=i,b.register({dispose:function(){return b._scrollToBottom=void 0}}),b.modes=(0,o.clone)(u),b.decPrivateModes=(0,o.clone)(n),b}return d(r,e),Object.defineProperty(r.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),r.prototype.reset=function(){this.modes=(0,o.clone)(u),this.decPrivateModes=(0,o.clone)(n)},r.prototype.triggerDataEvent=function(i,c){if(void 0===c&&(c=!1),!this._optionsService.rawOptions.disableStdin){var _=this._bufferService.buffer;_.ybase!==_.ydisp&&this._scrollToBottom(),c&&this._onUserInput.fire(),this._logService.debug('sending data "'+i+'"',function(){return i.split("").map(function(v){return v.charCodeAt(0)})}),this._onData.fire(i)}},r.prototype.triggerBinaryEvent=function(i){this._optionsService.rawOptions.disableStdin||(this._logService.debug('sending binary "'+i+'"',function(){return i.split("").map(function(c){return c.charCodeAt(0)})}),this._onBinary.fire(i))},f([h(1,S.IBufferService),h(2,S.ILogService),h(3,S.IOptionsService)],r)}(a.Disposable);s.CoreService=t},3730:function(W,s,y){var l=this&&this.__decorate||function(S,p,o,a){var u,n=arguments.length,t=n<3?p:null===a?a=Object.getOwnPropertyDescriptor(p,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)t=Reflect.decorate(S,p,o,a);else for(var e=S.length-1;e>=0;e--)(u=S[e])&&(t=(n<3?u(t):n>3?u(p,o,t):u(p,o))||t);return n>3&&t&&Object.defineProperty(p,o,t),t},d=this&&this.__param||function(S,p){return function(o,a){p(o,a,S)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DirtyRowService=void 0;var f=y(2585),h=function(){function S(p){this._bufferService=p,this.clearRange()}return Object.defineProperty(S.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),S.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},S.prototype.markDirty=function(p){p<this._start?this._start=p:p>this._end&&(this._end=p)},S.prototype.markRangeDirty=function(p,o){if(p>o){var a=p;p=o,o=a}p<this._start&&(this._start=p),o>this._end&&(this._end=o)},S.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},l([d(0,f.IBufferService)],S)}();s.DirtyRowService=h},4348:function(W,s,y){var l=this&&this.__spreadArray||function(p,o,a){if(a||2===arguments.length)for(var u,n=0,t=o.length;n<t;n++)!u&&n in o||(u||(u=Array.prototype.slice.call(o,0,n)),u[n]=o[n]);return p.concat(u||Array.prototype.slice.call(o))};Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;var d=y(2585),f=y(8343),h=function(){function p(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];this._entries=new Map;for(var u=0,n=o;u<n.length;u++){var t=n[u];this.set(t[0],t[1])}}return p.prototype.set=function(o,a){var u=this._entries.get(o);return this._entries.set(o,a),u},p.prototype.forEach=function(o){this._entries.forEach(function(a,u){return o(u,a)})},p.prototype.has=function(o){return this._entries.has(o)},p.prototype.get=function(o){return this._entries.get(o)},p}();s.ServiceCollection=h;var S=function(){function p(){this._services=new h,this._services.set(d.IInstantiationService,this)}return p.prototype.setService=function(o,a){this._services.set(o,a)},p.prototype.getService=function(o){return this._services.get(o)},p.prototype.createInstance=function(o){for(var a=[],u=1;u<arguments.length;u++)a[u-1]=arguments[u];for(var n=(0,f.getServiceDependencies)(o).sort(function(v,b){return v.index-b.index}),t=[],e=0,r=n;e<r.length;e++){var i=r[e],c=this._services.get(i.id);if(!c)throw new Error("[createInstance] "+o.name+" depends on UNKNOWN service "+i.id+".");t.push(c)}var _=n.length>0?n[0].index:a.length;if(a.length!==_)throw new Error("[createInstance] First service dependency of "+o.name+" at position "+(_+1)+" conflicts with "+a.length+" static arguments");return new(o.bind.apply(o,l([void 0],l(l([],a,!0),t,!0),!1)))},p}();s.InstantiationService=S},7866:function(W,s,y){var l=this&&this.__decorate||function(o,a,u,n){var t,e=arguments.length,r=e<3?a:null===n?n=Object.getOwnPropertyDescriptor(a,u):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(o,a,u,n);else for(var i=o.length-1;i>=0;i--)(t=o[i])&&(r=(e<3?t(r):e>3?t(a,u,r):t(a,u))||r);return e>3&&r&&Object.defineProperty(a,u,r),r},d=this&&this.__param||function(o,a){return function(u,n){a(u,n,o)}},f=this&&this.__spreadArray||function(o,a,u){if(u||2===arguments.length)for(var n,t=0,e=a.length;t<e;t++)!n&&t in a||(n||(n=Array.prototype.slice.call(a,0,t)),n[t]=a[t]);return o.concat(n||Array.prototype.slice.call(a))};Object.defineProperty(s,"__esModule",{value:!0}),s.LogService=void 0;var h=y(2585),S={debug:h.LogLevelEnum.DEBUG,info:h.LogLevelEnum.INFO,warn:h.LogLevelEnum.WARN,error:h.LogLevelEnum.ERROR,off:h.LogLevelEnum.OFF},p=function(){function o(a){var u=this;this._optionsService=a,this.logLevel=h.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(n){"logLevel"===n&&u._updateLogLevel()})}return o.prototype._updateLogLevel=function(){this.logLevel=S[this._optionsService.rawOptions.logLevel]},o.prototype._evalLazyOptionalParams=function(a){for(var u=0;u<a.length;u++)"function"==typeof a[u]&&(a[u]=a[u]())},o.prototype._log=function(a,u,n){this._evalLazyOptionalParams(n),a.call.apply(a,f([console,"xterm.js: "+u],n,!1))},o.prototype.debug=function(a){for(var u=[],n=1;n<arguments.length;n++)u[n-1]=arguments[n];this.logLevel<=h.LogLevelEnum.DEBUG&&this._log(console.log,a,u)},o.prototype.info=function(a){for(var u=[],n=1;n<arguments.length;n++)u[n-1]=arguments[n];this.logLevel<=h.LogLevelEnum.INFO&&this._log(console.info,a,u)},o.prototype.warn=function(a){for(var u=[],n=1;n<arguments.length;n++)u[n-1]=arguments[n];this.logLevel<=h.LogLevelEnum.WARN&&this._log(console.warn,a,u)},o.prototype.error=function(a){for(var u=[],n=1;n<arguments.length;n++)u[n-1]=arguments[n];this.logLevel<=h.LogLevelEnum.ERROR&&this._log(console.error,a,u)},l([d(0,h.IOptionsService)],o)}();s.LogService=p},7302:function(W,s,y){var l=this&&this.__assign||function(){return l=Object.assign||function(p){for(var o,a=1,u=arguments.length;a<u;a++)for(var n in o=arguments[a])Object.prototype.hasOwnProperty.call(o,n)&&(p[n]=o[n]);return p},l.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=s.DEFAULT_BELL_SOUND=void 0;var d=y(8460),f=y(6114);s.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:s.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:f.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1};var h=["normal","bold","100","200","300","400","500","600","700","800","900"],S=function(){function p(o){this._onOptionChange=new d.EventEmitter;var a=l({},s.DEFAULT_OPTIONS);for(var u in o)if(u in a)try{a[u]=this._sanitizeAndValidateOption(u,o[u])}catch(t){console.error(t)}this.rawOptions=a,this.options=l({},a),this._setupOptions()}return Object.defineProperty(p.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),p.prototype._setupOptions=function(){var o=this,a=function(e){if(!(e in s.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');return o.rawOptions[e]},u=function(e,r){if(!(e in s.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');r=o._sanitizeAndValidateOption(e,r),o.rawOptions[e]!==r&&(o.rawOptions[e]=r,o._onOptionChange.fire(e))};for(var n in this.rawOptions){var t={get:a.bind(this,n),set:u.bind(this,n)};Object.defineProperty(this.options,n,t)}},p.prototype.setOption=function(o,a){this.options[o]=a},p.prototype._sanitizeAndValidateOption=function(o,a){switch(o){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":a||(a=s.DEFAULT_OPTIONS[o]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof a&&1<=a&&a<=1e3)break;a=h.includes(a)?a:s.DEFAULT_OPTIONS[o];break;case"cursorWidth":a=Math.floor(a);case"lineHeight":case"tabStopWidth":if(a<1)throw new Error(o+" cannot be less than 1, value: "+a);break;case"minimumContrastRatio":a=Math.max(1,Math.min(21,Math.round(10*a)/10));break;case"scrollback":if((a=Math.min(a,4294967295))<0)throw new Error(o+" cannot be less than 0, value: "+a);break;case"fastScrollSensitivity":case"scrollSensitivity":if(a<=0)throw new Error(o+" cannot be less than or equal to 0, value: "+a);case"rows":case"cols":if(!a&&0!==a)throw new Error(o+" must be numeric, value: "+a)}return a},p.prototype.getOption=function(o){return this.options[o]},p}();s.OptionsService=S},8343:(W,s)=>{function y(l,d,f){d.di$target===d?d.di$dependencies.push({id:l,index:f}):(d.di$dependencies=[{id:l,index:f}],d.di$target=d)}Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0,s.serviceRegistry=new Map,s.getServiceDependencies=function(l){return l.di$dependencies||[]},s.createDecorator=function(l){if(s.serviceRegistry.has(l))return s.serviceRegistry.get(l);var d=function(f,h,S){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");y(d,f,S)};return d.toString=function(){return l},s.serviceRegistry.set(l,d),d}},2585:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IUnicodeService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.IDirtyRowService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;var l,d=y(8343);s.IBufferService=(0,d.createDecorator)("BufferService"),s.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),s.ICoreService=(0,d.createDecorator)("CoreService"),s.ICharsetService=(0,d.createDecorator)("CharsetService"),s.IDirtyRowService=(0,d.createDecorator)("DirtyRowService"),s.IInstantiationService=(0,d.createDecorator)("InstantiationService"),(l=s.LogLevelEnum||(s.LogLevelEnum={}))[l.DEBUG=0]="DEBUG",l[l.INFO=1]="INFO",l[l.WARN=2]="WARN",l[l.ERROR=3]="ERROR",l[l.OFF=4]="OFF",s.ILogService=(0,d.createDecorator)("LogService"),s.IOptionsService=(0,d.createDecorator)("OptionsService"),s.IUnicodeService=(0,d.createDecorator)("UnicodeService")},1480:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;var l=y(8460),d=y(225),f=function(){function h(){this._providers=Object.create(null),this._active="",this._onChange=new l.EventEmitter;var S=new d.UnicodeV6;this.register(S),this._active=S.version,this._activeProvider=S}return Object.defineProperty(h.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"activeVersion",{get:function(){return this._active},set:function(S){if(!this._providers[S])throw new Error('unknown Unicode version "'+S+'"');this._active=S,this._activeProvider=this._providers[S],this._onChange.fire(S)},enumerable:!1,configurable:!0}),h.prototype.register=function(S){this._providers[S.version]=S},h.prototype.wcwidth=function(S){return this._activeProvider.wcwidth(S)},h.prototype.getStringCellWidth=function(S){for(var p=0,o=S.length,a=0;a<o;++a){var u=S.charCodeAt(a);if(55296<=u&&u<=56319){if(++a>=o)return p+this.wcwidth(u);var n=S.charCodeAt(a);56320<=n&&n<=57343?u=1024*(u-55296)+n-56320+65536:p+=this.wcwidth(n)}p+=this.wcwidth(u)}return p},h}();s.UnicodeService=f}},G={};return function W(s){var y=G[s];if(void 0!==y)return y.exports;var l=G[s]={exports:{}};return fe[s].call(l.exports,l,l.exports,W),l.exports}(4389)})()}}]);