"use strict";(self.webpackChunkkubernetes_dashboard=self.webpackChunkkubernetes_dashboard||[]).push([[831],{8831:(W,u,i)=>{i.r(u),i.d(u,{SecretModule:()=>V});var S=i(1028),T=i(6042),c=i(4793),f=i(3621),R=i(3456),N=i(6275),M=i(6758),v=i(2722),p=i(4489),E=i(1495),I=i(5387),m=i(7575),O=i(5467),e=i(4650),C=i(2787),y=i(958),x=i(7347),d=i(6895),_=i(1870),g=i(529),D=i(3778),A=i(5938),P=i(9549),F=i(9349),L=i(284),l=i(4006),b=i(4859);function $(n,s){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1)(1,"mat-form-field",2)(2,"textarea",3),e.\u0275\u0275listener("ngModelChange",function(r){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().text=r}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div",4)(4,"button",5),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().update()}),e.\u0275\u0275i18n(5,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",7),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().cancel()}),e.\u0275\u0275i18n(7,8),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",t.text)}}let j=(()=>{class n{constructor(t,o,r){this.dialog_=t,this.http_=o,this.decoder_=r,this.onClose=new e.EventEmitter,this.text="",this.editing_=!1}set editing(t){this.editing_=t,this.updateText_()}get editing(){return this.editing_}set secret(t){this.secret_=t}get secret(){return this.secret_}ngOnInit(){this.updateText_()}update(){const t=_.r.getUrl(this.secret.typeMeta,this.secret.objectMeta);this.http_.get(t).toPromise().then(o=>{const r=this.encode_(this.text);o.data[this.key]=this.encode_(this.text);const a=_.r.getUrl(this.secret.typeMeta,this.secret.objectMeta);this.http_.put(a,o,{headers:this.getHttpHeaders_(),responseType:"text"}).subscribe(()=>{this.secret_.data[this.key]=r,this.onClose.emit(!0)},this.handleErrorResponse_.bind(this))})}cancel(){this.onClose.emit(!0)}updateText_(){this.text=this.secret&&this.key?this.decoder_.base64(this.secret.data[this.key]):""}encode_(t){return btoa(t)}getHttpHeaders_(){const t=new g.WM;return t.set("Content-Type","application/json"),t.set("Accept","application/json"),t}handleErrorResponse_(t){t&&this.dialog_.open(D.a,{width:"630px",data:{title:"OK"===t.statusText?"Internal server error":t.statusText,message:t.error||"Could not perform the operation.",confirmLabel:"OK"}})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(A.uw),e.\u0275\u0275directiveInject(g.eN),e.\u0275\u0275directiveInject(C.F))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["kd-secret-detail-edit"]],inputs:{key:"key",editing:"editing",secret:"secret"},outputs:{onClose:"onClose"},decls:1,vars:1,consts:function(){let s,t;return s="Aktualisieren",t="Abbrechen",[["class","kd-secret-detail-edit-container",4,"ngIf"],[1,"kd-secret-detail-edit-container"],[1,"kd-secret-detail-text"],["cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","20","matInput","",3,"ngModel","ngModelChange"],[1,"kd-secret-detail-actions"],["mat-raised-button","","color","primary","id","confirm-edit",3,"click"],s,["mat-button","","color","primary",3,"click"],t]},template:function(t,o){1&t&&e.\u0275\u0275template(0,$,8,1,"div",0),2&t&&e.\u0275\u0275property("ngIf",o.secret)},directives:[d.NgIf,P.KE,F.IC,L.Nt,l.DefaultValueAccessor,l.NgControlStatus,l.NgModel,b.lW],styles:[".kd-secret-detail-text[_ngcontent-%COMP%]{width:100%}.kd-secret-detail-text[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{font-family:Roboto Mono Regular,monospace;font-size:14px}.kd-secret-detail-actions[_ngcontent-%COMP%]{min-height:52px;padding:8px 0}"]}),n})();function G(n,s){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"kd-hidden-property",7,8)(2,"div",9),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",10),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",11)(7,"kd-secret-detail-edit",12),e.\u0275\u0275listener("onClose",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275reference(1),a=e.\u0275\u0275nextContext();return r.mode=a.HiddenPropertyMode.Hidden}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",13),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd()()}if(2&n){const t=s.$implicit,o=e.\u0275\u0275reference(1),r=e.\u0275\u0275nextContext();e.\u0275\u0275property("enableEdit",!0),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(r.decoder.base64(null==r.secret?null:r.secret.data[t])),e.\u0275\u0275advance(2),e.\u0275\u0275property("secret",r.secret)("key",t)("editing",o.mode==r.HiddenPropertyMode.Edit),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",r.decoder.base64(null==r.secret?null:r.secret.data[t]).length," bytes")}}function k(n,s){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementContainerEnd())}let z=(()=>{class n{constructor(t,o,r,a,K){this.secret_=t,this.actionbar_=o,this.activatedRoute_=r,this.notifications_=a,this.decoder=K,this.endpoint_=m.wE.resource(m._z.secret,!0),this.unsubscribe_=new M.x,this.isInitialized=!1,this.HiddenPropertyMode=p.C}ngOnInit(){const t=this.activatedRoute_.snapshot.params.resourceName,o=this.activatedRoute_.snapshot.params.resourceNamespace;this.secret_.get(this.endpoint_.detail(),t,o).pipe((0,v.R)(this.unsubscribe_)).subscribe(r=>{this.secret=r,this.notifications_.pushErrors(r.errors),this.actionbar_.onInit.emit(new E.N("Secret",r.objectMeta,r.typeMeta)),this.isInitialized=!0})}ngOnDestroy(){this.unsubscribe_.next(),this.unsubscribe_.complete(),this.actionbar_.onDetailsLeave.emit()}getDataKeys(){return this.secret&&this.secret.data?Object.keys(this.secret.data):[]}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(O.p),e.\u0275\u0275directiveInject(E.b),e.\u0275\u0275directiveInject(c.ActivatedRoute),e.\u0275\u0275directiveInject(I.TF),e.\u0275\u0275directiveInject(C.F))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["kd-secret-detail"]],decls:7,vars:5,consts:function(){let s,t;return s="Daten",t="Keine Daten zum anzeigen vorhanden.",[[3,"initialized","objectMeta"],[3,"initialized"],["title",""],s,["content",""],[3,"enableEdit",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"enableEdit"],["property",""],["key",""],["whenVisible","",1,"kd-code-block"],["whenEdit",""],[3,"secret","key","editing","onClose"],["whenHidden",""],t]},template:function(t,o){1&t&&(e.\u0275\u0275element(0,"kd-object-meta",0),e.\u0275\u0275elementStart(1,"kd-card",1)(2,"div",2),e.\u0275\u0275i18n(3,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275template(5,G,10,7,"kd-hidden-property",5),e.\u0275\u0275template(6,k,2,0,"ng-container",6),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275property("initialized",o.isInitialized)("objectMeta",null==o.secret?null:o.secret.objectMeta),e.\u0275\u0275advance(1),e.\u0275\u0275property("initialized",o.isInitialized),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",o.getDataKeys()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=o.secret&&o.secret.data)))},directives:[y.A,x.A,d.NgForOf,p.U,j,d.NgIf],encapsulation:2}),n})();var U=i(354);const h={path:"",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["kd-secret-list-state"]],decls:1,vars:0,consts:function(){let s;return s="Secrets",[["title",s]]},template:function(t,o){1&t&&e.\u0275\u0275element(0,"kd-secret-list",0)},directives:[U.A],encapsulation:2}),n})(),data:{breadcrumb:R.SX.Secrets,parent:N.M}},X={path:":resourceNamespace/:resourceName",component:z,data:{breadcrumb:"{{ resourceName }}",parent:h}};let H=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.RouterModule.forChild([h,X,f.aA])],c.RouterModule]}),n})(),V=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[T.m,S.K,H]]}),n})()}}]);